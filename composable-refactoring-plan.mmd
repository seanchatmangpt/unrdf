graph TD
    subgraph "Refactoring Action Plan"
        subgraph "Phase 1: Remove Problematic Composable"
            Remove["‚ùå REMOVE useJsonLD()<br/>Complete context violation<br/>Creates isolated engine"]
        end
        
        subgraph "Phase 2: Critical Refactoring"
            CanonRefactor["üîß REFACTOR useCanon()<br/>‚Ä¢ Remove: const engine = new RdfEngine()<br/>‚Ä¢ Add: const storeContext = useStoreContext()<br/>‚Ä¢ Use: storeContext.engine"]
            
            ReasonerRefactor["üîß REFACTOR useReasoner()<br/>‚Ä¢ Fix: return useGraph(engine.createStore())<br/>‚Ä¢ Use: context store for all operations<br/>‚Ä¢ Ensure: consistent store access"]
            
            ValidatorRefactor["üîß REFACTOR useValidator()<br/>‚Ä¢ Remove: const engine = new RdfEngine()<br/>‚Ä¢ Add: const storeContext = useStoreContext()<br/>‚Ä¢ Use: storeContext.engine"]
        end
        
        subgraph "Phase 3: Moderate Refactoring"
            TurtleFSRefactor["üîß REFACTOR useTurtleFS()<br/>‚Ä¢ Fix: const store = useStore()<br/>‚Ä¢ Change: const storeContext = useStoreContext()<br/>‚Ä¢ Use: storeContext.store"]
            
            NQuadsRefactor["üîß REFACTOR useNQuads()<br/>‚Ä¢ Remove: engine = new RdfEngine()<br/>‚Ä¢ Use: context engine consistently<br/>‚Ä¢ Fix: engine reassignment"]
            
            PointerRefactor["üîß REFACTOR usePointer()<br/>‚Ä¢ Remove: const engine = new RdfEngine()<br/>‚Ä¢ Add: const storeContext = useStoreContext()<br/>‚Ä¢ Use: storeContext.engine"]
        end
        
        subgraph "Phase 4: Validation & Testing"
            Test["‚úÖ TEST All Composables<br/>‚Ä¢ Verify context integration<br/>‚Ä¢ Test store consistency<br/>‚Ä¢ Validate engine sharing"]
            
            Docs["üìö UPDATE Documentation<br/>‚Ä¢ Context usage patterns<br/>‚Ä¢ Architecture guidelines<br/>‚Ä¢ Migration examples"]
        end
    end
    
    Remove --> CanonRefactor
    CanonRefactor --> ReasonerRefactor
    ReasonerRefactor --> ValidatorRefactor
    ValidatorRefactor --> TurtleFSRefactor
    TurtleFSRefactor --> NQuadsRefactor
    NQuadsRefactor --> PointerRefactor
    PointerRefactor --> Test
    Test --> Docs
    
    classDef remove fill:#ffebee,stroke:#c62828,stroke-width:3px
    classDef critical fill:#fff3e0,stroke:#ef6c00,stroke-width:2px
    classDef moderate fill:#fff8e1,stroke:#f57f17,stroke-width:2px
    classDef validation fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
    
    class Remove remove
    class CanonRefactor,ReasonerRefactor,ValidatorRefactor critical
    class TurtleFSRefactor,NQuadsRefactor,PointerRefactor moderate
    class Test,Docs validation
