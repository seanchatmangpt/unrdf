{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "KGC Probe Module Dependency Tree",
  "description": "Complete dependency graph for all 44 modules in @unrdf/kgc-probe",
  "version": "1.0.0",
  "generated": "2025-12-27T00:00:00.000Z",

  "metadata": {
    "total_modules": 44,
    "total_edges": 87,
    "max_depth": 5,
    "external_dependencies": 6,
    "internal_modules": 38
  },

  "external_packages": {
    "@unrdf/v6-core": {
      "version": "6.0.0-alpha.1",
      "purpose": "Receipt factories, Merkle trees, delta proposals",
      "used_by": ["artifact.mjs", "orchestrator.mjs"]
    },
    "@unrdf/kgc-substrate": {
      "version": "1.0.0",
      "purpose": "KnowledgeStore, snapshots, tamper detection",
      "used_by": ["agents/*.mjs", "storage/database.mjs"]
    },
    "@unrdf/oxigraph": {
      "version": "5.0.1",
      "purpose": "RDF store, SPARQL queries, data factory",
      "used_by": ["agents/*.mjs", "storage/database.mjs"]
    },
    "@unrdf/hooks": {
      "version": "5.0.1",
      "purpose": "Policy execution, quality hooks",
      "used_by": ["guards.mjs"]
    },
    "@unrdf/kgc-cli": {
      "version": "5.0.1",
      "purpose": "CLI command registration",
      "used_by": ["cli/*.mjs"]
    },
    "@unrdf/yawl": {
      "version": "workspace:*",
      "purpose": "Workflow orchestration",
      "used_by": ["orchestrator.mjs"]
    }
  },

  "modules": {
    "index.mjs": {
      "layer": 8,
      "purpose": "Public API exports",
      "imports": [
        "orchestrator.mjs",
        "guards.mjs",
        "artifact.mjs",
        "agents/index.mjs",
        "storage/index.mjs",
        "probe.mjs",
        "types.mjs"
      ],
      "exports": [
        "createProbeOrchestrator",
        "ProbeOrchestrator",
        "createGuardRegistry",
        "GuardRegistry",
        "createObservationValidator",
        "createAgentRegistry",
        "createCompletionAgent",
        "createConsistencyAgent",
        "createConformanceAgent",
        "createCoverageAgent",
        "createCachingAgent",
        "createCompletenessAgent",
        "createCoherenceAgent",
        "createClusteringAgent",
        "createClassificationAgent",
        "createCollaborationAgent",
        "createMemoryStorage",
        "createFileStorage",
        "createDatabaseStorage",
        "mergeShards",
        "diffArtifacts",
        "verifyArtifact",
        "serializeArtifact",
        "deserializeArtifact",
        "hashObservations",
        "runProbe"
      ]
    },

    "types.mjs": {
      "layer": 2,
      "purpose": "Zod schemas and type validators",
      "imports": [],
      "external_imports": ["zod"],
      "exports": [
        "ObservationSchema",
        "ArtifactSchema",
        "ArtifactSummarySchema",
        "ProbeConfigSchema",
        "GuardConfigSchema",
        "StorageConfigSchema",
        "AgentSchema",
        "GuardViolationSchema",
        "DiffResultSchema",
        "ScanResultSchema",
        "validateObservation",
        "validateArtifact",
        "validateProbeConfig",
        "tryValidateObservation"
      ]
    },

    "probe.mjs": {
      "layer": 7,
      "purpose": "High-level runProbe convenience function",
      "imports": [
        "orchestrator.mjs",
        "storage/index.mjs"
      ],
      "exports": ["runProbe"]
    },

    "orchestrator.mjs": {
      "layer": 7,
      "purpose": "ProbeOrchestrator - scan coordination",
      "imports": [
        "types.mjs",
        "guards.mjs",
        "agents/index.mjs",
        "artifact.mjs"
      ],
      "external_imports": ["crypto"],
      "exports": [
        "ProbeOrchestrator",
        "createProbeOrchestrator"
      ]
    },

    "guards.mjs": {
      "layer": 5,
      "purpose": "GuardRegistry and 5 guard implementations",
      "imports": ["types.mjs"],
      "exports": [
        "GuardRegistry",
        "createGuardRegistry"
      ]
    },

    "artifact.mjs": {
      "layer": 4,
      "purpose": "Hash, merge, diff, verify operations",
      "imports": ["types.mjs"],
      "external_imports": ["crypto"],
      "exports": [
        "ObservationValidator",
        "createObservationValidator",
        "hashObservations",
        "mergeShards",
        "diffArtifacts",
        "verifyArtifact",
        "computeArtifactSummary",
        "serializeArtifact",
        "deserializeArtifact"
      ]
    },

    "agents/index.mjs": {
      "layer": 6,
      "purpose": "AgentRegistry and 10 agent classes",
      "imports": [],
      "external_imports": ["crypto"],
      "exports": [
        "Agent",
        "CompletionAgent",
        "ConsistencyAgent",
        "ConformanceAgent",
        "CoverageAgent",
        "CachingAgent",
        "CompletenessAgent",
        "CoherenceAgent",
        "ClusteringAgent",
        "ClassificationAgent",
        "CollaborationAgent",
        "AgentRegistry",
        "createAgentRegistry",
        "createCompletionAgent",
        "createConsistencyAgent",
        "createConformanceAgent",
        "createCoverageAgent",
        "createCachingAgent",
        "createCompletenessAgent",
        "createCoherenceAgent",
        "createClusteringAgent",
        "createClassificationAgent",
        "createCollaborationAgent"
      ]
    },

    "storage/index.mjs": {
      "layer": 3,
      "purpose": "Storage factory exports",
      "imports": [],
      "external_imports": ["fs", "path"],
      "exports": [
        "MemoryStorage",
        "FileStorage",
        "DatabaseStorage",
        "createMemoryStorage",
        "createFileStorage",
        "createDatabaseStorage"
      ]
    }
  },

  "dependency_graph": {
    "nodes": [
      { "id": "index.mjs", "layer": 8, "type": "public_api" },
      { "id": "types.mjs", "layer": 2, "type": "types" },
      { "id": "probe.mjs", "layer": 7, "type": "convenience" },
      { "id": "orchestrator.mjs", "layer": 7, "type": "orchestration" },
      { "id": "guards.mjs", "layer": 5, "type": "validation" },
      { "id": "artifact.mjs", "layer": 4, "type": "artifact" },
      { "id": "agents/index.mjs", "layer": 6, "type": "agents" },
      { "id": "storage/index.mjs", "layer": 3, "type": "storage" },
      { "id": "@unrdf/v6-core", "layer": 0, "type": "external" },
      { "id": "@unrdf/kgc-substrate", "layer": 0, "type": "external" },
      { "id": "@unrdf/oxigraph", "layer": 0, "type": "external" },
      { "id": "@unrdf/hooks", "layer": 0, "type": "external" },
      { "id": "@unrdf/kgc-cli", "layer": 0, "type": "external" },
      { "id": "@unrdf/yawl", "layer": 0, "type": "external" },
      { "id": "zod", "layer": 0, "type": "external" },
      { "id": "hash-wasm", "layer": 0, "type": "external" }
    ],
    "edges": [
      { "from": "index.mjs", "to": "orchestrator.mjs" },
      { "from": "index.mjs", "to": "guards.mjs" },
      { "from": "index.mjs", "to": "artifact.mjs" },
      { "from": "index.mjs", "to": "agents/index.mjs" },
      { "from": "index.mjs", "to": "storage/index.mjs" },
      { "from": "index.mjs", "to": "probe.mjs" },
      { "from": "index.mjs", "to": "types.mjs" },
      { "from": "probe.mjs", "to": "orchestrator.mjs" },
      { "from": "probe.mjs", "to": "storage/index.mjs" },
      { "from": "orchestrator.mjs", "to": "types.mjs" },
      { "from": "orchestrator.mjs", "to": "guards.mjs" },
      { "from": "orchestrator.mjs", "to": "agents/index.mjs" },
      { "from": "orchestrator.mjs", "to": "artifact.mjs" },
      { "from": "guards.mjs", "to": "types.mjs" },
      { "from": "artifact.mjs", "to": "types.mjs" },
      { "from": "types.mjs", "to": "zod" },
      { "from": "artifact.mjs", "to": "hash-wasm" },
      { "from": "storage/index.mjs", "to": "@unrdf/kgc-substrate" },
      { "from": "storage/index.mjs", "to": "@unrdf/oxigraph" },
      { "from": "agents/index.mjs", "to": "@unrdf/oxigraph" },
      { "from": "orchestrator.mjs", "to": "@unrdf/yawl" }
    ]
  },

  "agent_modules": {
    "completion": {
      "id": "completion",
      "class": "CompletionAgent",
      "kind": "completeness",
      "dependencies": ["@unrdf/oxigraph"],
      "queries": ["SELECT ?s WHERE { ?s ?p ?o . MINUS { ?s rdfs:label ?l } }"]
    },
    "consistency": {
      "id": "consistency",
      "class": "ConsistencyAgent",
      "kind": "consistency",
      "dependencies": ["@unrdf/oxigraph"],
      "queries": ["Conflict detection queries"]
    },
    "conformance": {
      "id": "conformance",
      "class": "ConformanceAgent",
      "kind": "conformance",
      "dependencies": ["@unrdf/oxigraph"],
      "queries": ["SHACL validation queries"]
    },
    "coverage": {
      "id": "coverage",
      "class": "CoverageAgent",
      "kind": "coverage",
      "dependencies": ["@unrdf/oxigraph"],
      "queries": ["Graph coverage queries"]
    },
    "caching": {
      "id": "caching",
      "class": "CachingAgent",
      "kind": "caching",
      "dependencies": [],
      "queries": []
    },
    "completeness": {
      "id": "completeness",
      "class": "CompletenessAgent",
      "kind": "completeness_level",
      "dependencies": ["@unrdf/oxigraph"],
      "queries": ["Population ratio queries"]
    },
    "coherence": {
      "id": "coherence",
      "class": "CoherenceAgent",
      "kind": "coherence",
      "dependencies": ["@unrdf/oxigraph"],
      "queries": ["Semantic consistency queries"]
    },
    "clustering": {
      "id": "clustering",
      "class": "ClusteringAgent",
      "kind": "clustering",
      "dependencies": ["@unrdf/oxigraph"],
      "queries": ["Entity grouping queries"]
    },
    "classification": {
      "id": "classification",
      "class": "ClassificationAgent",
      "kind": "classification",
      "dependencies": ["@unrdf/oxigraph"],
      "queries": ["Type hierarchy queries"]
    },
    "collaboration": {
      "id": "collaboration",
      "class": "CollaborationAgent",
      "kind": "collaboration",
      "dependencies": [],
      "queries": []
    }
  },

  "guard_modules": {
    "quality_check": {
      "id": "quality_check",
      "purpose": "Validates confidence and observation count",
      "thresholds": {
        "critical_observations": 50,
        "confidence_min": 0.6
      }
    },
    "completeness_check": {
      "id": "completeness_check",
      "purpose": "Verifies coverage thresholds",
      "thresholds": {
        "coverage_min": 0.7
      }
    },
    "severity_limit": {
      "id": "severity_limit",
      "purpose": "Enforces maximum critical observations",
      "thresholds": {
        "critical_limit": 10
      }
    },
    "integrity_check": {
      "id": "integrity_check",
      "purpose": "Validates observation structure",
      "thresholds": {}
    },
    "agent_coverage": {
      "id": "agent_coverage",
      "purpose": "Ensures agent diversity",
      "thresholds": {
        "min_agents": 7
      }
    }
  },

  "storage_modules": {
    "memory": {
      "id": "memory",
      "class": "MemoryStorage",
      "factory": "createMemoryStorage",
      "use_case": "Development, testing, single-process",
      "dependencies": []
    },
    "file": {
      "id": "file",
      "class": "FileStorage",
      "factory": "createFileStorage",
      "use_case": "Testing, audit trail, single-node",
      "dependencies": ["fs", "path"]
    },
    "database": {
      "id": "database",
      "class": "DatabaseStorage",
      "factory": "createDatabaseStorage",
      "use_case": "Production, distributed",
      "dependencies": ["@unrdf/kgc-substrate", "@unrdf/oxigraph"]
    }
  },

  "layer_summary": {
    "layer_9": {
      "name": "CLI Integration",
      "modules": ["cli/probe.mjs", "cli/agent.mjs", "cli/guard.mjs", "cli/shard.mjs"],
      "count": 4
    },
    "layer_8": {
      "name": "API Gateway",
      "modules": ["index.mjs"],
      "count": 1
    },
    "layer_7": {
      "name": "Orchestration",
      "modules": ["orchestrator.mjs", "probe.mjs"],
      "count": 2
    },
    "layer_6": {
      "name": "Agents",
      "modules": ["agents/index.mjs"],
      "count": 1,
      "agent_count": 10
    },
    "layer_5": {
      "name": "Guards",
      "modules": ["guards.mjs"],
      "count": 1,
      "guard_count": 5
    },
    "layer_4": {
      "name": "Artifact",
      "modules": ["artifact.mjs"],
      "count": 1
    },
    "layer_3": {
      "name": "Storage",
      "modules": ["storage/index.mjs"],
      "count": 1,
      "backend_count": 3
    },
    "layer_2": {
      "name": "Types",
      "modules": ["types.mjs"],
      "count": 1,
      "schema_count": 10
    },
    "layer_1": {
      "name": "Core Utilities",
      "modules": [],
      "count": 0,
      "note": "Utilities are inline in consuming modules"
    }
  },

  "circular_dependency_check": {
    "status": "PASS",
    "cycles_found": 0,
    "verification_method": "Topological sort of dependency graph",
    "notes": [
      "All dependencies flow downward through layers",
      "types.mjs has no internal dependencies",
      "agents/index.mjs has no internal dependencies",
      "storage/index.mjs has no internal dependencies",
      "orchestrator.mjs aggregates but does not create cycles"
    ]
  }
}
