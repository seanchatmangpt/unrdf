@startuml Complete System Overview

skinparam backgroundColor #FFFFFF
skinparam defaultFontSize 9

title Complete System Overview - Production Ready Architecture

package "Validation Suite" {
  [ValidationRunner] as Runner
  [OTELValidator] as Validator
  [OTELSpanBuilder] as SpanBuilder
}

package "AtomVM Runtime" {
  [AtomVMRuntime] as BrowserRuntime
  [AtomVMNodeRuntime] as NodeRuntime
  [AtomVM WASM] as WASM
}

package "Bridge System" {
  [KGC4DBridge] as Bridge
  [BridgeInterceptor] as Interceptor
}

package "KGC-4D Integration" {
  [KGCStore] as Store
  [HookRegistry] as Hooks
}

package "OTEL Infrastructure" {
  [TracerProvider] as Provider
  [SpanProcessor] as Processor
  [SpanCollector] as Collector
}

package "Erlang Processes" {
  [boardroom-swarm.erl] as ErlangModule
  [AtomVM Execution] as Execution
}

Runner --> Validator : validate features
Validator --> SpanBuilder : execute features
SpanBuilder --> NodeRuntime : runtime operations
SpanBuilder --> Bridge : bridge operations

NodeRuntime --> WASM : execute .avm files
NodeRuntime --> Provider : create OTEL spans

ErlangModule --> Execution : compile to .avm
Execution --> Interceptor : Module.print output
Interceptor --> Bridge : parse KGC4D_BRIDGE commands
Interceptor --> Provider : create OTEL spans

Bridge --> Store : emitEvent()
Bridge --> Hooks : registerHook(), processIntent()
Bridge --> Provider : create OTEL spans

Provider --> Processor : process spans
Processor --> Collector : collect spans
Collector --> Validator : validate spans

note top of Runner
  **Production Ready:**
  - No simulation
  - Real OTEL spans only
  - Fail fast on errors
  - End-to-end tracing
end note

note right of Interceptor
  **Production Ready:**
  - Real OTEL spans
  - Actual KGC-4D integration
  - Actual hooks execution
  - No mock data
end note

note right of NodeRuntime
  **Production Ready:**
  - Real AtomVM WASM
  - State machine (poka-yoke)
  - OTEL instrumentation
  - Error handling
end note

note bottom of Provider
  **Production Ready:**
  - All spans from real operations
  - Proper parent-child relationships
  - Context propagation
  - No simulated spans
end note

@enduml

