graph TD
    subgraph "Context Flow Architecture"
        subgraph "Application Layer"
            App["Application Code"]
            InitStore["initStore()"]
        end
        
        subgraph "Context Layer"
            Context["unctx Context"]
            AsyncStorage["AsyncLocalStorage"]
            StoreCtx["StoreContext"]
        end
        
        subgraph "Core Layer"
            Engine["RdfEngine<br/>(Single Instance)"]
            Store["N3.Store<br/>(Single Instance)"]
        end
        
        subgraph "Composable Layer"
            subgraph "Context-Dependent Composables"
                StoreComp["useStore()"]
                GraphComp["useGraph()"]
                TurtleComp["useTurtle()"]
                ListsComp["useLists()"]
                TurtleFSComp["useTurtleFS()"]
                NQuadsComp["useNQuads()"]
                PointerComp["usePointer()"]
                ValidatorComp["useValidator()"]
                ReasonerComp["useReasoner()"]
                CanonComp["useCanon()"]
            end
            
            subgraph "Pure Utility Composables"
                TermsComp["useTerms()"]
                PrefixesComp["usePrefixes()"]
                IRIsComp["useIRIs()"]
                ZodComp["useZod()"]
                DeltaComp["useDelta()"]
                MetricsComp["useMetrics()"]
                CacheComp["useCache()"]
            end
        end
        
        subgraph "Data Layer"
            TurtleFiles["Turtle Files"]
            NQuadsFiles["N-Quads Files"]
            JsonLDFiles["JSON-LD Files"]
            SPARQLQueries["SPARQL Queries"]
        end
    end
    
    App --> InitStore
    InitStore --> Context
    Context --> AsyncStorage
    Context --> StoreCtx
    StoreCtx --> Engine
    StoreCtx --> Store
    
    StoreComp --> StoreCtx
    GraphComp --> StoreCtx
    TurtleComp --> StoreCtx
    ListsComp --> StoreCtx
    TurtleFSComp --> StoreCtx
    NQuadsComp --> StoreCtx
    PointerComp --> StoreCtx
    ValidatorComp --> StoreCtx
    ReasonerComp --> StoreCtx
    CanonComp --> StoreCtx
    
    TurtleComp --> TurtleFiles
    TurtleFSComp --> TurtleFiles
    NQuadsComp --> NQuadsFiles
    GraphComp --> SPARQLQueries
    
    classDef app fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef context fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef core fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef composable fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef utility fill:#fce4ec,stroke:#880e4f,stroke-width:2px
    classDef data fill:#f1f8e9,stroke:#33691e,stroke-width:2px
    
    class App,InitStore app
    class Context,AsyncStorage,StoreCtx context
    class Engine,Store core
    class StoreComp,GraphComp,TurtleComp,ListsComp,TurtleFSComp,NQuadsComp,PointerComp,ValidatorComp,ReasonerComp,CanonComp composable
    class TermsComp,PrefixesComp,IRIsComp,ZodComp,DeltaComp,MetricsComp,CacheComp utility
    class TurtleFiles,NQuadsFiles,JsonLDFiles,SPARQLQueries data
