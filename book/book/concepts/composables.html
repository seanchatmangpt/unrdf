<!DOCTYPE HTML>
<html lang="en" class="navy" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Composables - UNRDF - Universal RDF Framework</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="Production-ready RDF knowledge graph library with Knowledge Hooks and autonomic capabilities">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "navy";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('navy')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../getting-started/quick-start.html"><strong aria-hidden="true">2.</strong> Getting Started</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../getting-started/quick-start.html"><strong aria-hidden="true">2.1.</strong> Quick Start</a></li><li class="chapter-item "><a href="../getting-started/installation.html"><strong aria-hidden="true">2.2.</strong> Installation</a></li><li class="chapter-item "><a href="../getting-started/basic-usage.html"><strong aria-hidden="true">2.3.</strong> Basic Usage</a></li><li class="chapter-item "><a href="../getting-started/first-hook.html"><strong aria-hidden="true">2.4.</strong> Your First Hook</a></li></ol></li><li class="chapter-item expanded "><a href="../concepts/rdf-fundamentals.html"><strong aria-hidden="true">3.</strong> Concepts</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../concepts/rdf-fundamentals.html"><strong aria-hidden="true">3.1.</strong> RDF Fundamentals</a></li><li class="chapter-item expanded "><a href="../concepts/composables.html" class="active"><strong aria-hidden="true">3.2.</strong> Composables</a></li><li class="chapter-item "><a href="../concepts/store-context.html"><strong aria-hidden="true">3.3.</strong> Store & Context</a></li><li class="chapter-item "><a href="../concepts/transactions.html"><strong aria-hidden="true">3.4.</strong> Transactions</a></li></ol></li><li class="chapter-item expanded "><a href="../hooks/introduction.html"><strong aria-hidden="true">4.</strong> Hooks</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../hooks/introduction.html"><strong aria-hidden="true">4.1.</strong> Introduction</a></li><li class="chapter-item "><a href="../hooks/lifecycle.html"><strong aria-hidden="true">4.2.</strong> Lifecycle</a></li><li class="chapter-item "><a href="../hooks/effects.html"><strong aria-hidden="true">4.3.</strong> Effects</a></li><li class="chapter-item "><a href="../hooks/predicates.html"><strong aria-hidden="true">4.4.</strong> Predicates</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../hooks/predicates/ask.html"><strong aria-hidden="true">4.4.1.</strong> ASK</a></li><li class="chapter-item "><a href="../hooks/predicates/shacl.html"><strong aria-hidden="true">4.4.2.</strong> SHACL</a></li><li class="chapter-item "><a href="../hooks/predicates/delta.html"><strong aria-hidden="true">4.4.3.</strong> Delta</a></li><li class="chapter-item "><a href="../hooks/predicates/threshold.html"><strong aria-hidden="true">4.4.4.</strong> Threshold</a></li><li class="chapter-item "><a href="../hooks/predicates/custom.html"><strong aria-hidden="true">4.4.5.</strong> Custom</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../api/core.html"><strong aria-hidden="true">5.</strong> API Reference</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../api/cli.html"><strong aria-hidden="true">5.1.</strong> CLI</a></li><li class="chapter-item "><a href="../api/core.html"><strong aria-hidden="true">5.2.</strong> Core</a></li><li class="chapter-item "><a href="../api/knowledge-engine.html"><strong aria-hidden="true">5.3.</strong> Knowledge Engine</a></li><li class="chapter-item "><a href="../api/composables.html"><strong aria-hidden="true">5.4.</strong> Composables</a></li><li class="chapter-item "><a href="../api/utilities.html"><strong aria-hidden="true">5.5.</strong> Utilities</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">UNRDF - Universal RDF Framework</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/seanchatmangpt/unrdf" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/seanchatmangpt/unrdf/edit/main/book/src/concepts/composables.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="composables"><a class="header" href="#composables">Composables</a></h1>
<p>UNRDF provides a suite of <strong>composable functions</strong> that work seamlessly with the Store Context. Each composable has a specific purpose and can be combined to build powerful RDF applications.</p>
<h2 id="what-are-composables"><a class="header" href="#what-are-composables">What are Composables?</a></h2>
<p>Composables are reusable functions that:</p>
<ol>
<li><strong>Access the Store Context</strong> automatically (no parameters needed)</li>
<li><strong>Provide focused APIs</strong> for specific RDF operations</li>
<li><strong>Compose together</strong> to build complex workflows</li>
<li><strong>Maintain type safety</strong> through JSDoc annotations</li>
<li><strong>Follow async/await</strong> patterns consistently</li>
</ol>
<p>Think of composables as <strong>specialized tools</strong> in your RDF toolkit—each designed for a specific task, all sharing the same underlying store.</p>
<h2 id="core-composables"><a class="header" href="#core-composables">Core Composables</a></h2>
<h3 id="usestorecontext"><a class="header" href="#usestorecontext"><code>useStoreContext()</code></a></h3>
<p>The foundation composable that provides direct store access.</p>
<pre><code class="language-javascript">import { initStore, useStoreContext } from 'unrdf';

const runApp = initStore();

runApp(() =&gt; {
  const ctx = useStoreContext();

  // Access underlying N3.Store
  console.log(ctx.store.size);

  // Create terms
  const person = ctx.namedNode('http://example.org/alice');
  const name = ctx.literal('Alice');

  // Add/remove quads
  ctx.add(ctx.quad(person, ctx.namedNode('http://xmlns.com/foaf/0.1/name'), name));
  ctx.remove(someQuad);
  ctx.clear();

  // Get statistics
  const stats = ctx.stats();

  // Serialize
  const turtle = ctx.serialize({ format: 'Turtle' });
});
</code></pre>
<p><strong>When to use:</strong></p>
<ul>
<li>Direct store manipulation</li>
<li>Term creation</li>
<li>Low-level operations</li>
<li>Custom logic</li>
</ul>
<h2 id="usegraph---sparql--graph-operations"><a class="header" href="#usegraph---sparql--graph-operations"><code>useGraph()</code> - SPARQL &amp; Graph Operations</a></h2>
<p>High-level interface for querying and manipulating RDF graphs.</p>
<p><strong>Source Reference</strong> (<code>src/composables/use-graph.mjs</code>)</p>
<h3 id="basic-usage"><a class="header" href="#basic-usage">Basic Usage</a></h3>
<pre><code class="language-javascript">import { initStore, useGraph } from 'unrdf';

const runApp = initStore();

runApp(async () =&gt; {
  const graph = useGraph();

  // Execute SPARQL SELECT
  const results = await graph.select(`
    PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;

    SELECT ?name ?age WHERE {
      ?person foaf:name ?name ;
              foaf:age ?age .
    }
  `);

  console.log(results);
  // [{ name: 'Alice', age: 30 }, { name: 'Bob', age: 28 }]
});
</code></pre>
<h3 id="query-methods"><a class="header" href="#query-methods">Query Methods</a></h3>
<h4 id="querysparql-options---execute-any-sparql-query"><a class="header" href="#querysparql-options---execute-any-sparql-query"><code>query(sparql, options)</code> - Execute Any SPARQL Query</a></h4>
<pre><code class="language-javascript">const result = await graph.query(`
  SELECT ?s ?p ?o WHERE { ?s ?p ?o }
`, {
  limit: 100,
  signal: abortController.signal  // For cancellation
});
</code></pre>
<h4 id="selectsparql---execute-select-query"><a class="header" href="#selectsparql---execute-select-query"><code>select(sparql)</code> - Execute SELECT Query</a></h4>
<pre><code class="language-javascript">const rows = await graph.select(`
  PREFIX ex: &lt;http://example.org/&gt;

  SELECT ?name WHERE {
    ?person ex:name ?name .
  }
`);

// Returns: [{ name: 'Alice' }, { name: 'Bob' }]
</code></pre>
<h4 id="asksparql---execute-ask-query"><a class="header" href="#asksparql---execute-ask-query"><code>ask(sparql)</code> - Execute ASK Query</a></h4>
<pre><code class="language-javascript">const exists = await graph.ask(`
  PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;

  ASK {
    ?person foaf:name "Alice" .
  }
`);

console.log(exists);  // true or false
</code></pre>
<h4 id="constructsparql---execute-construct-query"><a class="header" href="#constructsparql---execute-construct-query"><code>construct(sparql)</code> - Execute CONSTRUCT Query</a></h4>
<pre><code class="language-javascript">const newStore = await graph.construct(`
  PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
  PREFIX ex: &lt;http://example.org/&gt;

  CONSTRUCT {
    ?person ex:hasName ?name .
  } WHERE {
    ?person foaf:name ?name .
  }
`);

console.log(newStore.size);  // Number of constructed triples
</code></pre>
<h4 id="updatesparql---execute-update-query"><a class="header" href="#updatesparql---execute-update-query"><code>update(sparql)</code> - Execute UPDATE Query</a></h4>
<pre><code class="language-javascript">await graph.update(`
  PREFIX ex: &lt;http://example.org/&gt;
  PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;

  INSERT DATA {
    ex:charlie foaf:name "Charlie" .
  }
`);
</code></pre>
<h3 id="graph-operations"><a class="header" href="#graph-operations">Graph Operations</a></h3>
<h4 id="uniongraphs---combine-graphs"><a class="header" href="#uniongraphs---combine-graphs"><code>union(...graphs)</code> - Combine Graphs</a></h4>
<pre><code class="language-javascript">const graph1 = useGraph();
const graph2 = useGraph();

// Union of graphs
const combined = graph1.union(graph2);
console.log(combined.size);
</code></pre>
<h4 id="intersectiongraph---find-common-quads"><a class="header" href="#intersectiongraph---find-common-quads"><code>intersection(graph)</code> - Find Common Quads</a></h4>
<pre><code class="language-javascript">const common = graph1.intersection(graph2);
console.log(`${common.size} shared quads`);
</code></pre>
<h4 id="differencegraph---find-unique-quads"><a class="header" href="#differencegraph---find-unique-quads"><code>difference(graph)</code> - Find Unique Quads</a></h4>
<pre><code class="language-javascript">const unique = graph1.difference(graph2);
console.log(`${unique.size} quads only in graph1`);
</code></pre>
<h3 id="validation"><a class="header" href="#validation">Validation</a></h3>
<h4 id="validateshapesinput---shacl-validation"><a class="header" href="#validateshapesinput---shacl-validation"><code>validate(shapesInput)</code> - SHACL Validation</a></h4>
<pre><code class="language-javascript">const shapes = await parseTurtle(`
  @prefix sh: &lt;http://www.w3.org/ns/shacl#&gt; .
  @prefix ex: &lt;http://example.org/&gt; .
  @prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt; .

  ex:PersonShape a sh:NodeShape ;
    sh:targetClass foaf:Person ;
    sh:property [
      sh:path foaf:name ;
      sh:minCount 1 ;
      sh:datatype xsd:string ;
    ] .
`);

const report = graph.validate(shapes);

if (!report.conforms) {
  console.log('Validation errors:', report.results);
}
</code></pre>
<h4 id="validateorthrowshapesinput---validate-or-throw"><a class="header" href="#validateorthrowshapesinput---validate-or-throw"><code>validateOrThrow(shapesInput)</code> - Validate or Throw</a></h4>
<pre><code class="language-javascript">try {
  graph.validateOrThrow(shapes);
  console.log('Valid!');
} catch (err) {
  console.error('Validation failed:', err.message);
}
</code></pre>
<h3 id="serialization--stats"><a class="header" href="#serialization--stats">Serialization &amp; Stats</a></h3>
<pre><code class="language-javascript">// Serialize to Turtle
const turtle = graph.serialize({
  format: 'Turtle',
  prefixes: {
    ex: 'http://example.org/',
    foaf: 'http://xmlns.com/foaf/0.1/'
  }
});

// Serialize to N-Quads
const nquads = graph.serialize({ format: 'N-Quads' });

// Get statistics
const stats = graph.stats();
console.log(stats);
// { quads: 100, subjects: 50, predicates: 10, objects: 80, graphs: 1 }

// Get size
console.log(graph.size);  // Number of quads
</code></pre>
<h2 id="useturtle---file-io-operations"><a class="header" href="#useturtle---file-io-operations"><code>useTurtle()</code> - File I/O Operations</a></h2>
<p>Manage Turtle files with automatic parsing and serialization.</p>
<p><strong>Source Reference</strong> (<code>src/composables/use-turtle.mjs</code>)</p>
<h3 id="basic-usage-1"><a class="header" href="#basic-usage-1">Basic Usage</a></h3>
<pre><code class="language-javascript">import { initStore, useTurtle } from 'unrdf';

const runApp = initStore();

runApp(() =&gt; {
  const turtle = useTurtle('./graph', {
    baseIRI: 'http://example.org/',
    autoLoad: true,
    validateOnLoad: true
  });

  // Load all .ttl files
  const { loaded, files } = turtle.loadAll();
  console.log(`Loaded ${loaded} files:`, files);

  // Save to file
  turtle.save('people', {
    prefixes: {
      ex: 'http://example.org/',
      foaf: 'http://xmlns.com/foaf/0.1/'
    },
    createBackup: true
  });
});
</code></pre>
<h3 id="file-operations"><a class="header" href="#file-operations">File Operations</a></h3>
<h4 id="loadalloptions---load-all-turtle-files"><a class="header" href="#loadalloptions---load-all-turtle-files"><code>loadAll(options)</code> - Load All Turtle Files</a></h4>
<pre><code class="language-javascript">const result = turtle.loadAll({
  merge: true,      // Merge with existing store
  validate: true    // Validate on load
});

console.log(`Loaded ${result.loaded} files`);
console.log('Files:', result.files);
</code></pre>
<h4 id="loadfilename-options---load-specific-file"><a class="header" href="#loadfilename-options---load-specific-file"><code>load(fileName, options)</code> - Load Specific File</a></h4>
<pre><code class="language-javascript">const store = turtle.load('people', {
  merge: true,
  validate: true
});
</code></pre>
<h4 id="savefilename-options---save-to-file"><a class="header" href="#savefilename-options---save-to-file"><code>save(fileName, options)</code> - Save to File</a></h4>
<pre><code class="language-javascript">turtle.save('output', {
  prefixes: {
    ex: 'http://example.org/',
    foaf: 'http://xmlns.com/foaf/0.1/'
  },
  createBackup: true
});
</code></pre>
<h4 id="savedefault--loaddefault---default-file"><a class="header" href="#savedefault--loaddefault---default-file"><code>saveDefault()</code> / <code>loadDefault()</code> - Default File</a></h4>
<pre><code class="language-javascript">// Save to default.ttl
turtle.saveDefault();

// Load from default.ttl
const store = turtle.loadDefault();
</code></pre>
<h3 id="parsing--serialization"><a class="header" href="#parsing--serialization">Parsing &amp; Serialization</a></h3>
<h4 id="parsettl-options---parse-turtle-string"><a class="header" href="#parsettl-options---parse-turtle-string"><code>parse(ttl, options)</code> - Parse Turtle String</a></h4>
<pre><code class="language-javascript">const store = turtle.parse(`
  @prefix ex: &lt;http://example.org/&gt; .
  @prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt; .

  ex:alice foaf:name "Alice" .
`, {
  addToStore: true  // Add parsed quads to context store
});
</code></pre>
<h4 id="serializeoptions---serialize-to-turtle"><a class="header" href="#serializeoptions---serialize-to-turtle"><code>serialize(options)</code> - Serialize to Turtle</a></h4>
<pre><code class="language-javascript">const turtleString = turtle.serialize({
  prefixes: {
    ex: 'http://example.org/',
    foaf: 'http://xmlns.com/foaf/0.1/'
  }
});

console.log(turtleString);
</code></pre>
<h3 id="utility-methods"><a class="header" href="#utility-methods">Utility Methods</a></h3>
<pre><code class="language-javascript">// List all .ttl files
const files = turtle.listFiles();
console.log('Turtle files:', files);

// Get statistics
const stats = turtle.stats();

// Clear store
turtle.clear();

// Access properties
console.log(turtle.graphDir);   // './graph'
console.log(turtle.engine);      // RdfEngine instance
console.log(turtle.store);       // StoreContext
</code></pre>
<h2 id="usedelta---graph-diff--patch"><a class="header" href="#usedelta---graph-diff--patch"><code>useDelta()</code> - Graph Diff &amp; Patch</a></h2>
<p>Track changes and apply patches to RDF graphs.</p>
<p><strong>Source Reference</strong> (<code>src/composables/use-delta.mjs</code>)</p>
<h3 id="basic-usage-2"><a class="header" href="#basic-usage-2">Basic Usage</a></h3>
<pre><code class="language-javascript">import { initStore, useDelta, useTurtle } from 'unrdf';

const runApp = initStore();

runApp(() =&gt; {
  const delta = useDelta({ deterministic: true });
  const turtle = useTurtle();

  // Original data
  turtle.parse(`
    @prefix ex: &lt;http://example.org/&gt; .
    ex:alice ex:age 30 .
  `, { addToStore: true });

  // New data
  const newData = turtle.parse(`
    @prefix ex: &lt;http://example.org/&gt; .
    ex:alice ex:age 31 .
    ex:bob ex:age 28 .
  `);

  // Compare
  const changes = delta.compareWith(newData);

  console.log(`Added: ${changes.addedCount} quads`);
  console.log(`Removed: ${changes.removedCount} quads`);
});
</code></pre>
<h3 id="comparison-methods"><a class="header" href="#comparison-methods">Comparison Methods</a></h3>
<h4 id="comparewithnewstore---compare-stores"><a class="header" href="#comparewithnewstore---compare-stores"><code>compareWith(newStore)</code> - Compare Stores</a></h4>
<pre><code class="language-javascript">const changes = delta.compareWith(newStore);

console.log(changes);
// {
//   added: Store,           // Quads to add
//   removed: Store,         // Quads to remove
//   addedCount: 2,
//   removedCount: 1,
//   unchangedCount: 5,
//   contextSize: 6,
//   newDataSize: 7
// }
</code></pre>
<h4 id="syncwithnewstore-options---sync-stores"><a class="header" href="#syncwithnewstore-options---sync-stores"><code>syncWith(newStore, options)</code> - Sync Stores</a></h4>
<pre><code class="language-javascript">const result = delta.syncWith(newStore, {
  dryRun: false  // Set true to preview without applying
});

console.log(`Synced: +${result.added} -${result.removed}`);
</code></pre>
<h3 id="applying-changes"><a class="header" href="#applying-changes">Applying Changes</a></h3>
<h4 id="applychanges-options---apply-changes"><a class="header" href="#applychanges-options---apply-changes"><code>apply(changes, options)</code> - Apply Changes</a></h4>
<pre><code class="language-javascript">const result = delta.apply(changes, {
  dryRun: false
});

console.log(result);
// {
//   success: true,
//   added: 2,
//   removed: 1,
//   originalSize: 6,
//   finalSize: 7,
//   dryRun: false
// }
</code></pre>
<h3 id="change-analysis"><a class="header" href="#change-analysis">Change Analysis</a></h3>
<h4 id="getstatschanges---get-change-statistics"><a class="header" href="#getstatschanges---get-change-statistics"><code>getStats(changes)</code> - Get Change Statistics</a></h4>
<pre><code class="language-javascript">const stats = delta.getStats(changes);

console.log(stats);
// {
//   added: { quads: 2, subjects: 1, predicates: 1, objects: 2 },
//   removed: { quads: 1, subjects: 1, predicates: 1, objects: 1 },
//   total: { quads: 3, netChange: 1 },
//   coverage: {
//     addedSubjects: ['http://example.org/bob'],
//     removedSubjects: [],
//     addedPredicates: ['http://example.org/age'],
//     removedPredicates: []
//   }
// }
</code></pre>
<h4 id="isemptychanges---check-if-empty"><a class="header" href="#isemptychanges---check-if-empty"><code>isEmpty(changes)</code> - Check if Empty</a></h4>
<pre><code class="language-javascript">if (delta.isEmpty(changes)) {
  console.log('No changes detected');
}
</code></pre>
<h3 id="patch-operations"><a class="header" href="#patch-operations">Patch Operations</a></h3>
<h4 id="createpatchchanges-options---create-patch"><a class="header" href="#createpatchchanges-options---create-patch"><code>createPatch(changes, options)</code> - Create Patch</a></h4>
<pre><code class="language-javascript">const patch = delta.createPatch(changes, {
  format: 'Turtle'  // or 'N-Quads'
});

console.log(patch);
// {
//   added: '...',       // Turtle/N-Quads string
//   removed: '...',     // Turtle/N-Quads string
//   addedCount: 2,
//   removedCount: 1,
//   format: 'Turtle',
//   stats: { ... }
// }
</code></pre>
<h4 id="applypatchpatch-options---apply-patch"><a class="header" href="#applypatchpatch-options---apply-patch"><code>applyPatch(patch, options)</code> - Apply Patch</a></h4>
<pre><code class="language-javascript">const result = delta.applyPatch(patch, {
  dryRun: false
});
</code></pre>
<h3 id="advanced-operations"><a class="header" href="#advanced-operations">Advanced Operations</a></h3>
<h4 id="mergechangesets---merge-changes"><a class="header" href="#mergechangesets---merge-changes"><code>merge(...changeSets)</code> - Merge Changes</a></h4>
<pre><code class="language-javascript">const merged = delta.merge(changes1, changes2, changes3);

console.log(`Total changes: ${merged.added.size + merged.removed.size}`);
</code></pre>
<h4 id="invertchanges---invert-changes"><a class="header" href="#invertchanges---invert-changes"><code>invert(changes)</code> - Invert Changes</a></h4>
<pre><code class="language-javascript">const inverted = delta.invert(changes);

// Apply and rollback
delta.apply(changes);       // Apply changes
delta.apply(inverted);      // Rollback
</code></pre>
<h2 id="useterms---term-creation-helpers"><a class="header" href="#useterms---term-creation-helpers"><code>useTerms()</code> - Term Creation Helpers</a></h2>
<p>Simplified term creation with namespace support.</p>
<pre><code class="language-javascript">import { initStore, useTerms } from 'unrdf';

const runApp = initStore();

runApp(() =&gt; {
  const terms = useTerms();

  // Create terms
  const person = terms.iri('http://example.org/alice');
  const name = terms.lit('Alice');
  const age = terms.lit('30', 'http://www.w3.org/2001/XMLSchema#integer');
  const blank = terms.blank('b1');

  // Create quad
  const quad = terms.quad(person,
    terms.iri('http://xmlns.com/foaf/0.1/name'),
    name
  );
});
</code></pre>
<h2 id="usereasoner---owl-reasoning"><a class="header" href="#usereasoner---owl-reasoning"><code>useReasoner()</code> - OWL Reasoning</a></h2>
<p>Perform inference and reasoning over RDF graphs.</p>
<pre><code class="language-javascript">import { initStore, useReasoner, useTurtle } from 'unrdf';

const runApp = initStore();

runApp(async () =&gt; {
  const reasoner = useReasoner();
  const turtle = useTurtle();

  // Load ontology
  turtle.parse(`
    @prefix ex: &lt;http://example.org/&gt; .
    @prefix owl: &lt;http://www.w3.org/2002/07/owl#&gt; .
    @prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .

    ex:Student rdfs:subClassOf ex:Person .
    ex:alice a ex:Student .
  `, { addToStore: true });

  // Perform reasoning
  const inferred = await reasoner.reason();

  console.log(`Inferred ${inferred.size} new triples`);
  // ex:alice a ex:Person (inferred from subclass)
});
</code></pre>
<h2 id="usecanon---canonicalization"><a class="header" href="#usecanon---canonicalization"><code>useCanon()</code> - Canonicalization</a></h2>
<p>Canonicalize graphs using URDNA2015 algorithm.</p>
<pre><code class="language-javascript">import { initStore, useCanon } from 'unrdf';

const runApp = initStore();

runApp(async () =&gt; {
  const canon = useCanon();

  // Canonicalize current store
  const canonical = await canon.canonicalize();

  console.log(canonical);  // Canonical N-Quads

  // Generate hash
  const hash = await canon.hash();
  console.log(`Graph hash: ${hash}`);

  // Check isomorphism
  const isIso = await canon.isIsomorphic(otherStore);
  console.log(`Isomorphic: ${isIso}`);
});
</code></pre>
<h2 id="usezod---type-safety-integration"><a class="header" href="#usezod---type-safety-integration"><code>useZod()</code> - Type Safety Integration</a></h2>
<p>Bridge RDF and Zod schemas for runtime validation.</p>
<pre><code class="language-javascript">import { z } from 'zod';
import { initStore, useZod } from 'unrdf';

const runApp = initStore();

runApp(() =&gt; {
  const zodHelper = useZod();

  // Define schema
  const PersonSchema = z.object({
    id: z.string().url(),
    name: z.string().min(1),
    age: z.number().int().min(0).max(150).optional(),
    email: z.string().email().optional()
  });

  // Convert object to RDF
  const person = {
    id: 'http://example.org/alice',
    name: 'Alice Smith',
    age: 30,
    email: 'alice@example.org'
  };

  const quads = zodHelper.toRdf(person, PersonSchema);

  // Convert RDF back to object
  const reconstructed = zodHelper.fromRdf(quads, PersonSchema);

  console.log(reconstructed);
  // { id: '...', name: 'Alice Smith', age: 30, email: '...' }
});
</code></pre>
<h2 id="composable-composition"><a class="header" href="#composable-composition">Composable Composition</a></h2>
<p>The power of composables comes from <strong>combining them</strong>:</p>
<h3 id="example-complete-etl-pipeline"><a class="header" href="#example-complete-etl-pipeline">Example: Complete ETL Pipeline</a></h3>
<pre><code class="language-javascript">import {
  initStore,
  useTurtle,
  useGraph,
  useDelta,
  useCanon
} from 'unrdf';

const runApp = initStore();

runApp(async () =&gt; {
  const turtle = useTurtle('./data');
  const graph = useGraph();
  const delta = useDelta();
  const canon = useCanon();

  // 1. Load data
  turtle.loadAll();

  // 2. Query and validate
  const people = await graph.select(`
    PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
    SELECT ?name WHERE {
      ?person foaf:name ?name .
    }
  `);

  // 3. Transform
  const transformed = await graph.construct(`
    PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
    PREFIX ex: &lt;http://example.org/&gt;
    CONSTRUCT {
      ?person ex:fullName ?name .
    } WHERE {
      ?person foaf:name ?name .
    }
  `);

  // 4. Track changes
  const changes = delta.compareWith(transformed);
  console.log(`Changes: +${changes.addedCount} -${changes.removedCount}`);

  // 5. Generate hash
  const hash = await canon.hash();
  console.log(`Data hash: ${hash}`);

  // 6. Save result
  turtle.save('output');
});
</code></pre>
<h3 id="example-data-validation-pipeline"><a class="header" href="#example-data-validation-pipeline">Example: Data Validation Pipeline</a></h3>
<pre><code class="language-javascript">runApp(async () =&gt; {
  const turtle = useTurtle('./data');
  const graph = useGraph();

  // Load data
  turtle.load('people');

  // Load SHACL shapes
  const shapes = await turtle.parse(`
    @prefix sh: &lt;http://www.w3.org/ns/shacl#&gt; .
    # ... shapes ...
  `);

  // Validate
  const report = graph.validate(shapes);

  if (!report.conforms) {
    console.error('Validation failed');
    for (const result of report.results) {
      console.log(`- ${result.message}`);
    }
    return;
  }

  console.log('✓ Data is valid');

  // Process valid data
  // ...
});
</code></pre>
<h2 id="best-practices"><a class="header" href="#best-practices">Best Practices</a></h2>
<h3 id="1-choose-the-right-composable"><a class="header" href="#1-choose-the-right-composable">1. Choose the Right Composable</a></h3>
<pre><code class="language-javascript">// ✅ Good: Use specific composables
const graph = useGraph();        // For queries
const turtle = useTurtle();      // For file I/O
const delta = useDelta();        // For diffs

// ❌ Avoid: Using wrong composable
const ctx = useStoreContext();
// Don't manually implement what composables provide
</code></pre>
<h3 id="2-combine-composables"><a class="header" href="#2-combine-composables">2. Combine Composables</a></h3>
<pre><code class="language-javascript">// ✅ Good: Combine multiple composables
runApp(() =&gt; {
  const turtle = useTurtle('./data');
  const graph = useGraph();
  const delta = useDelta();

  turtle.loadAll();
  const results = await graph.select('...');
  const changes = delta.compareWith(newData);
});

// ❌ Avoid: Reinventing functionality
runApp(() =&gt; {
  const ctx = useStoreContext();
  // Manually implementing query logic
});
</code></pre>
<h3 id="3-use-inside-context"><a class="header" href="#3-use-inside-context">3. Use Inside Context</a></h3>
<pre><code class="language-javascript">// ✅ Good: Composables inside runApp()
const runApp = initStore();
runApp(() =&gt; {
  const graph = useGraph();
  // Use composable
});

// ❌ Avoid: Outside context
const graph = useGraph();  // Error!
</code></pre>
<h3 id="4-leverage-asyncawait"><a class="header" href="#4-leverage-asyncawait">4. Leverage Async/Await</a></h3>
<pre><code class="language-javascript">// ✅ Good: Use async/await
runApp(async () =&gt; {
  const results = await graph.select('...');
  const canonical = await canon.canonicalize();
});

// ❌ Avoid: Mixing callbacks
runApp(() =&gt; {
  graph.select('...').then(results =&gt; {
    // Harder to read
  });
});
</code></pre>
<h2 id="creating-custom-composables"><a class="header" href="#creating-custom-composables">Creating Custom Composables</a></h2>
<p>You can create your own composables following the pattern:</p>
<pre><code class="language-javascript">import { useStoreContext } from 'unrdf';

export function useMyCustomComposable(options = {}) {
  // Access store context
  const ctx = useStoreContext();

  return {
    // Your custom methods
    doSomething() {
      // Use ctx.store, ctx.add, etc.
    },

    doSomethingElse() {
      // ...
    }
  };
}

// Usage
const runApp = initStore();
runApp(() =&gt; {
  const custom = useMyCustomComposable({ option: 'value' });
  custom.doSomething();
});
</code></pre>
<h2 id="summary"><a class="header" href="#summary">Summary</a></h2>
<ul>
<li><strong>Composables</strong> are reusable functions for RDF operations</li>
<li><strong><code>useGraph()</code></strong> - SPARQL queries and graph operations</li>
<li><strong><code>useTurtle()</code></strong> - File I/O with Turtle format</li>
<li><strong><code>useDelta()</code></strong> - Graph diffs and patches</li>
<li><strong><code>useTerms()</code></strong> - Term creation helpers</li>
<li><strong><code>useReasoner()</code></strong> - OWL reasoning and inference</li>
<li><strong><code>useCanon()</code></strong> - Canonicalization and hashing</li>
<li><strong><code>useZod()</code></strong> - Type safety with Zod schemas</li>
<li><strong>Composition</strong> - Combine composables for complex workflows</li>
<li><strong>Context-Aware</strong> - All composables share the same store</li>
</ul>
<p>Each composable is focused, composable, and type-safe, making UNRDF development clean and maintainable.</p>
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<ul>
<li><strong><a href="./transactions.html">Transactions</a></strong> - Learn about atomic operations</li>
<li><strong><a href="./store-context.html">Store Context</a></strong> - Review context management</li>
<li><strong><a href="./rdf-fundamentals.html">RDF Fundamentals</a></strong> - RDF basics</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../concepts/rdf-fundamentals.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../concepts/store-context.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../concepts/rdf-fundamentals.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../concepts/store-context.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>


        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../editor.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
