/**
 * @file UNRDF Generated Types
 * @module @unrdf/types
 * @description Auto-generated TypeScript interfaces from RDF ontology
 *
 * This file is auto-generated by ggen from schema/domain.ttl
 * Do not edit manually. Run 'ggen sync' to regenerate.
 */

// Package entity
/**
 * Package
 * @description A software package in the UNRDF monorepo
 */
export class Package {
  /** The name of the package */
  packageName;

  /** The semantic version of the package */
  packageVersion;

  /** Description of the package's purpose and features */
  packageDescription;

  /** The package's tier classification */
  hasTier;

  /** Package dependency relationship */
  hasDependency;
}

// Tier entity
/**
 * Tier
 * @description Classification tier for packages (Essential, Extended, Optional)
 */
export class Tier {
  /** Name of the tier (Essential, Extended, Optional, Internal) */
  tierName;

  /** Packages in this tier */
  packages = [];
}

// Module entity
/**
 * Module
 * @description A JavaScript ESM module (.mjs file)
 */
export class Module {
  /** The name of the module file */
  moduleName;

  /** Comma-separated list of exported symbols */
  moduleExports;
}

// KnowledgeGraph entity
/**
 * KnowledgeGraph
 * @description An RDF knowledge graph instance
 */
export class KnowledgeGraph {
  /** Number of RDF triples in the graph */
  graphTripleCount;
}

// Hook entity
/**
 * Hook
 * @description A policy hook for event-driven execution
 */
export class Hook {
  /** Hook identifier */
  hookId;

  /** Hook name */
  hookName;

  /** Hook trigger conditions */
  hookTrigger;

  /** Hook action */
  hookAction;
}

// Receipt entity
/**
 * Receipt
 * @description Cryptographic receipt for transaction verification
 */
export class Receipt {
  /** Cryptographic hash of the receipt */
  receiptHash;

  /** Receipt timestamp */
  receiptTimestamp;

  /** Merkle path */
  merklePath;
}

// Delta entity
/**
 * Delta
 * @description A change delta in the knowledge graph
 */
export class Delta {
  /** When the delta was created */
  deltaTimestamp;

  /** Triples added */
  addedTriples;

  /** Triples removed */
  removedTriples;

  /** Delta hash */
  deltaHash;
}

// Zod Schemas for Runtime Validation
import { z } from 'zod';

export const PackageSchema = z.object({
  packageName: z.string(),
  packageVersion: z.string(),
  packageDescription: z.string(),
  hasTier: z.string(),
  hasDependency: z.array(z.string()).optional(),
}).strict();

export const TierSchema = z.object({
  tierName: z.enum(['Essential', 'Extended', 'Optional', 'Internal']),
  packages: z.array(z.string()).optional(),
}).strict();

export const ModuleSchema = z.object({
  moduleName: z.string(),
  moduleExports: z.string(),
}).strict();

export const KnowledgeGraphSchema = z.object({
  graphTripleCount: z.number().int(),
}).strict();

export const HookSchema = z.object({
  hookId: z.string(),
  hookName: z.string(),
  hookTrigger: z.string(),
  hookAction: z.string(),
}).strict();

export const ReceiptSchema = z.object({
  receiptHash: z.string(),
  receiptTimestamp: z.string().datetime(),
  merklePath: z.array(z.string()).optional(),
}).strict();

export const DeltaSchema = z.object({
  deltaTimestamp: z.string().datetime(),
  addedTriples: z.array(z.object({ subject: z.string(), predicate: z.string(), object: z.string() })),
  removedTriples: z.array(z.object({ subject: z.string(), predicate: z.string(), object: z.string() })),
  deltaHash: z.string(),
}).strict();

// Export type definitions
export const UNRDF_TYPES = {
  Package: PackageSchema,
  Tier: TierSchema,
  Module: ModuleSchema,
  KnowledgeGraph: KnowledgeGraphSchema,
  Hook: HookSchema,
  Receipt: ReceiptSchema,
  Delta: DeltaSchema,
};

/**
 * Type guard for Package
 */
export function isPackage(obj) {
  return PackageSchema.safeParse(obj).success;
}

/**
 * Type guard for Tier
 */
export function isTier(obj) {
  return TierSchema.safeParse(obj).success;
}

/**
 * Validate any UNRDF type
 */
export function validateType(typeName, data) {
  const schema = UNRDF_TYPES[typeName];
  if (!schema) {
    throw new Error(`Unknown type: ${typeName}`);
  }
  return schema.parse(data);
}
