module.exports=[96893,61311,7951,90341,11348,a=>{"use strict";var b,c;let d="4.1.0";function e(a){if("undefined"!=typeof process&&process.versions?.electron)return!0;let b="undefined"!=typeof navigator&&navigator.userAgent,c=a||b;return!!(c&&c.indexOf("Electron")>=0)}function f(){return"object"!=typeof process||"[object process]"!==String(process)||e()}a.s(["isElectron",()=>e],61311),a.s(["isBrowser",()=>f],7951);class g{constructor(a,b,c="sessionStorage"){this.storage=function(a){try{let b=window[a],c="__storage_test__";return b.setItem(c,c),b.removeItem(c),b}catch(a){return null}}(c),this.id=a,this.config=b,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(a){if(Object.assign(this.config,a),this.storage){let a=JSON.stringify(this.config);this.storage.setItem(this.id,a)}}_loadConfiguration(){let a={};if(this.storage){let b=this.storage.getItem(this.id);a=b?JSON.parse(b):{}}return Object.assign(this.config,a),this}}function h(a){return"string"!=typeof a?a:b[a=a.toUpperCase()]||b.WHITE}function i(a,b){if(!a)throw Error(b||"Assertion failed")}(c=b||(b={}))[c.BLACK=30]="BLACK",c[c.RED=31]="RED",c[c.GREEN=32]="GREEN",c[c.YELLOW=33]="YELLOW",c[c.BLUE=34]="BLUE",c[c.MAGENTA=35]="MAGENTA",c[c.CYAN=36]="CYAN",c[c.WHITE=37]="WHITE",c[c.BRIGHT_BLACK=90]="BRIGHT_BLACK",c[c.BRIGHT_RED=91]="BRIGHT_RED",c[c.BRIGHT_GREEN=92]="BRIGHT_GREEN",c[c.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",c[c.BRIGHT_BLUE=94]="BRIGHT_BLUE",c[c.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",c[c.BRIGHT_CYAN=96]="BRIGHT_CYAN",c[c.BRIGHT_WHITE=97]="BRIGHT_WHITE";let j=globalThis,k=globalThis.process||{},l=globalThis.navigator||{};function m(){let a;if(f()&&j.performance)a=j?.performance?.now?.();else if("hrtime"in k){let b=k?.hrtime?.();a=1e3*b[0]+b[1]/1e6}else a=Date.now();return a}a.s(["navigator",()=>l,"process",()=>k,"window",()=>j],90341);let n={debug:f()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},o={enabled:!0,level:0};function p(){}let q={},r={once:!0};class s{constructor({id:a}={id:""}){this.VERSION=d,this._startTs=m(),this._deltaTs=m(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=a,this.userData={},this._storage=new g(`__probe-${this.id}__`,o),this.timeStamp(`${this.id} started`),function(a,b=["constructor"]){for(let c of Object.getOwnPropertyNames(Object.getPrototypeOf(a))){let d=a[c];"function"!=typeof d||b.find(a=>c===a)||(a[c]=d.bind(a))}}(this),Object.seal(this)}set level(a){this.setLevel(a)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((m()-this._startTs).toPrecision(10))}getDelta(){return Number((m()-this._deltaTs).toPrecision(10))}set priority(a){this.level=a}get priority(){return this.level}getPriority(){return this.level}enable(a=!0){return this._storage.setConfiguration({enabled:a}),this}setLevel(a){return this._storage.setConfiguration({level:a}),this}get(a){return this._storage.config[a]}set(a,b){this._storage.setConfiguration({[a]:b})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(a,b){if(!a)throw Error(b||"Assertion failed")}warn(a){return this._getLogFunction(0,a,n.warn,arguments,r)}error(a){return this._getLogFunction(0,a,n.error,arguments)}deprecated(a,b){return this.warn(`\`${a}\` is deprecated and will be removed \
in a later version. Use \`${b}\` instead`)}removed(a,b){return this.error(`\`${a}\` has been removed. Use \`${b}\` instead`)}probe(a,b){return this._getLogFunction(a,b,n.log,arguments,{time:!0,once:!0})}log(a,b){return this._getLogFunction(a,b,n.debug,arguments)}info(a,b){return this._getLogFunction(a,b,console.info,arguments)}once(a,b){return this._getLogFunction(a,b,n.debug||n.info,arguments,r)}table(a,b,c){return b?this._getLogFunction(a,b,console.table||p,c&&[c],{tag:function(a){for(let b in a)for(let c in a[b])return c||"untitled";return"empty"}(b)}):p}time(a,b){return this._getLogFunction(a,b,console.time?console.time:console.info)}timeEnd(a,b){return this._getLogFunction(a,b,console.timeEnd?console.timeEnd:console.info)}timeStamp(a,b){return this._getLogFunction(a,b,console.timeStamp||p)}group(a,b,c={collapsed:!1}){let d=u({logLevel:a,message:b,opts:c}),{collapsed:e}=c;return d.method=(e?console.groupCollapsed:console.group)||console.info,this._getLogFunction(d)}groupCollapsed(a,b,c={}){return this.group(a,b,Object.assign({},c,{collapsed:!0}))}groupEnd(a){return this._getLogFunction(a,"",console.groupEnd||p)}withGroup(a,b,c){this.group(a,b)();try{c()}finally{this.groupEnd(a)()}}trace(){console.trace&&console.trace()}_shouldLog(a){return this.isEnabled()&&this.getLevel()>=t(a)}_getLogFunction(a,b,c,d,e){if(this._shouldLog(a)){e=u({logLevel:a,message:b,args:d,opts:e}),i(c=c||e.method),e.total=this.getTotal(),e.delta=this.getDelta(),this._deltaTs=m();let g=e.tag||e.message;if(e.once&&g)if(q[g])return p;else q[g]=m();return b=function(a,b,c){if("string"==typeof b){var d;let e=c.time?function(a,b=8){let c=Math.max(b-a.length,0);return`${" ".repeat(c)}${a}`}((d=c.total)<10?`${d.toFixed(2)}ms`:d<100?`${d.toFixed(1)}ms`:d<1e3?`${d.toFixed(0)}ms`:`${(d/1e3).toFixed(2)}s`):"";b=function(a,b,c){if(!f&&"string"==typeof a){if(b){let c=h(b);a=`\u001b[${c}m${a}\u001b[39m`}if(c){let b=h(c);a=`\u001b[${b+10}m${a}\u001b[49m`}}return a}(b=c.time?`${a}: ${e}  ${b}`:`${a}: ${b}`,c.color,c.background)}return b}(this.id,e.message,e),c.bind(console,b,...e.args)}return p}}function t(a){let b;if(!a)return 0;switch(typeof a){case"number":b=a;break;case"object":b=a.logLevel||a.priority||0;break;default:return 0}return i(Number.isFinite(b)&&b>=0),b}function u(a){let{logLevel:b,message:c}=a;a.logLevel=t(b);let d=a.args?Array.from(a.args):[];for(;d.length&&d.shift()!==c;);switch(typeof b){case"string":case"function":void 0!==c&&d.unshift(c),a.message=b;break;case"object":Object.assign(a,b)}"function"==typeof a.message&&(a.message=a.message());let e=typeof a.message;return i("string"===e||"object"===e),Object.assign(a,{args:d},a.opts)}s.VERSION=d,a.s(["Log",()=>s],11348);let v=new s({id:"luma.gl"});a.s(["log",0,v],96893)},69604,56786,5324,a=>{"use strict";function b(){let a;if("undefined"!=typeof process&&process.hrtime){let b=process.hrtime();a=1e3*b[0]+b[1]/1e6}else a=Date.now();return a}class c{constructor(a,b){this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=a,this.type=b,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(a){return this.sampleSize=a,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(a){return this._count+=a,this._samples++,this._checkSampling(),this}subtractCount(a){return this._count-=a,this._samples++,this._checkSampling(),this}addTime(a){return this._time+=a,this.lastTiming=a,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=b(),this._timerPending=!0,this}timeEnd(){return this._timerPending&&(this.addTime(b()-this._startTime),this._timerPending=!1,this._checkSampling()),this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class d{constructor(a){this.stats={},this.id=a.id,this.stats={},this._initializeStats(a.stats),Object.seal(this)}get(a,b="count"){return this._getOrCreate({name:a,type:b})}get size(){return Object.keys(this.stats).length}reset(){for(let a of Object.values(this.stats))a.reset();return this}forEach(a){for(let b of Object.values(this.stats))a(b)}getTable(){let a={};return this.forEach(b=>{a[b.name]={time:b.time||0,count:b.count||0,average:b.getAverageTime()||0,hz:b.getHz()||0}}),a}_initializeStats(a=[]){a.forEach(a=>this._getOrCreate(a))}_getOrCreate(a){let{name:b,type:d}=a,e=this.stats[b];return e||(e=a instanceof c?a:new c(b,d),this.stats[b]=e),e}}a.s([],56786),a.s(["Stats",()=>d],5324);class e{stats=new Map;getStats(a){return this.get(a)}get(a){return this.stats.has(a)||this.stats.set(a,new d({id:a})),this.stats.get(a)}}let f=new e;a.s(["lumaStats",0,f],69604)},34161,53245,74968,3327,10052,64356,43211,a=>{"use strict";var b=a.i(69604),c=a.i(96893);let d={};function e(a="id"){d[a]=d[a]||1;let b=d[a]++;return`${a}-${b}`}a.s(["uid",()=>e],53245);class f{static defaultProps={id:"undefined",handle:void 0,userData:void 0};toString(){return`${this[Symbol.toStringTag]||this.constructor.name}:"${this.id}"`}id;props;userData={};_device;destroyed=!1;allocatedBytes=0;_attachedResources=new Set;constructor(a,b,c){if(!a)throw Error("no device");this._device=a,this.props=function(a,b){let c={...b};for(let b in a)void 0!==a[b]&&(c[b]=a[b]);return c}(b,c);const d="undefined"!==this.props.id?this.props.id:e(this[Symbol.toStringTag]);this.props.id=d,this.id=d,this.userData=this.props.userData||{},this.addStats()}destroy(){this.destroyResource()}delete(){return this.destroy(),this}getProps(){return this.props}attachResource(a){this._attachedResources.add(a)}detachResource(a){this._attachedResources.delete(a)}destroyAttachedResource(a){this._attachedResources.delete(a)&&a.destroy()}destroyAttachedResources(){for(let a of Object.values(this._attachedResources))a.destroy();this._attachedResources=new Set}destroyResource(){this.destroyAttachedResources(),this.removeStats(),this.destroyed=!0}removeStats(){let a=this._device.statsManager.getStats("Resource Counts"),b=this[Symbol.toStringTag];a.get(`${b}s Active`).decrementCount()}trackAllocatedMemory(a,b=this[Symbol.toStringTag]){let c=this._device.statsManager.getStats("Resource Counts");c.get("GPU Memory").addCount(a),c.get(`${b} Memory`).addCount(a),this.allocatedBytes=a}trackDeallocatedMemory(a=this[Symbol.toStringTag]){let b=this._device.statsManager.getStats("Resource Counts");b.get("GPU Memory").subtractCount(this.allocatedBytes),b.get(`${a} Memory`).subtractCount(this.allocatedBytes),this.allocatedBytes=0}addStats(){let a=this._device.statsManager.getStats("Resource Counts"),b=this[Symbol.toStringTag];a.get("Resources Created").incrementCount(),a.get(`${b}s Created`).incrementCount(),a.get(`${b}s Active`).incrementCount()}}a.s(["Resource",()=>f],74968);class g extends f{static INDEX=16;static VERTEX=32;static UNIFORM=64;static STORAGE=128;static INDIRECT=256;static QUERY_RESOLVE=512;static MAP_READ=1;static MAP_WRITE=2;static COPY_SRC=4;static COPY_DST=8;get[Symbol.toStringTag](){return"Buffer"}usage;indexType;updateTimestamp;constructor(a,b){const c={...b};(b.usage||0)&g.INDEX&&!b.indexType&&(b.data instanceof Uint32Array?c.indexType="uint32":b.data instanceof Uint16Array&&(c.indexType="uint16")),delete c.data,super(a,c,g.defaultProps),this.usage=c.usage||0,this.indexType=c.indexType,this.updateTimestamp=a.incrementTimestamp()}clone(a){return this.device.createBuffer({...this.props,...a})}static DEBUG_DATA_MAX_LENGTH=32;debugData=new ArrayBuffer(0);_setDebugData(a,b,c){let d=ArrayBuffer.isView(a)?a.buffer:a,e=Math.min(a?a.byteLength:c,g.DEBUG_DATA_MAX_LENGTH);null===d?this.debugData=new ArrayBuffer(e):0===b&&c===d.byteLength?this.debugData=d.slice(0,e):this.debugData=d.slice(b,b+e)}static defaultProps={...f.defaultProps,usage:0,byteLength:0,byteOffset:0,data:null,indexType:"uint16",onMapped:void 0}}function h(a){let[b,c,d]=m[a],e=a.includes("norm"),f=!e&&!a.startsWith("float");return{signedType:b,primitiveType:c,byteLength:d,normalized:e,integer:f,signed:a.startsWith("s")}}function i(a){switch(a){case"uint8":return"unorm8";case"sint8":return"snorm8";case"uint16":return"unorm16";case"sint16":return"snorm16";default:return a}}function j(a,b){switch(b){case 1:return a;case 2:return a+a%2;default:return a+(4-a%4)%4}}function k(a){let b=ArrayBuffer.isView(a)?a.constructor:a;if(b===Uint8ClampedArray)return"uint8";let c=Object.values(m).find(a=>b===a[4]);if(!c)throw Error(b.name);return c[0]}function l(a){let[,,,,b]=m[a];return b}a.s(["Buffer",()=>g],3327);let m={uint8:["uint8","u32",1,!1,Uint8Array],sint8:["sint8","i32",1,!1,Int8Array],unorm8:["uint8","f32",1,!0,Uint8Array],snorm8:["sint8","f32",1,!0,Int8Array],uint16:["uint16","u32",2,!1,Uint16Array],sint16:["sint16","i32",2,!1,Int16Array],unorm16:["uint16","u32",2,!0,Uint16Array],snorm16:["sint16","i32",2,!0,Int16Array],float16:["float16","f16",2,!1,Uint16Array],float32:["float32","f32",4,!1,Float32Array],uint32:["uint32","u32",4,!1,Uint32Array],sint32:["sint32","i32",4,!1,Int32Array]};function n(a){let b;a.endsWith("-webgl")&&(a.replace("-webgl",""),b=!0);let[c,d]=a.split("x"),e=d?parseInt(d):1,f=h(c),g={type:c,components:e,byteLength:f.byteLength*e,integer:f.integer,signed:f.signed,normalized:f.normalized};return b&&(g.webglOnly=!0),g}function o(a,b,c){if(!b||b>4)throw Error(`size ${b}`);var d=k(a);let e=c?i(d):d;switch(e){case"unorm8":if(1===b)return"unorm8";if(3===b)return"unorm8x3-webgl";return`${e}x${b}`;case"snorm8":case"uint8":case"sint8":case"uint16":case"sint16":case"unorm16":case"snorm16":case"float16":if(1===b||3===b)throw Error(`size: ${b}`);return`${e}x${b}`;default:return 1===b?e:`${e}x${b}`}}function p(a){let b;switch(a.primitiveType){case"f32":b="float32";break;case"i32":b="sint32";break;case"u32":b="uint32";break;case"f16":return a.components<=2?"float16x2":"float16x4"}return 1===a.components?b:`${b}x${a.components}`}a.s(["alignTo",()=>j,"getDataType",()=>k,"getDataTypeInfo",()=>h,"getNormalizedDataType",()=>i,"getTypedArrayConstructor",()=>l],10052),a.s(["getCompatibleVertexFormat",()=>p,"getVertexFormatFromAttribute",()=>o,"getVertexFormatInfo",()=>n],64356);let q="texture-compression-bc",r="texture-compression-astc",s="texture-compression-etc2",t="texture-compression-pvrtc-webgl",u="texture-compression-atc-webgl",v="float32-renderable-webgl",w="float16-renderable-webgl",x="snorm8-renderable-webgl",y="norm16-renderable-webgl",z="snorm16-renderable-webgl",A="float32-filterable",B="float16-filterable-webgl";function C(a){let b=D[a];if(!b)throw Error(`Unsupported texture format ${a}`);return b}let D={r8unorm:{},rg8unorm:{},"rgb8unorm-webgl":{},rgba8unorm:{},"rgba8unorm-srgb":{},r8snorm:{render:x},rg8snorm:{render:x},"rgb8snorm-webgl":{},rgba8snorm:{render:x},r8uint:{},rg8uint:{},rgba8uint:{},r8sint:{},rg8sint:{},rgba8sint:{},bgra8unorm:{},"bgra8unorm-srgb":{},r16unorm:{f:y},rg16unorm:{render:y},"rgb16unorm-webgl":{f:y},rgba16unorm:{render:y},r16snorm:{f:z},rg16snorm:{render:z},"rgb16snorm-webgl":{f:y},rgba16snorm:{render:z},r16uint:{},rg16uint:{},rgba16uint:{},r16sint:{},rg16sint:{},rgba16sint:{},r16float:{render:w,filter:"float16-filterable-webgl"},rg16float:{render:w,filter:B},rgba16float:{render:w,filter:B},r32uint:{},rg32uint:{},rgba32uint:{},r32sint:{},rg32sint:{},rgba32sint:{},r32float:{render:v,filter:A},rg32float:{render:!1,filter:A},"rgb32float-webgl":{render:v,filter:A},rgba32float:{render:v,filter:A},"rgba4unorm-webgl":{channels:"rgba",bitsPerChannel:[4,4,4,4],packed:!0},"rgb565unorm-webgl":{channels:"rgb",bitsPerChannel:[5,6,5,0],packed:!0},"rgb5a1unorm-webgl":{channels:"rgba",bitsPerChannel:[5,5,5,1],packed:!0},rgb9e5ufloat:{channels:"rgb",packed:!0,render:"rgb9e5ufloat-renderable-webgl"},rg11b10ufloat:{channels:"rgb",bitsPerChannel:[11,11,10,0],packed:!0,p:1,render:v},rgb10a2unorm:{channels:"rgba",bitsPerChannel:[10,10,10,2],packed:!0,p:1},rgb10a2uint:{channels:"rgba",bitsPerChannel:[10,10,10,2],packed:!0,p:1},stencil8:{attachment:"stencil",bitsPerChannel:[8,0,0,0],dataType:"uint8"},depth16unorm:{attachment:"depth",bitsPerChannel:[16,0,0,0],dataType:"uint16"},depth24plus:{attachment:"depth",bitsPerChannel:[24,0,0,0],dataType:"uint32"},depth32float:{attachment:"depth",bitsPerChannel:[32,0,0,0],dataType:"float32"},"depth24plus-stencil8":{attachment:"depth-stencil",bitsPerChannel:[24,8,0,0],packed:!0},"depth32float-stencil8":{attachment:"depth-stencil",bitsPerChannel:[32,8,0,0],packed:!0},"bc1-rgb-unorm-webgl":{f:q},"bc1-rgb-unorm-srgb-webgl":{f:q},"bc1-rgba-unorm":{f:q},"bc1-rgba-unorm-srgb":{f:q},"bc2-rgba-unorm":{f:q},"bc2-rgba-unorm-srgb":{f:q},"bc3-rgba-unorm":{f:q},"bc3-rgba-unorm-srgb":{f:q},"bc4-r-unorm":{f:q},"bc4-r-snorm":{f:q},"bc5-rg-unorm":{f:q},"bc5-rg-snorm":{f:q},"bc6h-rgb-ufloat":{f:q},"bc6h-rgb-float":{f:q},"bc7-rgba-unorm":{f:q},"bc7-rgba-unorm-srgb":{f:q},"etc2-rgb8unorm":{f:s},"etc2-rgb8unorm-srgb":{f:s},"etc2-rgb8a1unorm":{f:s},"etc2-rgb8a1unorm-srgb":{f:s},"etc2-rgba8unorm":{f:s},"etc2-rgba8unorm-srgb":{f:s},"eac-r11unorm":{f:s},"eac-r11snorm":{f:s},"eac-rg11unorm":{f:s},"eac-rg11snorm":{f:s},"astc-4x4-unorm":{f:r},"astc-4x4-unorm-srgb":{f:r},"astc-5x4-unorm":{f:r},"astc-5x4-unorm-srgb":{f:r},"astc-5x5-unorm":{f:r},"astc-5x5-unorm-srgb":{f:r},"astc-6x5-unorm":{f:r},"astc-6x5-unorm-srgb":{f:r},"astc-6x6-unorm":{f:r},"astc-6x6-unorm-srgb":{f:r},"astc-8x5-unorm":{f:r},"astc-8x5-unorm-srgb":{f:r},"astc-8x6-unorm":{f:r},"astc-8x6-unorm-srgb":{f:r},"astc-8x8-unorm":{f:r},"astc-8x8-unorm-srgb":{f:r},"astc-10x5-unorm":{f:r},"astc-10x5-unorm-srgb":{f:r},"astc-10x6-unorm":{f:r},"astc-10x6-unorm-srgb":{f:r},"astc-10x8-unorm":{f:r},"astc-10x8-unorm-srgb":{f:r},"astc-10x10-unorm":{f:r},"astc-10x10-unorm-srgb":{f:r},"astc-12x10-unorm":{f:r},"astc-12x10-unorm-srgb":{f:r},"astc-12x12-unorm":{f:r},"astc-12x12-unorm-srgb":{f:r},"pvrtc-rgb4unorm-webgl":{f:t},"pvrtc-rgba4unorm-webgl":{f:t},"pvrtc-rbg2unorm-webgl":{f:t},"pvrtc-rgba2unorm-webgl":{f:t},"etc1-rbg-unorm-webgl":{f:"texture-compression-etc1-webgl"},"atc-rgb-unorm-webgl":{f:u},"atc-rgba-unorm-webgl":{f:u},"atc-rgbai-unorm-webgl":{f:u}},E=["bc1","bc2","bc3","bc4","bc5","bc6","bc7","etc1","etc2","eac","atc","astc","pvrtc"],F=/^(r|rg|rgb|rgba|bgra)([0-9]*)([a-z]*)(-srgb)?(-webgl)?$/,G=new class{getInfo(a){return H(a)}isColor(a){return a.startsWith("rgba")||a.startsWith("bgra")||a.startsWith("rgb")}isDepthStencil(a){return a.startsWith("depth")||a.startsWith("stencil")}isCompressed(a){return E.some(b=>a.startsWith(b))}getCapabilities(a){let b=C(a),c={format:a,create:b.f??!0,render:b.render??!0,filter:b.filter??!0,blend:b.blend??!0,store:b.store??!0},d=H(a),e=a.startsWith("depth")||a.startsWith("stencil"),f=d?.signed,g=d?.integer,h=d?.webgl;return c.render&&=!f,c.filter&&=!e&&!f&&!g&&!h,c}};function H(a){var b;let c,d,e,f=(d=(c=C(b=a)).bytesPerPixel||1,e=c.bitsPerChannel||[8,8,8,8],delete c.bitsPerChannel,delete c.bytesPerPixel,delete c.f,delete c.render,delete c.filter,delete c.blend,delete c.store,{...c,format:b,attachment:c.attachment||"color",channels:c.channels||"r",components:c.components||c.channels?.length||1,bytesPerPixel:d,bitsPerChannel:e,dataType:c.dataType||"uint8",srgb:c.srgb??!1,packed:c.packed??!1,webgl:c.webgl??!1,integer:c.integer??!1,signed:c.signed??!1,normalized:c.normalized??!1,compressed:c.compressed??!1});if(G.isCompressed(a)){f.channels="rgb",f.components=3,f.bytesPerPixel=1,f.srgb=!1,f.compressed=!0;let b=function(a){let b=/.*-(\d+)x(\d+)-.*/.exec(a);if(b){let[,a,c]=b;return{blockWidth:Number(a),blockHeight:Number(c)}}return null}(a);b&&(f.blockWidth=b.blockWidth,f.blockHeight=b.blockHeight)}let g=F.exec(a);if(g){let[,b,c,d,e,i]=g,j=h(`${d}${c}`),k=8*j.byteLength,l=b.length;f={format:a,attachment:f.attachment,dataType:j.signedType,components:l,channels:b,integer:j.integer,signed:j.signed,normalized:j.normalized,bitsPerChannel:[k,l>=2?k:0,l>=3?k:0,l>=4?k:0],bytesPerPixel:j.byteLength*b.length,packed:f.packed,srgb:f.srgb},"-webgl"===i&&(f.webgl=!0),"-srgb"===e&&(f.srgb=!0)}return a.endsWith("-webgl")&&(f.webgl=!0),a.endsWith("-srgb")&&(f.srgb=!0),f}a.s(["textureFormatDecoder",0,G],43211);class I{}class J{features;disabledFeatures;constructor(a=[],b){this.features=new Set(a),this.disabledFeatures=b||{}}*[Symbol.iterator](){yield*this.features}has(a){return!this.disabledFeatures?.[a]&&this.features.has(a)}}class K{static defaultProps={id:null,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,createCanvasContext:void 0,webgl:{},onError:(a,b)=>{},onResize:(a,b)=>{let[d,e]=a.getDevicePixelSize();c.log.log(1,`${a} resized => ${d}x${e}px`)()},onPositionChange:(a,b)=>{let[d,e]=a.getPosition();c.log.log(1,`${a} repositioned => ${d},${e}`)()},onVisibilityChange:a=>c.log.log(1,`${a} Visibility changed ${a.isVisible}`)(),onDevicePixelRatioChange:(a,b)=>c.log.log(1,`${a} DPR changed ${b.oldRatio} => ${a.devicePixelRatio}`)(),debug:c.log.get("debug")||void 0,debugShaders:c.log.get("debug-shaders")||void 0,debugFramebuffers:!!c.log.get("debug-framebuffers"),debugFactories:!!c.log.get("debug-factories"),debugWebGL:!!c.log.get("debug-webgl"),debugSpectorJS:void 0,debugSpectorJSUrl:void 0,_reuseDevices:!1,_requestMaxLimits:!0,_cacheShaders:!1,_cachePipelines:!1,_cacheDestroyPolicy:"unused",_initializeFeatures:!0,_disabledFeatures:{"compilation-status-async-webgl":!0},_handle:void 0};get[Symbol.toStringTag](){return"Device"}toString(){return`Device(${this.id})`}id;props;userData={};statsManager=b.lumaStats;timestamp=0;_reused=!1;_lumaData={};_textureCaps={};constructor(a){this.props={...K.defaultProps,...a},this.id=this.props.id||e(this[Symbol.toStringTag].toLowerCase())}getVertexFormatInfo(a){return n(a)}isVertexFormatSupported(a){return!0}getTextureFormatInfo(a){return G.getInfo(a)}getTextureFormatCapabilities(a){let b=this._textureCaps[a];if(!b){let c=this._getDeviceTextureFormatCapabilities(a);b=this._getDeviceSpecificTextureFormatCapabilities(c),this._textureCaps[a]=b}return b}getMipLevelCount(a,b,c=1){return 1+Math.floor(Math.log2(Math.max(a,b,c)))}isExternalImage(a){return"undefined"!=typeof ImageData&&a instanceof ImageData||"undefined"!=typeof ImageBitmap&&a instanceof ImageBitmap||"undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement||"undefined"!=typeof VideoFrame&&a instanceof VideoFrame||"undefined"!=typeof HTMLCanvasElement&&a instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&a instanceof OffscreenCanvas}getExternalImageSize(a){if("undefined"!=typeof ImageData&&a instanceof ImageData||"undefined"!=typeof ImageBitmap&&a instanceof ImageBitmap||"undefined"!=typeof HTMLCanvasElement&&a instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&a instanceof OffscreenCanvas)return{width:a.width,height:a.height};if("undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement)return{width:a.naturalWidth,height:a.naturalHeight};if("undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement)return{width:a.videoWidth,height:a.videoHeight};if("undefined"!=typeof VideoFrame&&a instanceof VideoFrame)return{width:a.displayWidth,height:a.displayHeight};throw Error("Unknown image type")}isTextureFormatSupported(a){return this.getTextureFormatCapabilities(a).create}isTextureFormatFilterable(a){return this.getTextureFormatCapabilities(a).filter}isTextureFormatRenderable(a){return this.getTextureFormatCapabilities(a).render}isTextureFormatCompressed(a){return G.isCompressed(a)}pushDebugGroup(a){this.commandEncoder.pushDebugGroup(a)}popDebugGroup(){this.commandEncoder?.popDebugGroup()}insertDebugMarker(a){this.commandEncoder?.insertDebugMarker(a)}loseDevice(){return!1}incrementTimestamp(){return this.timestamp++}reportError(a,b,...d){return this.props.onError(a,b)?()=>{}:c.log.error(a.message,b,...d)}debug(){if(this.props.debug);else{let a=`\
'Type luma.log.set({debug: true}) in console to enable debug breakpoints',
or create a device with the 'debug: true' prop.`;c.log.once(0,a)()}}getDefaultCanvasContext(){if(!this.canvasContext)throw Error("Device has no default CanvasContext. See props.createCanvasContext");return this.canvasContext}beginRenderPass(a){return this.commandEncoder.beginRenderPass(a)}beginComputePass(a){return this.commandEncoder.beginComputePass(a)}getCanvasContext(){return this.getDefaultCanvasContext()}readPixelsToArrayWebGL(a,b){throw Error("not implemented")}readPixelsToBufferWebGL(a,b){throw Error("not implemented")}setParametersWebGL(a){throw Error("not implemented")}getParametersWebGL(a){throw Error("not implemented")}withParametersWebGL(a,b){throw Error("not implemented")}clearWebGL(a){throw Error("not implemented")}resetWebGL(){throw Error("not implemented")}static _getCanvasContextProps(a){return!0===a.createCanvasContext?{}:a.createCanvasContext}_getDeviceTextureFormatCapabilities(a){let b=G.getCapabilities(a),c=a=>("string"==typeof a?this.features.has(a):a)??!0,d=c(b.create);return{format:a,create:d,render:d&&c(b.render),filter:d&&c(b.filter),blend:d&&c(b.blend),store:d&&c(b.store)}}_normalizeBufferProps(a){(a instanceof ArrayBuffer||ArrayBuffer.isView(a))&&(a={data:a});let b={...a};if((a.usage||0)&g.INDEX&&(!a.indexType&&(a.data instanceof Uint32Array?b.indexType="uint32":a.data instanceof Uint16Array&&(b.indexType="uint16")),!b.indexType))throw Error("indices buffer content must be of type uint16 or uint32");return b}}a.s(["Device",()=>K,"DeviceFeatures",()=>J,"DeviceLimits",()=>I],34161)},42931,26315,a=>{"use strict";var b,c,d=a.i(96893);async function e(a,b){let c=document.getElementsByTagName("head")[0];if(!c)throw Error("loadScript");let d=document.createElement("script");return d.setAttribute("type","text/javascript"),d.setAttribute("src",a),b&&(d.id=b),new Promise((b,e)=>{d.onload=b,d.onerror=b=>e(Error(`Unable to load script '${a}': ${b}`)),c.appendChild(d)})}let f=null,g=!1,h={debugSpectorJS:d.log.get("debug-spectorjs"),debugSpectorJSUrl:"https://cdn.jsdelivr.net/npm/spectorjs@0.9.30/dist/spector.bundle.js",gl:void 0};async function i(a){if(!globalThis.SPECTOR)try{await e(a.debugSpectorJSUrl||h.debugSpectorJSUrl)}catch(a){d.log.warn(String(a))}}function j(a){if(!(a={...h,...a}).debugSpectorJS)return null;if(!f&&globalThis.SPECTOR&&!globalThis.luma?.spector){d.log.probe(1,"SPECTOR found and initialized. Start with `luma.spector.displayUI()`")();let{Spector:a}=globalThis.SPECTOR;f=new a,globalThis.luma&&(globalThis.luma.spector=f)}if(!f)return null;if(g||(g=!0,f.spyCanvases(),f?.onCaptureStarted.add(a=>d.log.info("Spector capture started:",a)()),f?.onCapture.add(a=>{d.log.info("Spector capture complete:",a)(),f?.getResultUI(),f?.resultView.display(),f?.resultView.addCapture(a)})),a.gl){let b=a.gl,c=b.device;f?.startCapture(a.gl,500),b.device=c,new Promise(a=>setTimeout(a,2e3)).then(a=>{d.log.info("Spector capture stopped after 2 seconds")(),f?.stopCapture()})}return f}a.s(["DEFAULT_SPECTOR_PROPS",0,h,"initializeSpectorJS",()=>j,"loadSpectorJS",()=>i],42931),(b=c||(c={}))[b.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",b[b.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",b[b.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",b[b.POINTS=0]="POINTS",b[b.LINES=1]="LINES",b[b.LINE_LOOP=2]="LINE_LOOP",b[b.LINE_STRIP=3]="LINE_STRIP",b[b.TRIANGLES=4]="TRIANGLES",b[b.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",b[b.TRIANGLE_FAN=6]="TRIANGLE_FAN",b[b.ZERO=0]="ZERO",b[b.ONE=1]="ONE",b[b.SRC_COLOR=768]="SRC_COLOR",b[b.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",b[b.SRC_ALPHA=770]="SRC_ALPHA",b[b.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",b[b.DST_ALPHA=772]="DST_ALPHA",b[b.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",b[b.DST_COLOR=774]="DST_COLOR",b[b.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",b[b.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",b[b.CONSTANT_COLOR=32769]="CONSTANT_COLOR",b[b.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",b[b.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",b[b.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",b[b.FUNC_ADD=32774]="FUNC_ADD",b[b.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",b[b.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",b[b.BLEND_EQUATION=32777]="BLEND_EQUATION",b[b.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",b[b.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",b[b.BLEND_DST_RGB=32968]="BLEND_DST_RGB",b[b.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",b[b.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",b[b.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",b[b.BLEND_COLOR=32773]="BLEND_COLOR",b[b.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",b[b.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",b[b.LINE_WIDTH=2849]="LINE_WIDTH",b[b.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",b[b.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",b[b.CULL_FACE_MODE=2885]="CULL_FACE_MODE",b[b.FRONT_FACE=2886]="FRONT_FACE",b[b.DEPTH_RANGE=2928]="DEPTH_RANGE",b[b.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",b[b.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",b[b.DEPTH_FUNC=2932]="DEPTH_FUNC",b[b.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",b[b.STENCIL_FUNC=2962]="STENCIL_FUNC",b[b.STENCIL_FAIL=2964]="STENCIL_FAIL",b[b.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",b[b.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",b[b.STENCIL_REF=2967]="STENCIL_REF",b[b.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",b[b.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",b[b.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",b[b.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",b[b.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",b[b.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",b[b.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",b[b.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",b[b.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",b[b.VIEWPORT=2978]="VIEWPORT",b[b.SCISSOR_BOX=3088]="SCISSOR_BOX",b[b.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",b[b.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",b[b.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",b[b.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",b[b.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",b[b.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",b[b.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",b[b.RED_BITS=3410]="RED_BITS",b[b.GREEN_BITS=3411]="GREEN_BITS",b[b.BLUE_BITS=3412]="BLUE_BITS",b[b.ALPHA_BITS=3413]="ALPHA_BITS",b[b.DEPTH_BITS=3414]="DEPTH_BITS",b[b.STENCIL_BITS=3415]="STENCIL_BITS",b[b.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",b[b.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",b[b.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",b[b.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",b[b.SAMPLES=32937]="SAMPLES",b[b.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",b[b.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",b[b.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",b[b.VENDOR=7936]="VENDOR",b[b.RENDERER=7937]="RENDERER",b[b.VERSION=7938]="VERSION",b[b.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",b[b.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",b[b.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",b[b.STATIC_DRAW=35044]="STATIC_DRAW",b[b.STREAM_DRAW=35040]="STREAM_DRAW",b[b.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",b[b.ARRAY_BUFFER=34962]="ARRAY_BUFFER",b[b.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",b[b.BUFFER_SIZE=34660]="BUFFER_SIZE",b[b.BUFFER_USAGE=34661]="BUFFER_USAGE",b[b.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",b[b.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",b[b.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",b[b.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",b[b.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",b[b.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",b[b.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",b[b.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",b[b.CULL_FACE=2884]="CULL_FACE",b[b.FRONT=1028]="FRONT",b[b.BACK=1029]="BACK",b[b.FRONT_AND_BACK=1032]="FRONT_AND_BACK",b[b.BLEND=3042]="BLEND",b[b.DEPTH_TEST=2929]="DEPTH_TEST",b[b.DITHER=3024]="DITHER",b[b.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",b[b.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",b[b.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",b[b.SCISSOR_TEST=3089]="SCISSOR_TEST",b[b.STENCIL_TEST=2960]="STENCIL_TEST",b[b.NO_ERROR=0]="NO_ERROR",b[b.INVALID_ENUM=1280]="INVALID_ENUM",b[b.INVALID_VALUE=1281]="INVALID_VALUE",b[b.INVALID_OPERATION=1282]="INVALID_OPERATION",b[b.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",b[b.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",b[b.CW=2304]="CW",b[b.CCW=2305]="CCW",b[b.DONT_CARE=4352]="DONT_CARE",b[b.FASTEST=4353]="FASTEST",b[b.NICEST=4354]="NICEST",b[b.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",b[b.BYTE=5120]="BYTE",b[b.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",b[b.SHORT=5122]="SHORT",b[b.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",b[b.INT=5124]="INT",b[b.UNSIGNED_INT=5125]="UNSIGNED_INT",b[b.FLOAT=5126]="FLOAT",b[b.DOUBLE=5130]="DOUBLE",b[b.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",b[b.ALPHA=6406]="ALPHA",b[b.RGB=6407]="RGB",b[b.RGBA=6408]="RGBA",b[b.LUMINANCE=6409]="LUMINANCE",b[b.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",b[b.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",b[b.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",b[b.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",b[b.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",b[b.VERTEX_SHADER=35633]="VERTEX_SHADER",b[b.COMPILE_STATUS=35713]="COMPILE_STATUS",b[b.DELETE_STATUS=35712]="DELETE_STATUS",b[b.LINK_STATUS=35714]="LINK_STATUS",b[b.VALIDATE_STATUS=35715]="VALIDATE_STATUS",b[b.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",b[b.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",b[b.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",b[b.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",b[b.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",b[b.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",b[b.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",b[b.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",b[b.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",b[b.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",b[b.SHADER_TYPE=35663]="SHADER_TYPE",b[b.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",b[b.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",b[b.NEVER=512]="NEVER",b[b.LESS=513]="LESS",b[b.EQUAL=514]="EQUAL",b[b.LEQUAL=515]="LEQUAL",b[b.GREATER=516]="GREATER",b[b.NOTEQUAL=517]="NOTEQUAL",b[b.GEQUAL=518]="GEQUAL",b[b.ALWAYS=519]="ALWAYS",b[b.KEEP=7680]="KEEP",b[b.REPLACE=7681]="REPLACE",b[b.INCR=7682]="INCR",b[b.DECR=7683]="DECR",b[b.INVERT=5386]="INVERT",b[b.INCR_WRAP=34055]="INCR_WRAP",b[b.DECR_WRAP=34056]="DECR_WRAP",b[b.NEAREST=9728]="NEAREST",b[b.LINEAR=9729]="LINEAR",b[b.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",b[b.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",b[b.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",b[b.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",b[b.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",b[b.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",b[b.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",b[b.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",b[b.TEXTURE_2D=3553]="TEXTURE_2D",b[b.TEXTURE=5890]="TEXTURE",b[b.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",b[b.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",b[b.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",b[b.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",b[b.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",b[b.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",b[b.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",b[b.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",b[b.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",b[b.TEXTURE0=33984]="TEXTURE0",b[b.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",b[b.REPEAT=10497]="REPEAT",b[b.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",b[b.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",b[b.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",b[b.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",b[b.FLOAT_VEC2=35664]="FLOAT_VEC2",b[b.FLOAT_VEC3=35665]="FLOAT_VEC3",b[b.FLOAT_VEC4=35666]="FLOAT_VEC4",b[b.INT_VEC2=35667]="INT_VEC2",b[b.INT_VEC3=35668]="INT_VEC3",b[b.INT_VEC4=35669]="INT_VEC4",b[b.BOOL=35670]="BOOL",b[b.BOOL_VEC2=35671]="BOOL_VEC2",b[b.BOOL_VEC3=35672]="BOOL_VEC3",b[b.BOOL_VEC4=35673]="BOOL_VEC4",b[b.FLOAT_MAT2=35674]="FLOAT_MAT2",b[b.FLOAT_MAT3=35675]="FLOAT_MAT3",b[b.FLOAT_MAT4=35676]="FLOAT_MAT4",b[b.SAMPLER_2D=35678]="SAMPLER_2D",b[b.SAMPLER_CUBE=35680]="SAMPLER_CUBE",b[b.LOW_FLOAT=36336]="LOW_FLOAT",b[b.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",b[b.HIGH_FLOAT=36338]="HIGH_FLOAT",b[b.LOW_INT=36339]="LOW_INT",b[b.MEDIUM_INT=36340]="MEDIUM_INT",b[b.HIGH_INT=36341]="HIGH_INT",b[b.FRAMEBUFFER=36160]="FRAMEBUFFER",b[b.RENDERBUFFER=36161]="RENDERBUFFER",b[b.RGBA4=32854]="RGBA4",b[b.RGB5_A1=32855]="RGB5_A1",b[b.RGB565=36194]="RGB565",b[b.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",b[b.STENCIL_INDEX=6401]="STENCIL_INDEX",b[b.STENCIL_INDEX8=36168]="STENCIL_INDEX8",b[b.DEPTH_STENCIL=34041]="DEPTH_STENCIL",b[b.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",b[b.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",b[b.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",b[b.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",b[b.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",b[b.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",b[b.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",b[b.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",b[b.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",b[b.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",b[b.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",b[b.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",b[b.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",b[b.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",b[b.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",b[b.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",b[b.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",b[b.NONE=0]="NONE",b[b.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",b[b.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",b[b.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",b[b.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",b[b.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",b[b.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",b[b.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",b[b.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",b[b.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",b[b.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",b[b.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",b[b.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",b[b.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",b[b.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",b[b.READ_BUFFER=3074]="READ_BUFFER",b[b.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",b[b.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",b[b.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",b[b.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",b[b.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",b[b.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",b[b.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",b[b.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",b[b.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",b[b.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",b[b.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",b[b.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",b[b.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",b[b.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",b[b.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",b[b.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",b[b.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",b[b.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",b[b.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",b[b.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",b[b.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",b[b.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",b[b.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",b[b.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",b[b.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",b[b.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",b[b.RED=6403]="RED",b[b.RGB8=32849]="RGB8",b[b.RGBA8=32856]="RGBA8",b[b.RGB10_A2=32857]="RGB10_A2",b[b.TEXTURE_3D=32879]="TEXTURE_3D",b[b.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",b[b.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",b[b.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",b[b.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",b[b.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",b[b.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",b[b.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",b[b.SRGB=35904]="SRGB",b[b.SRGB8=35905]="SRGB8",b[b.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",b[b.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",b[b.RGBA32F=34836]="RGBA32F",b[b.RGB32F=34837]="RGB32F",b[b.RGBA16F=34842]="RGBA16F",b[b.RGB16F=34843]="RGB16F",b[b.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",b[b.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",b[b.R11F_G11F_B10F=35898]="R11F_G11F_B10F",b[b.RGB9_E5=35901]="RGB9_E5",b[b.RGBA32UI=36208]="RGBA32UI",b[b.RGB32UI=36209]="RGB32UI",b[b.RGBA16UI=36214]="RGBA16UI",b[b.RGB16UI=36215]="RGB16UI",b[b.RGBA8UI=36220]="RGBA8UI",b[b.RGB8UI=36221]="RGB8UI",b[b.RGBA32I=36226]="RGBA32I",b[b.RGB32I=36227]="RGB32I",b[b.RGBA16I=36232]="RGBA16I",b[b.RGB16I=36233]="RGB16I",b[b.RGBA8I=36238]="RGBA8I",b[b.RGB8I=36239]="RGB8I",b[b.RED_INTEGER=36244]="RED_INTEGER",b[b.RGB_INTEGER=36248]="RGB_INTEGER",b[b.RGBA_INTEGER=36249]="RGBA_INTEGER",b[b.R8=33321]="R8",b[b.RG8=33323]="RG8",b[b.R16F=33325]="R16F",b[b.R32F=33326]="R32F",b[b.RG16F=33327]="RG16F",b[b.RG32F=33328]="RG32F",b[b.R8I=33329]="R8I",b[b.R8UI=33330]="R8UI",b[b.R16I=33331]="R16I",b[b.R16UI=33332]="R16UI",b[b.R32I=33333]="R32I",b[b.R32UI=33334]="R32UI",b[b.RG8I=33335]="RG8I",b[b.RG8UI=33336]="RG8UI",b[b.RG16I=33337]="RG16I",b[b.RG16UI=33338]="RG16UI",b[b.RG32I=33339]="RG32I",b[b.RG32UI=33340]="RG32UI",b[b.R8_SNORM=36756]="R8_SNORM",b[b.RG8_SNORM=36757]="RG8_SNORM",b[b.RGB8_SNORM=36758]="RGB8_SNORM",b[b.RGBA8_SNORM=36759]="RGBA8_SNORM",b[b.RGB10_A2UI=36975]="RGB10_A2UI",b[b.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",b[b.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",b[b.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",b[b.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",b[b.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",b[b.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",b[b.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",b[b.HALF_FLOAT=5131]="HALF_FLOAT",b[b.RG=33319]="RG",b[b.RG_INTEGER=33320]="RG_INTEGER",b[b.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",b[b.CURRENT_QUERY=34917]="CURRENT_QUERY",b[b.QUERY_RESULT=34918]="QUERY_RESULT",b[b.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",b[b.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",b[b.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",b[b.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",b[b.DRAW_BUFFER0=34853]="DRAW_BUFFER0",b[b.DRAW_BUFFER1=34854]="DRAW_BUFFER1",b[b.DRAW_BUFFER2=34855]="DRAW_BUFFER2",b[b.DRAW_BUFFER3=34856]="DRAW_BUFFER3",b[b.DRAW_BUFFER4=34857]="DRAW_BUFFER4",b[b.DRAW_BUFFER5=34858]="DRAW_BUFFER5",b[b.DRAW_BUFFER6=34859]="DRAW_BUFFER6",b[b.DRAW_BUFFER7=34860]="DRAW_BUFFER7",b[b.DRAW_BUFFER8=34861]="DRAW_BUFFER8",b[b.DRAW_BUFFER9=34862]="DRAW_BUFFER9",b[b.DRAW_BUFFER10=34863]="DRAW_BUFFER10",b[b.DRAW_BUFFER11=34864]="DRAW_BUFFER11",b[b.DRAW_BUFFER12=34865]="DRAW_BUFFER12",b[b.DRAW_BUFFER13=34866]="DRAW_BUFFER13",b[b.DRAW_BUFFER14=34867]="DRAW_BUFFER14",b[b.DRAW_BUFFER15=34868]="DRAW_BUFFER15",b[b.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",b[b.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",b[b.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",b[b.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",b[b.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",b[b.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",b[b.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",b[b.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",b[b.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",b[b.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",b[b.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",b[b.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",b[b.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",b[b.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",b[b.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",b[b.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",b[b.SAMPLER_3D=35679]="SAMPLER_3D",b[b.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",b[b.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",b[b.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",b[b.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",b[b.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",b[b.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",b[b.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",b[b.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",b[b.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",b[b.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",b[b.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",b[b.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",b[b.MAX_SAMPLES=36183]="MAX_SAMPLES",b[b.SAMPLER_BINDING=35097]="SAMPLER_BINDING",b[b.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",b[b.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",b[b.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",b[b.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",b[b.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",b[b.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",b[b.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",b[b.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",b[b.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",b[b.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",b[b.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",b[b.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",b[b.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",b[b.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",b[b.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",b[b.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",b[b.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",b[b.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",b[b.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",b[b.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",b[b.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",b[b.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",b[b.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",b[b.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",b[b.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",b[b.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",b[b.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",b[b.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",b[b.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",b[b.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",b[b.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",b[b.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",b[b.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",b[b.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",b[b.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",b[b.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",b[b.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",b[b.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",b[b.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",b[b.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",b[b.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",b[b.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",b[b.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",b[b.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",b[b.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",b[b.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",b[b.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",b[b.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",b[b.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",b[b.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",b[b.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",b[b.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",b[b.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",b[b.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",b[b.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",b[b.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",b[b.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",b[b.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",b[b.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",b[b.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",b[b.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",b[b.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",b[b.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",b[b.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",b[b.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",b[b.UNIFORM_TYPE=35383]="UNIFORM_TYPE",b[b.UNIFORM_SIZE=35384]="UNIFORM_SIZE",b[b.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",b[b.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",b[b.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",b[b.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",b[b.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",b[b.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",b[b.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",b[b.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",b[b.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",b[b.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",b[b.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",b[b.OBJECT_TYPE=37138]="OBJECT_TYPE",b[b.SYNC_CONDITION=37139]="SYNC_CONDITION",b[b.SYNC_STATUS=37140]="SYNC_STATUS",b[b.SYNC_FLAGS=37141]="SYNC_FLAGS",b[b.SYNC_FENCE=37142]="SYNC_FENCE",b[b.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",b[b.UNSIGNALED=37144]="UNSIGNALED",b[b.SIGNALED=37145]="SIGNALED",b[b.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",b[b.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",b[b.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",b[b.WAIT_FAILED=37149]="WAIT_FAILED",b[b.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",b[b.COLOR=6144]="COLOR",b[b.DEPTH=6145]="DEPTH",b[b.STENCIL=6146]="STENCIL",b[b.MIN=32775]="MIN",b[b.MAX=32776]="MAX",b[b.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",b[b.STREAM_READ=35041]="STREAM_READ",b[b.STREAM_COPY=35042]="STREAM_COPY",b[b.STATIC_READ=35045]="STATIC_READ",b[b.STATIC_COPY=35046]="STATIC_COPY",b[b.DYNAMIC_READ=35049]="DYNAMIC_READ",b[b.DYNAMIC_COPY=35050]="DYNAMIC_COPY",b[b.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",b[b.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",b[b.INVALID_INDEX=0xffffffff]="INVALID_INDEX",b[b.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",b[b.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",b[b.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",b[b.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",b[b.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",b[b.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",b[b.R16_EXT=33322]="R16_EXT",b[b.RG16_EXT=33324]="RG16_EXT",b[b.RGB16_EXT=32852]="RGB16_EXT",b[b.RGBA16_EXT=32859]="RGBA16_EXT",b[b.R16_SNORM_EXT=36760]="R16_SNORM_EXT",b[b.RG16_SNORM_EXT=36761]="RG16_SNORM_EXT",b[b.RGB16_SNORM_EXT=36762]="RGB16_SNORM_EXT",b[b.RGBA16_SNORM_EXT=36763]="RGBA16_SNORM_EXT",b[b.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",b[b.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",b[b.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",b[b.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",b[b.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",b[b.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",b[b.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",b[b.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",b[b.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",b[b.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",b[b.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",b[b.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",b[b.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",b[b.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",b[b.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",b[b.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",b[b.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",b[b.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",b[b.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",b[b.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",b[b.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",b[b.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",b[b.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",b[b.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",b[b.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",b[b.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",b[b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",b[b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",b[b.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",b[b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",b[b.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",b[b.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",b[b.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",b[b.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",b[b.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",b[b.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",b[b.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",b[b.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",b[b.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",b[b.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",b[b.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",b[b.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",b[b.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",b[b.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",b[b.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",b[b.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",b[b.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",b[b.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",b[b.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",b[b.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",b[b.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",b[b.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",b[b.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",b[b.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",b[b.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",b[b.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",b[b.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",b[b.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",b[b.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",b[b.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",b[b.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",b[b.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",b[b.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",b[b.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",b[b.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",b[b.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",b[b.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",b[b.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",b[b.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT",b[b.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR",b[b.DEPTH_CLAMP_EXT=34383]="DEPTH_CLAMP_EXT",b[b.FIRST_VERTEX_CONVENTION_WEBGL=36429]="FIRST_VERTEX_CONVENTION_WEBGL",b[b.LAST_VERTEX_CONVENTION_WEBGL=36430]="LAST_VERTEX_CONVENTION_WEBGL",b[b.PROVOKING_VERTEX_WEBL=36431]="PROVOKING_VERTEX_WEBL",b[b.POLYGON_MODE_WEBGL=2880]="POLYGON_MODE_WEBGL",b[b.POLYGON_OFFSET_LINE_WEBGL=10754]="POLYGON_OFFSET_LINE_WEBGL",b[b.LINE_WEBGL=6913]="LINE_WEBGL",b[b.FILL_WEBGL=6914]="FILL_WEBGL",b[b.MAX_CLIP_DISTANCES_WEBGL=3378]="MAX_CLIP_DISTANCES_WEBGL",b[b.MAX_CULL_DISTANCES_WEBGL=33529]="MAX_CULL_DISTANCES_WEBGL",b[b.MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL=33530]="MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL",b[b.CLIP_DISTANCE0_WEBGL=12288]="CLIP_DISTANCE0_WEBGL",b[b.CLIP_DISTANCE1_WEBGL=12289]="CLIP_DISTANCE1_WEBGL",b[b.CLIP_DISTANCE2_WEBGL=12290]="CLIP_DISTANCE2_WEBGL",b[b.CLIP_DISTANCE3_WEBGL=12291]="CLIP_DISTANCE3_WEBGL",b[b.CLIP_DISTANCE4_WEBGL=12292]="CLIP_DISTANCE4_WEBGL",b[b.CLIP_DISTANCE5_WEBGL=12293]="CLIP_DISTANCE5_WEBGL",b[b.CLIP_DISTANCE6_WEBGL=12294]="CLIP_DISTANCE6_WEBGL",b[b.CLIP_DISTANCE7_WEBGL=12295]="CLIP_DISTANCE7_WEBGL",b[b.POLYGON_OFFSET_CLAMP_EXT=36379]="POLYGON_OFFSET_CLAMP_EXT",b[b.LOWER_LEFT_EXT=36001]="LOWER_LEFT_EXT",b[b.UPPER_LEFT_EXT=36002]="UPPER_LEFT_EXT",b[b.NEGATIVE_ONE_TO_ONE_EXT=37726]="NEGATIVE_ONE_TO_ONE_EXT",b[b.ZERO_TO_ONE_EXT=37727]="ZERO_TO_ONE_EXT",b[b.CLIP_ORIGIN_EXT=37724]="CLIP_ORIGIN_EXT",b[b.CLIP_DEPTH_MODE_EXT=37725]="CLIP_DEPTH_MODE_EXT",b[b.SRC1_COLOR_WEBGL=35065]="SRC1_COLOR_WEBGL",b[b.SRC1_ALPHA_WEBGL=34185]="SRC1_ALPHA_WEBGL",b[b.ONE_MINUS_SRC1_COLOR_WEBGL=35066]="ONE_MINUS_SRC1_COLOR_WEBGL",b[b.ONE_MINUS_SRC1_ALPHA_WEBGL=35067]="ONE_MINUS_SRC1_ALPHA_WEBGL",b[b.MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL=35068]="MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL",b[b.MIRROR_CLAMP_TO_EDGE_EXT=34627]="MIRROR_CLAMP_TO_EDGE_EXT";var k=a.i(7951);function l(a){return a.luma=a.luma||{},a.luma}async function m(){(0,k.isBrowser)()&&!globalThis.WebGLDebugUtils&&(globalThis.global=globalThis.global||globalThis,globalThis.global.module={},await e("https://unpkg.com/webgl-debug@2.0.1/index.js"))}function n(a,b={}){var e;let f;return b.debugWebGL||b.traceWebGL?function(a,b){if(!globalThis.WebGLDebugUtils)return d.log.warn("webgl-debug not loaded")(),a;let e=l(a);if(e.debugContext)return e.debugContext;globalThis.WebGLDebugUtils.init({...c,...a});let f=globalThis.WebGLDebugUtils.makeDebugContext(a,p.bind(null,b),q.bind(null,b));for(let a in c)a in f||"number"!=typeof c[a]||(f[a]=c[a]);class g{}Object.setPrototypeOf(f,Object.getPrototypeOf(a)),Object.setPrototypeOf(g,f);let h=Object.create(g);return e.realContext=a,e.debugContext=h,h.debug=!0,h}(a,b):(f=l(e=a)).realContext?f.realContext:e}function o(a,b){b=Array.from(b).map(a=>void 0===a?"undefined":a);let c=globalThis.WebGLDebugUtils.glFunctionArgsToString(a,b);return c=`${c.slice(0,100)}${c.length>100?"...":""}`,`gl.${a}(${c})`}function p(a,b,c,e){e=Array.from(e).map(a=>void 0===a?"undefined":a);let f=globalThis.WebGLDebugUtils.glEnumToString(b),g=globalThis.WebGLDebugUtils.glFunctionArgsToString(c,e),h=`${f} in gl.${c}(${g})`;d.log.error(h)()}function q(a,b,c){let e="";for(let f of(d.log.level>=1&&(e=o(b,c),a.traceWebGL&&d.log.log(1,e)()),c))void 0===f&&(e=e||o(b,c))}a.s(["loadWebGLDeveloperTools",()=>m,"makeDebugContext",()=>n],26315)},24962,22002,47711,40280,80001,72670,75783,94802,98390,82475,10391,74160,95997,37111,a=>{"use strict";let b={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,35725:null,36006:null,36007:null,34229:null,34964:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32926:!1,32928:!1,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:0xffffffff,36005:0xffffffff,2962:519,2967:0,2963:0xffffffff,34816:519,36003:0,36004:0xffffffff,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],36389:null,36662:null,36663:null,35053:null,35055:null,35723:4352,36010:null,35977:!1,3333:4,3317:4,37440:!1,37441:!1,37443:37444,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},c=(a,b,c)=>b?a.enable(c):a.disable(c),d=(a,b,c)=>a.hint(c,b),e=(a,b,c)=>a.pixelStorei(c,b),f=(a,b,c)=>a.bindFramebuffer(36006===c?36009:36008,b),g=(a,b,c)=>{a.bindBuffer({34964:34962,36662:36662,36663:36663,35053:35051,35055:35052}[c],b)};function h(a){return Array.isArray(a)||ArrayBuffer.isView(a)&&!(a instanceof DataView)}let i={3042:c,32773:(a,b)=>a.blendColor(...b),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(a,b)=>a.clearColor(...b),3107:(a,b)=>a.colorMask(...b),2884:c,2885:(a,b)=>a.cullFace(b),2929:c,2931:(a,b)=>a.clearDepth(b),2932:(a,b)=>a.depthFunc(b),2928:(a,b)=>a.depthRange(...b),2930:(a,b)=>a.depthMask(b),3024:c,35723:d,35725:(a,b)=>a.useProgram(b),36007:(a,b)=>a.bindRenderbuffer(36161,b),36389:(a,b)=>a.bindTransformFeedback?.(36386,b),34229:(a,b)=>a.bindVertexArray(b),36006:f,36010:f,34964:g,36662:g,36663:g,35053:g,35055:g,2886:(a,b)=>a.frontFace(b),33170:d,2849:(a,b)=>a.lineWidth(b),32823:c,32824:"polygonOffset",10752:"polygonOffset",35977:c,32926:c,32928:c,32938:"sampleCoverage",32939:"sampleCoverage",3089:c,3088:(a,b)=>a.scissor(...b),2960:c,2961:(a,b)=>a.clearStencil(b),2968:(a,b)=>a.stencilMaskSeparate(1028,b),36005:(a,b)=>a.stencilMaskSeparate(1029,b),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(a,b)=>a.viewport(...b),34383:c,10754:c,12288:c,12289:c,12290:c,12291:c,12292:c,12293:c,12294:c,12295:c,3333:e,3317:e,37440:e,37441:e,37443:e,3330:e,3332:e,3331:e,3314:e,32878:e,3316:e,3315:e,32877:e,framebuffer:(a,b)=>{let c=b&&"handle"in b?b.handle:b;return a.bindFramebuffer(36160,c)},blend:(a,b)=>b?a.enable(3042):a.disable(3042),blendColor:(a,b)=>a.blendColor(...b),blendEquation:(a,b)=>{a.blendEquationSeparate(..."number"==typeof b?[b,b]:b)},blendFunc:(a,b)=>{let c=b?.length===2?[...b,...b]:b;a.blendFuncSeparate(...c)},clearColor:(a,b)=>a.clearColor(...b),clearDepth:(a,b)=>a.clearDepth(b),clearStencil:(a,b)=>a.clearStencil(b),colorMask:(a,b)=>a.colorMask(...b),cull:(a,b)=>b?a.enable(2884):a.disable(2884),cullFace:(a,b)=>a.cullFace(b),depthTest:(a,b)=>b?a.enable(2929):a.disable(2929),depthFunc:(a,b)=>a.depthFunc(b),depthMask:(a,b)=>a.depthMask(b),depthRange:(a,b)=>a.depthRange(...b),dither:(a,b)=>b?a.enable(3024):a.disable(3024),derivativeHint:(a,b)=>{a.hint(35723,b)},frontFace:(a,b)=>a.frontFace(b),mipmapHint:(a,b)=>a.hint(33170,b),lineWidth:(a,b)=>a.lineWidth(b),polygonOffsetFill:(a,b)=>b?a.enable(32823):a.disable(32823),polygonOffset:(a,b)=>a.polygonOffset(...b),sampleCoverage:(a,b)=>a.sampleCoverage(b[0],b[1]||!1),scissorTest:(a,b)=>b?a.enable(3089):a.disable(3089),scissor:(a,b)=>a.scissor(...b),stencilTest:(a,b)=>b?a.enable(2960):a.disable(2960),stencilMask:(a,b)=>{let[c,d]=b=h(b)?b:[b,b];a.stencilMaskSeparate(1028,c),a.stencilMaskSeparate(1029,d)},stencilFunc:(a,b)=>{let[c,d,e,f,g,i]=b=h(b)&&3===b.length?[...b,...b]:b;a.stencilFuncSeparate(1028,c,d,e),a.stencilFuncSeparate(1029,f,g,i)},stencilOp:(a,b)=>{let[c,d,e,f,g,i]=b=h(b)&&3===b.length?[...b,...b]:b;a.stencilOpSeparate(1028,c,d,e),a.stencilOpSeparate(1029,f,g,i)},viewport:(a,b)=>a.viewport(...b)};function j(a,b,c){return void 0!==b[a]?b[a]:c[a]}let k={blendEquation:(a,b,c)=>a.blendEquationSeparate(j(32777,b,c),j(34877,b,c)),blendFunc:(a,b,c)=>a.blendFuncSeparate(j(32969,b,c),j(32968,b,c),j(32971,b,c),j(32970,b,c)),polygonOffset:(a,b,c)=>a.polygonOffset(j(32824,b,c),j(10752,b,c)),sampleCoverage:(a,b,c)=>a.sampleCoverage(j(32938,b,c),j(32939,b,c)),stencilFuncFront:(a,b,c)=>a.stencilFuncSeparate(1028,j(2962,b,c),j(2967,b,c),j(2963,b,c)),stencilFuncBack:(a,b,c)=>a.stencilFuncSeparate(1029,j(34816,b,c),j(36003,b,c),j(36004,b,c)),stencilOpFront:(a,b,c)=>a.stencilOpSeparate(1028,j(2964,b,c),j(2965,b,c),j(2966,b,c)),stencilOpBack:(a,b,c)=>a.stencilOpSeparate(1029,j(34817,b,c),j(34818,b,c),j(34819,b,c))},l={enable:(a,b)=>a({[b]:!0}),disable:(a,b)=>a({[b]:!1}),pixelStorei:(a,b,c)=>a({[b]:c}),hint:(a,b,c)=>a({[b]:c}),useProgram:(a,b)=>a({35725:b}),bindRenderbuffer:(a,b,c)=>a({36007:c}),bindTransformFeedback:(a,b,c)=>a({36389:c}),bindVertexArray:(a,b)=>a({34229:b}),bindFramebuffer:(a,b,c)=>{switch(b){case 36160:return a({36006:c,36010:c});case 36009:return a({36006:c});case 36008:return a({36010:c});default:return null}},bindBuffer:(a,b,c)=>{let d={34962:[34964],36662:[36662],36663:[36663],35051:[35053],35052:[35055]}[b];return d?a({[d]:c}):{valueChanged:!0}},blendColor:(a,b,c,d,e)=>a({32773:new Float32Array([b,c,d,e])}),blendEquation:(a,b)=>a({32777:b,34877:b}),blendEquationSeparate:(a,b,c)=>a({32777:b,34877:c}),blendFunc:(a,b,c)=>a({32969:b,32968:c,32971:b,32970:c}),blendFuncSeparate:(a,b,c,d,e)=>a({32969:b,32968:c,32971:d,32970:e}),clearColor:(a,b,c,d,e)=>a({3106:new Float32Array([b,c,d,e])}),clearDepth:(a,b)=>a({2931:b}),clearStencil:(a,b)=>a({2961:b}),colorMask:(a,b,c,d,e)=>a({3107:[b,c,d,e]}),cullFace:(a,b)=>a({2885:b}),depthFunc:(a,b)=>a({2932:b}),depthRange:(a,b,c)=>a({2928:new Float32Array([b,c])}),depthMask:(a,b)=>a({2930:b}),frontFace:(a,b)=>a({2886:b}),lineWidth:(a,b)=>a({2849:b}),polygonOffset:(a,b,c)=>a({32824:b,10752:c}),sampleCoverage:(a,b,c)=>a({32938:b,32939:c}),scissor:(a,b,c,d,e)=>a({3088:new Int32Array([b,c,d,e])}),stencilMask:(a,b)=>a({2968:b,36005:b}),stencilMaskSeparate:(a,b,c)=>a({[1028===b?2968:36005]:c}),stencilFunc:(a,b,c,d)=>a({2962:b,2967:c,2963:d,34816:b,36003:c,36004:d}),stencilFuncSeparate:(a,b,c,d,e)=>a({[1028===b?2962:34816]:c,[1028===b?2967:36003]:d,[1028===b?2963:36004]:e}),stencilOp:(a,b,c,d)=>a({2964:b,2965:c,2966:d,34817:b,34818:c,34819:d}),stencilOpSeparate:(a,b,c,d,e)=>a({[1028===b?2964:34817]:c,[1028===b?2965:34818]:d,[1028===b?2966:34819]:e}),viewport:(a,b,c,d,e)=>a({2978:[b,c,d,e]})},m=(a,b)=>a.isEnabled(b),n={3042:m,2884:m,2929:m,3024:m,32823:m,32926:m,32928:m,3089:m,2960:m,35977:m},o=new Set([34016,36388,36387,35983,35368,34965,35739,35738,3074,34853,34854,34855,34856,34857,34858,34859,34860,34861,34862,34863,34864,34865,34866,34867,34868,35097,32873,35869,32874,34068]);function p(a,b){if(function(a){for(let b in a)return!1;return!0}(b))return;let c={};for(let d in b){let e=Number(d),f=i[d];f&&("string"==typeof f?c[f]=!0:f(a,b[d],e))}let d=a.state&&a.state.cache;if(d)for(let e in c)(0,k[e])(a,b,d)}function q(a,c=b){if("number"==typeof c){let b=n[c];return b?b(a,c):a.getParameter(c)}let d=Array.isArray(c)?c:Object.keys(c),e={};for(let b of d){let c=n[b];e[b]=c?c(a,Number(b)):a.getParameter(Number(b))}return e}function r(a){p(a,b)}function s(a){return Array.isArray(a)||ArrayBuffer.isView(a)}a.s(["getGLParameters",()=>q,"resetGLParameters",()=>r,"setGLParameters",()=>p],22002);class t{static get(a){return a.state}gl;program=null;stateStack=[];enable=!0;cache=null;log;initialized=!1;constructor(a,b){this.gl=a,this.log=b?.log||(()=>{}),this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(a={}){this.stateStack.push({})}pop(){let a=this.stateStack[this.stateStack.length-1];p(this.gl,a),this.stateStack.pop()}trackState(a,c){var d;let e;if(this.cache=c?.copyState?q(a):Object.assign({},b),this.initialized)throw Error("WebGLStateTracker");for(let b in this.initialized=!0,this.gl.state=this,e=(d=a).useProgram.bind(d),d.useProgram=function(a){let b=t.get(d);b.program!==a&&(e(a),b.program=a)},l){let c=l[b];!function(a,b,c){if(!a[b])return;let d=a[b].bind(a);a[b]=function(...b){let{valueChanged:e,oldValue:f}=c(t.get(a)._updateCache,...b);return e&&d(...b),f},Object.defineProperty(a[b],"name",{value:`${b}-to-cache`,configurable:!1})}(a,b,c)}u(a,"getParameter"),u(a,"isEnabled")}_updateCache(a){let b,c=!1,d=this.stateStack.length>0?this.stateStack[this.stateStack.length-1]:null;for(let e in a){let f=a[e],g=this.cache[e];!function(a,b){if(a===b)return!0;if(s(a)&&s(b)&&a.length===b.length){for(let c=0;c<a.length;++c)if(a[c]!==b[c])return!1;return!0}return!1}(f,g)&&(c=!0,b=g,!d||e in d||(d[e]=g),this.cache[e]=f)}return{valueChanged:c,oldValue:b}}}function u(a,b){let c=a[b].bind(a);a[b]=function(b){if(void 0===b||o.has(b))return c(b);let d=t.get(a);return b in d.cache||(d.cache[b]=c(b)),d.enable?d.cache[b]:c(b)},Object.defineProperty(a[b],"name",{value:`${b}-from-cache`,configurable:!1})}function v(a,b,c){let d="",e={preserveDrawingBuffer:!0,...c},f=null;if(f||=a.getContext("webgl2",e),e.failIfMajorPerformanceCaveat&&(d||="Only software GPU is available. Set `failIfMajorPerformanceCaveat: false` to allow."),f||c.failIfMajorPerformanceCaveat||(e.failIfMajorPerformanceCaveat=!1,f=a.getContext("webgl2",e),f.luma||={},f.luma.softwareRenderer=!0),!f&&(f=a.getContext("webgl",{}))&&(f=null,d||="Your browser only supports WebGL1"),!f)throw d||="Your browser does not support WebGL",Error(`Failed to create WebGL context: ${d}`);let{onContextLost:g,onContextRestored:h}=b;return a.addEventListener("webglcontextlost",a=>g(a),!1),a.addEventListener("webglcontextrestored",a=>h(a),!1),f.luma||={},f}function w(a,b,c){return void 0===c[b]&&(c[b]=a.getExtension(b)||null),c[b]}function x(a,b){var c,d;let e=a.getParameter(7936),f=a.getParameter(7937);w(a,"WEBGL_debug_renderer_info",b);let g=b.WEBGL_debug_renderer_info,h=a.getParameter(g?g.UNMASKED_VENDOR_WEBGL:7936),i=a.getParameter(g?g.UNMASKED_RENDERER_WEBGL:7937),j=h||e,k=i||f,l=a.getParameter(7938),m=y(j,k),n=(c=j,d=k,/Metal/i.exec(c)||/Metal/i.exec(d)?"metal":/ANGLE/i.exec(c)||/ANGLE/i.exec(d)?"opengl":"unknown");return{type:"webgl",gpu:m,gpuType:function(a,b){if(/SwiftShader/i.exec(a)||/SwiftShader/i.exec(b))return"cpu";switch(y(a,b)){case"intel":return"integrated";case"software":return"cpu";case"unknown":return"unknown";default:return"discrete"}}(j,k),gpuBackend:n,vendor:j,renderer:k,version:l,shadingLanguage:"glsl",shadingLanguageVersion:300}}function y(a,b){return/NVIDIA/i.exec(a)||/NVIDIA/i.exec(b)?"nvidia":/INTEL/i.exec(a)||/INTEL/i.exec(b)?"intel":/Apple/i.exec(a)||/Apple/i.exec(b)?"apple":/AMD/i.exec(a)||/AMD/i.exec(b)||/ATI/i.exec(a)||/ATI/i.exec(b)?"amd":/SwiftShader/i.exec(a)||/SwiftShader/i.exec(b)?"software":"unknown"}a.s(["WebGLStateTracker",()=>t],24962),a.s(["createBrowserContext",()=>v],47711),a.s(["getWebGLExtension",()=>w],40280),a.s(["getDeviceInfo",()=>x],80001);var z=a.i(34161),A=a.i(43211);function B(a){switch(a){case"uint8":case"unorm8":return 5121;case"sint8":case"snorm8":return 5120;case"uint16":case"unorm16":return 5123;case"sint16":case"snorm16":return 5122;case"uint32":return 5125;case"sint32":return 5124;case"float16":return 5131;case"float32":return 5126}throw Error(String(a))}a.s(["getGLFromVertexType",()=>B],72670);let C="WEBGL_compressed_texture_s3tc",D="WEBGL_compressed_texture_s3tc_srgb",E="EXT_texture_compression_rgtc",F="EXT_texture_compression_bptc",G="EXT_texture_norm16",H="EXT_render_snorm",I={"float32-renderable-webgl":["EXT_color_buffer_float"],"float16-renderable-webgl":["EXT_color_buffer_half_float"],"rgb9e5ufloat-renderable-webgl":["WEBGL_render_shared_exponent"],"snorm8-renderable-webgl":[H],"norm16-renderable-webgl":[G],"snorm16-renderable-webgl":[G,H],"float32-filterable":["OES_texture_float_linear"],"float16-filterable-webgl":["OES_texture_half_float_linear"],"texture-filterable-anisotropic-webgl":["EXT_texture_filter_anisotropic"],"texture-blend-float-webgl":["EXT_float_blend"],"texture-compression-bc":[C,D,E,F],"texture-compression-bc5-webgl":[E],"texture-compression-bc7-webgl":[F],"texture-compression-etc2":["WEBGL_compressed_texture_etc"],"texture-compression-astc":["WEBGL_compressed_texture_astc"],"texture-compression-etc1-webgl":["WEBGL_compressed_texture_etc1"],"texture-compression-pvrtc-webgl":["WEBGL_compressed_texture_pvrtc"],"texture-compression-atc-webgl":["WEBGL_compressed_texture_atc"]};function J(a){return a in I}function K(a,b,c){return(I[b]||[]).every(b=>w(a,b,c))}let L={r8unorm:{gl:33321,rb:!0},r8snorm:{gl:36756},r8uint:{gl:33330,rb:!0},r8sint:{gl:33329,rb:!0},rg8unorm:{gl:33323,rb:!0},rg8snorm:{gl:36757},rg8uint:{gl:33336,rb:!0},rg8sint:{gl:33335,rb:!0},r16uint:{gl:33332,rb:!0},r16sint:{gl:33331,rb:!0},r16float:{gl:33325,rb:!0},r16unorm:{gl:33322,rb:!0},r16snorm:{gl:36760},"rgba4unorm-webgl":{gl:32854,rb:!0},"rgb565unorm-webgl":{gl:36194,rb:!0},"rgb5a1unorm-webgl":{gl:32855,rb:!0},"rgb8unorm-webgl":{gl:32849},"rgb8snorm-webgl":{gl:36758},rgba8unorm:{gl:32856},"rgba8unorm-srgb":{gl:35907},rgba8snorm:{gl:36759},rgba8uint:{gl:36220},rgba8sint:{gl:36238},bgra8unorm:{},"bgra8unorm-srgb":{},rg16uint:{gl:33338},rg16sint:{gl:33337},rg16float:{gl:33327,rb:!0},rg16unorm:{gl:33324},rg16snorm:{gl:36761},r32uint:{gl:33334,rb:!0},r32sint:{gl:33333,rb:!0},r32float:{gl:33326},rgb9e5ufloat:{gl:35901},rg11b10ufloat:{gl:35898,rb:!0},rgb10a2unorm:{gl:32857,rb:!0},rgb10a2uint:{gl:36975,rb:!0},"rgb16unorm-webgl":{gl:32852},"rgb16snorm-webgl":{gl:36762},rg32uint:{gl:33340,rb:!0},rg32sint:{gl:33339,rb:!0},rg32float:{gl:33328,rb:!0},rgba16uint:{gl:36214,rb:!0},rgba16sint:{gl:36232,rb:!0},rgba16float:{gl:34842},rgba16unorm:{gl:32859,rb:!0},rgba16snorm:{gl:36763},"rgb32float-webgl":{gl:34837,x:"EXT_color_buffer_float",dataFormat:6407,types:[5126]},rgba32uint:{gl:36208,rb:!0},rgba32sint:{gl:36226,rb:!0},rgba32float:{gl:34836,rb:!0},stencil8:{gl:36168,rb:!0},depth16unorm:{gl:33189,dataFormat:6402,types:[5123],rb:!0},depth24plus:{gl:33190,dataFormat:6402,types:[5125]},depth32float:{gl:36012,dataFormat:6402,types:[5126],rb:!0},"depth24plus-stencil8":{gl:35056,rb:!0,depthTexture:!0,dataFormat:34041,types:[34042]},"depth32float-stencil8":{gl:36013,dataFormat:34041,types:[36269],rb:!0},"bc1-rgb-unorm-webgl":{gl:33776,x:C},"bc1-rgb-unorm-srgb-webgl":{gl:35916,x:D},"bc1-rgba-unorm":{gl:33777,x:C},"bc1-rgba-unorm-srgb":{gl:35916,x:D},"bc2-rgba-unorm":{gl:33778,x:C},"bc2-rgba-unorm-srgb":{gl:35918,x:D},"bc3-rgba-unorm":{gl:33779,x:C},"bc3-rgba-unorm-srgb":{gl:35919,x:D},"bc4-r-unorm":{gl:36283,x:E},"bc4-r-snorm":{gl:36284,x:E},"bc5-rg-unorm":{gl:36285,x:E},"bc5-rg-snorm":{gl:36286,x:E},"bc6h-rgb-ufloat":{gl:36495,x:F},"bc6h-rgb-float":{gl:36494,x:F},"bc7-rgba-unorm":{gl:36492,x:F},"bc7-rgba-unorm-srgb":{gl:36493,x:F},"etc2-rgb8unorm":{gl:37492},"etc2-rgb8unorm-srgb":{gl:37494},"etc2-rgb8a1unorm":{gl:37496},"etc2-rgb8a1unorm-srgb":{gl:37497},"etc2-rgba8unorm":{gl:37493},"etc2-rgba8unorm-srgb":{gl:37495},"eac-r11unorm":{gl:37488},"eac-r11snorm":{gl:37489},"eac-rg11unorm":{gl:37490},"eac-rg11snorm":{gl:37491},"astc-4x4-unorm":{gl:37808},"astc-4x4-unorm-srgb":{gl:37840},"astc-5x4-unorm":{gl:37809},"astc-5x4-unorm-srgb":{gl:37841},"astc-5x5-unorm":{gl:37810},"astc-5x5-unorm-srgb":{gl:37842},"astc-6x5-unorm":{gl:37811},"astc-6x5-unorm-srgb":{gl:37843},"astc-6x6-unorm":{gl:37812},"astc-6x6-unorm-srgb":{gl:37844},"astc-8x5-unorm":{gl:37813},"astc-8x5-unorm-srgb":{gl:37845},"astc-8x6-unorm":{gl:37814},"astc-8x6-unorm-srgb":{gl:37846},"astc-8x8-unorm":{gl:37815},"astc-8x8-unorm-srgb":{gl:37847},"astc-10x5-unorm":{gl:37819},"astc-10x5-unorm-srgb":{gl:37851},"astc-10x6-unorm":{gl:37817},"astc-10x6-unorm-srgb":{gl:37849},"astc-10x8-unorm":{gl:37818},"astc-10x8-unorm-srgb":{gl:37850},"astc-10x10-unorm":{gl:37819},"astc-10x10-unorm-srgb":{gl:37851},"astc-12x10-unorm":{gl:37820},"astc-12x10-unorm-srgb":{gl:37852},"astc-12x12-unorm":{gl:37821},"astc-12x12-unorm-srgb":{gl:37853},"pvrtc-rgb4unorm-webgl":{gl:35840},"pvrtc-rgba4unorm-webgl":{gl:35842},"pvrtc-rbg2unorm-webgl":{gl:35841},"pvrtc-rgba2unorm-webgl":{gl:35843},"etc1-rbg-unorm-webgl":{gl:36196},"atc-rgb-unorm-webgl":{gl:35986},"atc-rgba-unorm-webgl":{gl:35986},"atc-rgbai-unorm-webgl":{gl:34798}};function M(a,b,c){let d=b.create,e=L[b.format];return e?.gl===void 0&&(d=!1),e?.x&&(d=d&&!!w(a,e.x,c)),{format:b.format,create:d&&b.create,render:d&&b.render,filter:d&&b.filter,blend:d&&b.blend,store:d&&b.store}}function N(a){let b=L[a],c=function(a){let b=L[a],c=b?.gl;if(void 0===c)throw Error(`Unsupported texture format ${a}`);return c}(a),d=A.textureFormatDecoder.getInfo(a);return d.compressed&&(b.dataFormat=c),{internalFormat:c,format:b?.dataFormat||function(a,b,c,d){if(6408===d||6407===d)return d;switch(a){case"r":return b&&!c?36244:6403;case"rg":return b&&!c?33320:33319;case"rgb":return b&&!c?36248:6407;case"rgba":return b&&!c?36249:6408;case"bgra":throw Error("bgra pixels not supported by WebGL");default:return 6408}}(d.channels,d.integer,d.normalized,c),type:d.dataType?B(d.dataType):b?.types?.[0]||5121,compressed:d.compressed||!1}}function O(a){switch(A.textureFormatDecoder.getInfo(a).attachment){case"depth":return 36096;case"stencil":return 36128;case"depth-stencil":return 33306;default:throw Error(`Not a depth stencil format: ${a}`)}}a.s(["TEXTURE_FEATURES",0,I,"checkTextureFeature",()=>K,"getDepthStencilAttachmentWebGL",()=>O,"getTextureFormatCapabilitiesWebGL",()=>M,"getTextureFormatWebGL",()=>N,"isTextureFeature",()=>J],75783);let P={"depth-clip-control":"EXT_depth_clamp","timer-query-webgl":"EXT_disjoint_timer_query_webgl2","compilation-status-async-webgl":"KHR_parallel_shader_compile","polygon-mode-webgl":"WEBGL_polygon_mode","provoking-vertex-webgl":"WEBGL_provoking_vertex","shader-clip-cull-distance-webgl":"WEBGL_clip_cull_distance","shader-noperspective-interpolation-webgl":"NV_shader_noperspective_interpolation","shader-conservative-depth-webgl":"EXT_conservative_depth"};class Q extends z.DeviceFeatures{gl;extensions;testedFeatures=new Set;constructor(a,b,c){super([],c),this.gl=a,this.extensions=b,w(a,"EXT_color_buffer_float",b)}*[Symbol.iterator](){for(let a of this.getFeatures())this.has(a)&&(yield a);return[]}has(a){return!this.disabledFeatures?.[a]&&(!this.testedFeatures.has(a)&&(this.testedFeatures.add(a),J(a)&&K(this.gl,a,this.extensions)&&this.features.add(a),this.getWebGLFeature(a)&&this.features.add(a)),this.features.has(a))}initializeFeatures(){for(let a of this.getFeatures().filter(a=>"polygon-mode-webgl"!==a))this.has(a)}getFeatures(){return[...Object.keys(P),...Object.keys(I)]}getWebGLFeature(a){let b=P[a];return"string"==typeof b?!!w(this.gl,b,this.extensions):!!b}}a.s(["WebGLDeviceFeatures",()=>Q],94802);var R=z;class S extends R.DeviceLimits{get maxTextureDimension1D(){return 0}get maxTextureDimension2D(){return this.getParameter(3379)}get maxTextureDimension3D(){return this.getParameter(32883)}get maxTextureArrayLayers(){return this.getParameter(35071)}get maxBindGroups(){return 0}get maxDynamicUniformBuffersPerPipelineLayout(){return 0}get maxDynamicStorageBuffersPerPipelineLayout(){return 0}get maxSampledTexturesPerShaderStage(){return this.getParameter(35660)}get maxSamplersPerShaderStage(){return this.getParameter(35661)}get maxStorageBuffersPerShaderStage(){return 0}get maxStorageTexturesPerShaderStage(){return 0}get maxUniformBuffersPerShaderStage(){return this.getParameter(35375)}get maxUniformBufferBindingSize(){return this.getParameter(35376)}get maxStorageBufferBindingSize(){return 0}get minUniformBufferOffsetAlignment(){return this.getParameter(35380)}get minStorageBufferOffsetAlignment(){return 0}get maxVertexBuffers(){return 16}get maxVertexAttributes(){return this.getParameter(34921)}get maxVertexBufferArrayStride(){return 2048}get maxInterStageShaderVariables(){return this.getParameter(35659)}get maxComputeWorkgroupStorageSize(){return 0}get maxComputeInvocationsPerWorkgroup(){return 0}get maxComputeWorkgroupSizeX(){return 0}get maxComputeWorkgroupSizeY(){return 0}get maxComputeWorkgroupSizeZ(){return 0}get maxComputeWorkgroupsPerDimension(){return 0}gl;limits={};constructor(a){super(),this.gl=a}getParameter(a){return void 0===this.limits[a]&&(this.limits[a]=this.gl.getParameter(a)),this.limits[a]||0}}a.s(["WebGLDeviceLimits",()=>S],98390);var T=a.i(7951),U=a.i(53245);class V{static isHTMLCanvas(a){return"undefined"!=typeof HTMLCanvasElement&&a instanceof HTMLCanvasElement}static isOffscreenCanvas(a){return"undefined"!=typeof OffscreenCanvas&&a instanceof OffscreenCanvas}static defaultProps={id:void 0,canvas:null,width:800,height:600,useDevicePixels:!0,autoResize:!0,container:null,visible:!0,alphaMode:"opaque",colorSpace:"srgb",trackPosition:!1};id;props;canvas;htmlCanvas;offscreenCanvas;type;initialized;isInitialized=!1;isVisible=!0;cssWidth;cssHeight;devicePixelRatio;devicePixelWidth;devicePixelHeight;drawingBufferWidth;drawingBufferHeight;_initializedResolvers=(function(){let a,b;return{promise:new Promise((c,d)=>{a=c,b=d}),resolve:a,reject:b}})();_resizeObserver;_intersectionObserver;_position;destroyed=!1;toString(){return`${this[Symbol.toStringTag]}(${this.id})`}constructor(a){if(this.props={...V.defaultProps,...a},a=this.props,this.initialized=this._initializedResolvers.promise,(0,T.isBrowser)()?a.canvas?"string"==typeof a.canvas?this.canvas=function(a){let b=document.getElementById(a);if(!V.isHTMLCanvas(b))throw Error("Object is not a canvas element");return b}(a.canvas):this.canvas=a.canvas:this.canvas=function(a){let{width:b,height:c}=a,d=document.createElement("canvas");d.id=(0,U.uid)("lumagl-auto-created-canvas"),d.width=b||1,d.height=c||1,d.style.width=Number.isFinite(b)?`${b}px`:"100%",d.style.height=Number.isFinite(c)?`${c}px`:"100%",a?.visible||(d.style.visibility="hidden");let e=function(a){if("string"==typeof a){let b=document.getElementById(a);if(!b)throw Error(`${a} is not an HTML element`);return b}return a||document.body}(a?.container||null);return e.insertBefore(d,e.firstChild),d}(a):this.canvas={width:a.width||1,height:a.height||1},V.isHTMLCanvas(this.canvas)?(this.id=a.id||this.canvas.id,this.type="html-canvas",this.htmlCanvas=this.canvas):V.isOffscreenCanvas(this.canvas)?(this.id=a.id||"offscreen-canvas",this.type="offscreen-canvas",this.offscreenCanvas=this.canvas):(this.id=a.id||"node-canvas-context",this.type="node"),this.cssWidth=this.htmlCanvas?.clientWidth||this.canvas.width,this.cssHeight=this.htmlCanvas?.clientHeight||this.canvas.height,this.devicePixelWidth=this.canvas.width,this.devicePixelHeight=this.canvas.height,this.drawingBufferWidth=this.canvas.width,this.drawingBufferHeight=this.canvas.height,this.devicePixelRatio=globalThis.devicePixelRatio||1,this._position=[0,0],V.isHTMLCanvas(this.canvas)){this._intersectionObserver=new IntersectionObserver(a=>this._handleIntersection(a)),this._intersectionObserver.observe(this.canvas),this._resizeObserver=new ResizeObserver(a=>this._handleResize(a));try{this._resizeObserver.observe(this.canvas,{box:"device-pixel-content-box"})}catch{this._resizeObserver.observe(this.canvas,{box:"content-box"})}setTimeout(()=>this._observeDevicePixelRatio(),0),this.props.trackPosition&&this._trackPosition()}}destroy(){this.destroyed=!0}setProps(a){return"useDevicePixels"in a&&(this.props.useDevicePixels=a.useDevicePixels||!1,this._updateDrawingBufferSize()),this}getCSSSize(){return[this.cssWidth,this.cssHeight]}getPosition(){return this._position}getDevicePixelSize(){return[this.devicePixelWidth,this.devicePixelHeight]}getDrawingBufferSize(){return[this.drawingBufferWidth,this.drawingBufferHeight]}getMaxDrawingBufferSize(){let a=this.device.limits.maxTextureDimension2D;return[a,a]}setDrawingBufferSize(a,b){this.canvas.width=a,this.canvas.height=b,this.drawingBufferWidth=a,this.drawingBufferHeight=b}getDevicePixelRatio(){return 1}cssToDevicePixels(a,b=!0){var c,d,e,f,g;let h,i,j,k,l,m=this.cssToDeviceRatio(),[n,o]=this.getDrawingBufferSize();return c=a,d=m,e=n,f=o,g=b,i=W(c[0],d,e),j=X(c[1],d,f,g),l=(k=W(c[0]+1,d,e))===e-1?k:k-1,k=X(c[1]+1,d,f,g),g?(k=0===k?k:k+1,h=j,j=k):h=k===f-1?k:k-1,{x:i,y:j,width:Math.max(l-i+1,1),height:Math.max(h-j+1,1)}}getPixelSize(){return this.getDevicePixelSize()}getAspect(){let[a,b]=this.getDevicePixelSize();return a/b}cssToDeviceRatio(){try{let[a]=this.getDrawingBufferSize(),[b]=this.getCSSSize();return b?a/b:1}catch{return 1}}resize(a){this.setDrawingBufferSize(a.width,a.height)}_setAutoCreatedCanvasId(a){this.htmlCanvas?.id==="lumagl-auto-created-canvas"&&(this.htmlCanvas.id=a)}_handleIntersection(a){let b=a.find(a=>a.target===this.canvas);if(!b)return;let c=b.isIntersecting;this.isVisible!==c&&(this.isVisible=c,this.device.props.onVisibilityChange(this))}_handleResize(a){let b=a.find(a=>a.target===this.canvas);if(!b)return;this.cssWidth=b.contentBoxSize[0].inlineSize,this.cssHeight=b.contentBoxSize[0].blockSize;let c=this.getDevicePixelSize(),d=b.devicePixelContentBoxSize?.[0].inlineSize||b.contentBoxSize[0].inlineSize*devicePixelRatio,e=b.devicePixelContentBoxSize?.[0].blockSize||b.contentBoxSize[0].blockSize*devicePixelRatio,[f,g]=this.getMaxDrawingBufferSize();this.devicePixelWidth=Math.max(1,Math.min(d,f)),this.devicePixelHeight=Math.max(1,Math.min(e,g)),this._updateDrawingBufferSize(),this.device.props.onResize(this,{oldPixelSize:c})}_updateDrawingBufferSize(){if(this.props.autoResize){if("number"==typeof this.props.useDevicePixels){let a=this.props.useDevicePixels;this.setDrawingBufferSize(this.cssWidth*a,this.cssHeight*a)}else this.props.useDevicePixels?this.setDrawingBufferSize(this.devicePixelWidth,this.devicePixelHeight):this.setDrawingBufferSize(this.cssWidth,this.cssHeight);this._updateDevice()}this._initializedResolvers.resolve(),this.isInitialized=!0,this.updatePosition()}_observeDevicePixelRatio(){let a=this.devicePixelRatio;this.devicePixelRatio=window.devicePixelRatio,this.updatePosition(),this.device.props.onDevicePixelRatioChange(this,{oldRatio:a}),matchMedia(`(resolution: ${this.devicePixelRatio}dppx)`).addEventListener("change",()=>this._observeDevicePixelRatio(),{once:!0})}_trackPosition(a=100){let b=setInterval(()=>{this.destroyed?clearInterval(b):this.updatePosition()},a)}updatePosition(){let a=this.htmlCanvas?.getBoundingClientRect();if(a){let b=[a.left,a.top];if(this._position??=b,b[0]!==this._position[0]||b[1]!==this._position[1]){let a=this._position;this._position=b,this.device.props.onPositionChange?.(this,{oldPosition:a})}}}}function W(a,b,c){return Math.min(Math.round(a*b),c-1)}function X(a,b,c,d){return d?Math.max(0,c-1-Math.round(a*b)):Math.min(Math.round(a*b),c-1)}var Y=a.i(74968),Z=Y,$=Y;class _ extends $.Resource{static defaultProps={...$.Resource.defaultProps,type:"color-sampler",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge",magFilter:"nearest",minFilter:"nearest",mipmapFilter:"none",lodMinClamp:0,lodMaxClamp:32,compare:"less-equal",maxAnisotropy:1};get[Symbol.toStringTag](){return"Sampler"}constructor(a,b){super(a,b=_.normalizeProps(a,b),_.defaultProps)}static normalizeProps(a,b){return b}}a.s(["Sampler",()=>_],82475);var aa=a.i(96893);let ab={"1d":"1d","2d":"2d","2d-array":"2d",cube:"2d","cube-array":"2d","3d":"3d"};class ac extends Z.Resource{static SAMPLE=4;static STORAGE=8;static RENDER=16;static COPY_SRC=1;static COPY_DST=2;static TEXTURE=4;static RENDER_ATTACHMENT=16;dimension;baseDimension;format;width;height;depth;mipLevels;updateTimestamp;get[Symbol.toStringTag](){return"Texture"}toString(){return`Texture(${this.id},${this.format},${this.width}x${this.height})`}constructor(a,b){if(super(a,b=ac.normalizeProps(a,b),ac.defaultProps),this.dimension=this.props.dimension,this.baseDimension=ab[this.dimension],this.format=this.props.format,this.width=this.props.width,this.height=this.props.height,this.depth=this.props.depth,this.mipLevels=this.props.mipLevels,void 0===this.props.width||void 0===this.props.height)if(a.isExternalImage(b.data)){const c=a.getExternalImageSize(b.data);this.width=c?.width||1,this.height=c?.height||1}else this.width=1,this.height=1,(void 0===this.props.width||void 0===this.props.height)&&aa.log.warn(`${this} created with undefined width or height. This is deprecated. Use AsyncTexture instead.`)();this.updateTimestamp=a.incrementTimestamp()}setSampler(a){this.sampler=a instanceof _?a:this.device.createSampler(a)}clone(a){return this.device.createTexture({...this.props,...a})}static normalizeProps(a,b){let c={...b},{width:d,height:e}=c;return"number"==typeof d&&(c.width=Math.max(1,Math.ceil(d))),"number"==typeof e&&(c.height=Math.max(1,Math.ceil(e))),c}_initializeData(a){this.device.isExternalImage(a)?this.copyExternalImage({image:a,width:this.width,height:this.height,depth:this.depth,mipLevel:0,x:0,y:0,z:0,aspect:"all",colorSpace:"srgb",premultipliedAlpha:!1,flipY:!1}):a&&this.copyImageData({data:a,mipLevel:0,x:0,y:0,z:0,aspect:"all"})}_normalizeCopyImageDataOptions(a){let{width:b,height:c,depth:d}=this,e={...ac.defaultCopyDataOptions,width:b,height:c,depth:d,...a},f=this.device.getTextureFormatInfo(this.format);if(!a.bytesPerRow&&!f.bytesPerPixel)throw Error(`bytesPerRow must be provided for texture format ${this.format}`);return e.bytesPerRow=a.bytesPerRow||b*(f.bytesPerPixel||4),e.rowsPerImage=a.rowsPerImage||c,e}_normalizeCopyExternalImageOptions(a){let b=this.device.getExternalImageSize(a.image),c={...ac.defaultCopyExternalImageOptions,...b,...a};return c.width=Math.min(c.width,this.width-c.x),c.height=Math.min(c.height,this.height-c.y),c}static defaultProps={...Z.Resource.defaultProps,data:null,dimension:"2d",format:"rgba8unorm",usage:ac.TEXTURE|ac.RENDER_ATTACHMENT|ac.COPY_DST,width:void 0,height:void 0,depth:1,mipLevels:1,samples:void 0,sampler:{},view:void 0};static defaultCopyDataOptions={data:void 0,byteOffset:0,bytesPerRow:void 0,rowsPerImage:void 0,mipLevel:0,x:0,y:0,z:0,aspect:"all"};static defaultCopyExternalImageOptions={image:void 0,sourceX:0,sourceY:0,width:void 0,height:void 0,depth:1,mipLevel:0,x:0,y:0,z:0,aspect:"all",colorSpace:"srgb",premultipliedAlpha:!1,flipY:!1}}a.s(["Texture",()=>ac],10391);class ad extends Y.Resource{get[Symbol.toStringTag](){return"Framebuffer"}width;height;constructor(a,b={}){super(a,b,ad.defaultProps),this.width=this.props.width,this.height=this.props.height}clone(a){let b=this.colorAttachments.map(b=>b.texture.clone(a)),c=this.depthStencilAttachment&&this.depthStencilAttachment.texture.clone(a);return this.device.createFramebuffer({...this.props,colorAttachments:b,depthStencilAttachment:c})}resize(a){let b=!a;if(a){let[c,d]=Array.isArray(a)?a:[a.width,a.height];b=b||d!==this.height||c!==this.width,this.width=c,this.height=d}b&&(aa.log.log(2,`Resizing framebuffer ${this.id} to ${this.width}x${this.height}`)(),this.resizeAttachments(this.width,this.height))}autoCreateAttachmentTextures(){if(0===this.props.colorAttachments.length&&!this.props.depthStencilAttachment)throw Error("Framebuffer has noattachments");this.colorAttachments=this.props.colorAttachments.map((a,b)=>{if("string"==typeof a){let c=this.createColorTexture(a,b);return this.attachResource(c),c.view}return a instanceof ac?a.view:a});let a=this.props.depthStencilAttachment;if(a)if("string"==typeof a){let b=this.createDepthStencilTexture(a);this.attachResource(b),this.depthStencilAttachment=b.view}else a instanceof ac?this.depthStencilAttachment=a.view:this.depthStencilAttachment=a}createColorTexture(a,b){return this.device.createTexture({id:`${this.id}-color-attachment-${b}`,usage:ac.RENDER_ATTACHMENT,format:a,width:this.width,height:this.height,sampler:{magFilter:"linear",minFilter:"linear"}})}createDepthStencilTexture(a){return this.device.createTexture({id:`${this.id}-depth-stencil-attachment`,usage:ac.RENDER_ATTACHMENT,format:a,width:this.width,height:this.height})}resizeAttachments(a,b){for(let c=0;c<this.colorAttachments.length;++c)if(this.colorAttachments[c]){let d=this.colorAttachments[c].texture.clone({width:a,height:b});this.destroyAttachedResource(this.colorAttachments[c]),this.colorAttachments[c]=d.view,this.attachResource(d.view)}if(this.depthStencilAttachment){let c=this.depthStencilAttachment.texture.clone({width:a,height:b});this.destroyAttachedResource(this.depthStencilAttachment),this.depthStencilAttachment=c.view,this.attachResource(c)}this.updateAttachments()}static defaultProps={...Y.Resource.defaultProps,width:1,height:1,colorAttachments:[],depthStencilAttachment:null}}a.s(["Framebuffer",()=>ad],74160);class ae extends ad{device;gl;handle;colorAttachments=[];depthStencilAttachment=null;constructor(a,b){super(a,b);const c=null===b.handle;this.device=a,this.gl=a.gl,this.handle=this.props.handle||c?this.props.handle:this.gl.createFramebuffer(),c||(a._setWebGLDebugMetadata(this.handle,this,{spector:this.props}),this.autoCreateAttachmentTextures(),this.updateAttachments())}destroy(){super.destroy(),this.destroyed||null===this.handle||this.gl.deleteFramebuffer(this.handle)}updateAttachments(){let a=this.gl.bindFramebuffer(36160,this.handle);for(let a=0;a<this.colorAttachments.length;++a){let b=this.colorAttachments[a];if(b){let c=36064+a;this._attachTextureView(c,b)}}if(this.depthStencilAttachment){let a=O(this.depthStencilAttachment.props.format);this._attachTextureView(a,this.depthStencilAttachment)}if(this.device.props.debug){let a=this.gl.checkFramebufferStatus(36160);if(36053!==a)throw Error(`Framebuffer ${function(a){switch(a){case 36053:return"success";case 36054:return"Mismatched attachments";case 36055:return"No attachments";case 36057:return"Height/width mismatch";case 36061:return"Unsupported or split attachments";case 36182:return"Samples mismatch";default:return`${a}`}}(a)}`)}this.gl.bindFramebuffer(36160,a)}_attachTextureView(a,b){let{gl:c}=this.device,{texture:d}=b,e=b.props.baseMipLevel,f=b.props.baseArrayLayer;switch(c.bindTexture(d.glTarget,d.handle),d.glTarget){case 35866:case 32879:c.framebufferTextureLayer(36160,a,d.handle,e,f);break;case 34067:var g;let h=(g=f)<34069?g+34069:g;c.framebufferTexture2D(36160,a,h,d.handle,e);break;case 3553:c.framebufferTexture2D(36160,a,3553,d.handle,e);break;default:throw Error("Illegal texture type")}c.bindTexture(d.glTarget,null)}}a.s(["WEBGLFramebuffer",()=>ae],95997);class af extends V{device;handle=null;_framebuffer=null;get[Symbol.toStringTag](){return"WebGLCanvasContext"}constructor(a,b){super(b),this.device=a,this._setAutoCreatedCanvasId(`${this.device.id}-canvas`),this._updateDevice()}getCurrentFramebuffer(){return this._framebuffer=this._framebuffer||new ae(this.device,{handle:null}),this._framebuffer}_updateDevice(){}}a.s(["WebGLCanvasContext",()=>af],37111)},2280,34295,45657,55204,42668,13193,83045,a=>{"use strict";let b;var c=a.i(34161),d=a.i(96893),e=a.i(24962),f=a.i(47711),g=a.i(80001),h=a.i(94802),i=a.i(98390),j=a.i(37111),k=a.i(42931),l=a.i(26315),m=a.i(75783);let n={};var o=a.i(3327);class p extends o.Buffer{device;gl;handle;glTarget;glUsage;glIndexType=5123;byteLength=0;bytesUsed=0;constructor(a,b={}){super(a,b),this.device=a,this.gl=this.device.gl;const c="object"==typeof b?b.handle:void 0;this.handle=c||this.gl.createBuffer(),a._setWebGLDebugMetadata(this.handle,this,{spector:{...this.props,data:typeof this.props.data}}),this.glTarget=function(a){return a&o.Buffer.INDEX?34963:a&o.Buffer.VERTEX?34962:a&o.Buffer.UNIFORM?35345:34962}(this.props.usage),this.glUsage=function(a){return a&o.Buffer.INDEX||a&o.Buffer.VERTEX?35044:a&o.Buffer.UNIFORM?35048:35044}(this.props.usage),this.glIndexType="uint32"===this.props.indexType?5125:5123,b.data?this._initWithData(b.data,b.byteOffset,b.byteLength):this._initWithByteLength(b.byteLength||0)}destroy(){!this.destroyed&&this.handle&&(this.removeStats(),this.trackDeallocatedMemory(),this.gl.deleteBuffer(this.handle),this.destroyed=!0,this.handle=null)}_initWithData(a,b=0,c=a.byteLength+b){let d=this.glTarget;this.gl.bindBuffer(d,this.handle),this.gl.bufferData(d,c,this.glUsage),this.gl.bufferSubData(d,b,a),this.gl.bindBuffer(d,null),this.bytesUsed=c,this.byteLength=c,this._setDebugData(a,b,c),this.trackAllocatedMemory(c)}_initWithByteLength(a){let b=a;0===a&&(b=new Float32Array(0));let c=this.glTarget;return this.gl.bindBuffer(c,this.handle),this.gl.bufferData(c,b,this.glUsage),this.gl.bindBuffer(c,null),this.bytesUsed=a,this.byteLength=a,this._setDebugData(null,0,a),this.trackAllocatedMemory(a),this}write(a,b=0){let c=ArrayBuffer.isView(a)?a:new Uint8Array(a);this.gl.bindBuffer(36663,this.handle),this.gl.bufferSubData(36663,b,c),this.gl.bindBuffer(36663,null),this._setDebugData(a,b,a.byteLength)}async mapAndWriteAsync(a,b=0,c=this.byteLength-b){let d=new ArrayBuffer(c);await a(d,"copied"),this.write(d,b)}async readAsync(a=0,b){return this.readSyncWebGL(a,b)}async mapAndReadAsync(a,b=0,c){let d=await this.readAsync(b,c);return await a(d.buffer,"copied")}readSyncWebGL(a=0,b){let c=new Uint8Array(b=b??this.byteLength-a);return this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,a,c,0,b),this.gl.bindBuffer(36662,null),this._setDebugData(c,a,b),c}}var q=a.i(74968),r=a.i(53245);function s(a,b,c,d){if(d?.inlineSource){let d=function(a,b,c){let d="";for(let c=b-2;c<=b;c++){let e=a[c-1];void 0!==e&&(d+=t(e,b,void 0))}return d}(b,c),e=a.linePos>0?`${" ".repeat(a.linePos+5)}^^^
`:"";return`
${d}${e}${a.type.toUpperCase()}: ${a.message}

`}let e="error"===a.type?"red":"#8B4000";return d?.html?`<div class='luma-compiler-log-error' style="color:${e};"><b> ${a.type.toUpperCase()}: ${a.message}</b></div>`:`${a.type.toUpperCase()}: ${a.message}`}function t(a,b,c){let d=c?.html?a.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;"):a;return`${function(a,b){let c="";for(let b=a.length;b<4;++b)c+=" ";return c+a}(String(b),4)}: ${d}${c?.html?"<br/>":"\n"}`}class u extends q.Resource{get[Symbol.toStringTag](){return"Shader"}stage;source;compilationStatus="pending";constructor(a,b){b={...b,debugShaders:b.debugShaders||a.props.debugShaders||"errors"},super(a,{id:function(a){return function(a,b="unnamed"){let c=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/.exec(a);return c?c[1]:b}(a.source)||a.id||(0,r.uid)(`unnamed ${a.stage}-shader`)}(b),...b},u.defaultProps),this.stage=this.props.stage,this.source=this.props.source}getCompilationInfoSync(){return null}getTranslatedSource(){return null}async debugShader(){let a=this.props.debugShaders;switch(a){case"never":return;case"errors":if("success"===this.compilationStatus)return}let b=await this.getCompilationInfo();("warnings"!==a||b?.length!==0)&&this._displayShaderLog(b,this.id)}_displayShaderLog(a,b){if("undefined"==typeof document||!document?.createElement)return;let c=`${this.stage} shader "${b}"`,d=function(a,b,c){let d="",e=b.split(/\r?\n/),f=a.slice().sort((a,b)=>a.lineNum-b.lineNum);switch(c?.showSourceCode||"no"){case"all":let g=0;for(let a=1;a<=e.length;a++)for(d+=t(e[a-1],a,c);f.length>g&&f[g].lineNum===a;){let a=f[g++];d+=s(a,e,a.lineNum,{...c,inlineSource:!1})}for(;f.length>g;)d+=s(f[g++],[],0,{...c,inlineSource:!1});return d;case"issues":case"no":for(let b of a)d+=s(b,e,b.lineNum,{inlineSource:c?.showSourceCode!=="no"});return d}}(a,this.source,{showSourceCode:"all",html:!0}),e=this.getTranslatedSource();e&&(d+=`<br /><br /><h1>Translated Source</h1><br /><br /><code style="user-select:text;"><pre>${e}</pre></code>`);let f=document.createElement("Button");f.innerHTML=`
<h1>Compilation error in ${c}</h1><br /><br />
<code style="user-select:text;"><pre>
${d}
</pre></code>`,f.style.top="10px",f.style.left="10px",f.style.position="absolute",f.style.zIndex="9999",f.style.width="100%",f.style.textAlign="left",document.body.appendChild(f);let g=document.getElementsByClassName("luma-compiler-log-error");g[0]?.scrollIntoView(),f.onclick=()=>{let a=`data:text/plain,${encodeURIComponent(this.source)}`;navigator.clipboard.writeText(a)}}static defaultProps={...q.Resource.defaultProps,language:"auto",stage:void 0,source:"",sourceMap:null,entryPoint:"main",debugShaders:void 0}}function v(a){let b=a.toLowerCase();return["warning","error","info"].includes(b)?b:"info"}a.s(["Shader",()=>u],34295);class w extends u{device;handle;constructor(a,b){switch(super(a,b),this.device=a,this.props.stage){case"vertex":this.handle=this.props.handle||this.device.gl.createShader(35633);break;case"fragment":this.handle=this.props.handle||this.device.gl.createShader(35632);break;default:throw Error(this.props.stage)}a._setWebGLDebugMetadata(this.handle,this,{spector:this.props}),this._compile(this.source)}destroy(){this.handle&&(this.removeStats(),this.device.gl.deleteShader(this.handle),this.destroyed=!0,this.handle.destroyed=!0)}get asyncCompilationStatus(){return this._waitForCompilationComplete().then(()=>(this._getCompilationStatus(),this.compilationStatus))}async getCompilationInfo(){return await this._waitForCompilationComplete(),this.getCompilationInfoSync()}getCompilationInfoSync(){let a=this.device.gl.getShaderInfoLog(this.handle);return a?function(a){let b=a.split(/\r?\n/),c=[];for(let a of b){if(a.length<=1)continue;let b=a.split(":");if(2===b.length){let[a,d]=b;c.push({message:d.trim(),type:v(a),lineNum:0,linePos:0});continue}let[d,e,f,...g]=b,h=parseInt(f,10);isNaN(h)&&(h=0);let i=parseInt(e,10);isNaN(i)&&(i=0),c.push({message:g.join(":").trim(),type:v(d),lineNum:h,linePos:i})}return c}(a):[]}getTranslatedSource(){let a=this.device.getExtension("WEBGL_debug_shaders").WEBGL_debug_shaders;return a?.getTranslatedShaderSource(this.handle)||null}async _compile(a){a=a.startsWith("#version ")?a:`#version 300 es
${a}`;let{gl:b}=this.device;if(b.shaderSource(this.handle,a),b.compileShader(this.handle),!this.device.props.debug){this.compilationStatus="pending";return}if(!this.device.features.has("compilation-status-async-webgl")){if(this._getCompilationStatus(),this.debugShader(),"error"===this.compilationStatus)throw Error(`GLSL compilation errors in ${this.props.stage} shader ${this.props.id}`);return}d.log.once(1,"Shader compilation is asynchronous")(),await this._waitForCompilationComplete(),d.log.info(2,`Shader ${this.id} - async compilation complete: ${this.compilationStatus}`)(),this._getCompilationStatus(),this.debugShader()}async _waitForCompilationComplete(){let a=async a=>await new Promise(b=>setTimeout(b,a));if(!this.device.features.has("compilation-status-async-webgl"))return void await a(10);let{gl:b}=this.device;for(;;){if(b.getShaderParameter(this.handle,37297))return;await a(10)}}_getCompilationStatus(){this.compilationStatus=this.device.gl.getShaderParameter(this.handle,35713)?"success":"error"}}var x=a.i(82475),y=a.i(22002);function z(a,b){return D(a,b,{never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519})}function A(a,b){return D(a,b,{keep:7680,zero:0,replace:7681,invert:5386,"increment-clamp":7682,"decrement-clamp":7683,"increment-wrap":34055,"decrement-wrap":34056})}function B(a,b){return D(a,b,{add:32774,subtract:32778,"reverse-subtract":32779,min:32775,max:32776})}function C(a,b,c="color"){return D(a,b,{one:1,zero:0,src:768,"one-minus-src":769,dst:774,"one-minus-dst":775,"src-alpha":770,"one-minus-src-alpha":771,"dst-alpha":772,"one-minus-dst-alpha":773,"src-alpha-saturated":776,constant:"color"===c?32769:32771,"one-minus-constant":"color"===c?32770:32772,src1:768,"one-minus-src1":769,"src1-alpha":770,"one-minus-src1-alpha":771})}function D(a,b,c){if(!(b in c))throw Error(`Illegal parameter ${b} for ${a}`);return c[b]}function E(a){let b={};return a.addressModeU&&(b[10242]=F(a.addressModeU)),a.addressModeV&&(b[10243]=F(a.addressModeV)),a.addressModeW&&(b[32882]=F(a.addressModeW)),a.magFilter&&(b[10240]=G(a.magFilter)),(a.minFilter||a.mipmapFilter)&&(b[10241]=function(a,b="none"){if(!b)return G(a);switch(b){case"none":return G(a);case"nearest":switch(a){case"nearest":return 9984;case"linear":return 9985}break;case"linear":switch(a){case"nearest":return 9986;case"linear":return 9987}}}(a.minFilter||"linear",a.mipmapFilter)),void 0!==a.lodMinClamp&&(b[33082]=a.lodMinClamp),void 0!==a.lodMaxClamp&&(b[33083]=a.lodMaxClamp),"comparison-sampler"===a.type&&(b[34892]=34894),a.compare&&(b[34893]=z("compare",a.compare)),a.maxAnisotropy&&(b[34046]=a.maxAnisotropy),b}function F(a){switch(a){case"clamp-to-edge":return 33071;case"repeat":return 10497;case"mirror-repeat":return 33648}}function G(a){switch(a){case"nearest":return 9728;case"linear":return 9729}}class H extends x.Sampler{device;handle;parameters;constructor(a,b){super(a,b),this.device=a,this.parameters=E(b),this.handle=b.handle||this.device.gl.createSampler(),this._setSamplerParameters(this.parameters)}destroy(){this.handle&&(this.device.gl.deleteSampler(this.handle),this.handle=void 0)}toString(){return`Sampler(${this.id},${JSON.stringify(this.props)})`}_setSamplerParameters(a){for(let[b,c]of Object.entries(a)){let a=Number(b);switch(a){case 33082:case 33083:this.device.gl.samplerParameterf(this.handle,a,c);break;default:this.device.gl.samplerParameteri(this.handle,a,c)}}}}var I=a.i(10391);function J(a,b,c){let d;if(function(a){for(let b in a)return!1;return!0}(b))return c(a);let{nocatch:f=!0}=b,g=e.WebGLStateTracker.get(a);if(g.push(),(0,y.setGLParameters)(a,b),f)d=c(a),g.pop();else try{d=c(a)}finally{g.pop()}return d}var K=q;class L extends K.Resource{get[Symbol.toStringTag](){return"TextureView"}constructor(a,b){super(a,b,L.defaultProps)}static defaultProps={...K.Resource.defaultProps,format:void 0,dimension:void 0,aspect:"all",baseMipLevel:0,mipLevelCount:void 0,baseArrayLayer:0,arrayLayerCount:void 0}}a.s(["TextureView",()=>L],45657);class M extends L{device;gl;handle;texture;constructor(a,b){super(a,{...I.Texture.defaultProps,...b}),this.device=a,this.gl=this.device.gl,this.handle=null,this.texture=b.texture}}class N extends I.Texture{device;gl;handle;sampler=void 0;view;glTarget;glFormat;glType;glInternalFormat;compressed;_textureUnit=0;constructor(a,b){super(a,b),this.device=a,this.gl=this.device.gl;const c=(0,m.getTextureFormatWebGL)(this.props.format);this.glTarget=function(a){switch(a){case"1d":break;case"2d":return 3553;case"3d":return 32879;case"cube":return 34067;case"2d-array":return 35866}throw Error(a)}(this.props.dimension),this.glInternalFormat=c.internalFormat,this.glFormat=c.format,this.glType=c.type,this.compressed=c.compressed,this.handle=this.props.handle||this.gl.createTexture(),this.device._setWebGLDebugMetadata(this.handle,this,{spector:this.props}),this.gl.bindTexture(this.glTarget,this.handle);const{dimension:d,width:e,height:f,depth:g,mipLevels:h,glTarget:i,glInternalFormat:j}=this;switch(d){case"2d":case"cube":this.gl.texStorage2D(i,h,j,e,f);break;case"2d-array":case"3d":this.gl.texStorage3D(i,h,j,e,f,g);break;default:throw Error(d)}this.gl.bindTexture(this.glTarget,null),this._initializeData(b.data),this.setSampler(this.props.sampler),this.view=new M(this.device,{...this.props,texture:this}),Object.seal(this)}destroy(){this.handle&&(this.gl.deleteTexture(this.handle),this.removeStats(),this.trackDeallocatedMemory("Texture"),this.destroyed=!0)}createView(a){return new M(this.device,{...a,texture:this})}setSampler(a={}){super.setSampler(a);let b=E(this.sampler.props);this._setSamplerParameters(b)}copyImageData(a){let b,c=this._normalizeCopyImageDataOptions(a),d=c.data,{width:e,height:f,depth:g}=this,{mipLevel:h=0,byteOffset:i=0,x:j=0,y:k=0,z:l=0}=c,{glFormat:m,glType:n,compressed:o}=this,p=O(this.glTarget,this.dimension,l);if(!this.compressed){let{bytesPerPixel:a}=this.device.getTextureFormatInfo(this.format);if(a){if(c.bytesPerRow%a!=0)throw Error(`bytesPerRow (${c.bytesPerRow}) must be a multiple of bytesPerPixel (${a}) for ${this.format}`);b=c.bytesPerRow/a}}let q=this.compressed?{}:{...void 0!==b?{3314:b}:{},32878:c.rowsPerImage};this.gl.bindTexture(p,this.handle),J(this.gl,q,()=>{switch(this.dimension){case"2d":case"cube":o?this.gl.compressedTexSubImage2D(p,h,j,k,e,f,m,d,i):this.gl.texSubImage2D(p,h,j,k,e,f,m,n,d,i);break;case"2d-array":case"3d":o?this.gl.compressedTexSubImage3D(p,h,j,k,l,e,f,g,m,d,i):this.gl.texSubImage3D(p,h,j,k,l,e,f,g,m,n,d,i)}}),this.gl.bindTexture(p,null)}copyExternalImage(a){let b=this._normalizeCopyExternalImageOptions(a);if(b.sourceX||b.sourceY)throw Error("WebGL does not support sourceX/sourceY)");let{glFormat:c,glType:d}=this,{image:e,depth:f,mipLevel:g,x:h,y:i,z:j,width:k,height:l}=b,m=O(this.glTarget,this.dimension,f),n=b.flipY?{37440:!0}:{};return this.gl.bindTexture(this.glTarget,this.handle),J(this.gl,n,()=>{switch(this.dimension){case"2d":case"cube":this.gl.texSubImage2D(m,g,h,i,k,l,c,d,e);break;case"2d-array":case"3d":this.gl.texSubImage3D(m,g,h,i,j,k,l,f,c,d,e)}}),this.gl.bindTexture(this.glTarget,null),{width:b.width,height:b.height}}generateMipmapsWebGL(a){if(this.device.isTextureFormatRenderable(this.props.format)&&this.device.isTextureFormatFilterable(this.props.format)||(d.log.warn(`${this} is not renderable or filterable, may not be able to generate mipmaps`)(),a?.force))try{this.gl.bindTexture(this.glTarget,this.handle),this.gl.generateMipmap(this.glTarget)}catch(a){d.log.warn(`Error generating mipmap for ${this}: ${a.message}`)()}finally{this.gl.bindTexture(this.glTarget,null)}}_setSamplerParameters(a){for(let[b,c]of(d.log.log(2,`${this.id} sampler parameters`,this.device.getGLKeys(a))(),this.gl.bindTexture(this.glTarget,this.handle),Object.entries(a))){let a=Number(b);switch(a){case 33082:case 33083:this.gl.texParameterf(this.glTarget,a,c);break;case 10240:case 10241:case 10242:case 10243:case 32882:case 34892:case 34893:this.gl.texParameteri(this.glTarget,a,c);break;case 34046:this.device.features.has("texture-filterable-anisotropic-webgl")&&this.gl.texParameteri(this.glTarget,a,c)}}this.gl.bindTexture(this.glTarget,null)}_getActiveUnit(){return this.gl.getParameter(34016)-33984}_bind(a){let{gl:b}=this;return void 0!==a&&(this._textureUnit=a,b.activeTexture(33984+a)),b.bindTexture(this.glTarget,this.handle),a}_unbind(a){let{gl:b}=this;return void 0!==a&&(this._textureUnit=a,b.activeTexture(33984+a)),b.bindTexture(this.glTarget,null),a}}function O(a,b,c){return"cube"===b?34069+c:a}var P=a.i(95997),Q=q;class R extends Q.Resource{get[Symbol.toStringTag](){return"RenderPipeline"}shaderLayout;bufferLayout;linkStatus="pending";hash="";constructor(a,b){super(a,b,R.defaultProps),this.shaderLayout=this.props.shaderLayout,this.bufferLayout=this.props.bufferLayout||[]}static defaultProps={...Q.Resource.defaultProps,vs:null,vertexEntryPoint:"vertexMain",vsConstants:{},fs:null,fragmentEntryPoint:"fragmentMain",fsConstants:{},shaderLayout:null,bufferLayout:[],topology:"triangle-list",colorAttachmentFormats:void 0,depthStencilAttachmentFormat:void 0,parameters:{},bindings:{},uniforms:{}}}function S(a){return W[a]}function T(a){let[b,c]=V[a],d=U[b]*c;return{primitiveType:b,components:c,byteLength:d,integer:"i32"===b||"u32"===b,signed:"u32"!==b}}a.s(["RenderPipeline",()=>R],55204);let U={f32:4,f16:2,i32:4,u32:4},V={f32:["f32",1],"vec2<f32>":["f32",2],"vec3<f32>":["f32",3],"vec4<f32>":["f32",4],f16:["f16",1],"vec2<f16>":["f16",2],"vec3<f16>":["f16",3],"vec4<f16>":["f16",4],i32:["i32",1],"vec2<i32>":["i32",2],"vec3<i32>":["i32",3],"vec4<i32>":["i32",4],u32:["u32",1],"vec2<u32>":["u32",2],"vec3<u32>":["u32",3],"vec4<u32>":["u32",4]},W={f32:{type:"f32",components:1},f16:{type:"f16",components:1},i32:{type:"i32",components:1},u32:{type:"u32",components:1},"vec2<f32>":{type:"f32",components:2},"vec3<f32>":{type:"f32",components:3},"vec4<f32>":{type:"f32",components:4},"vec2<f16>":{type:"f16",components:2},"vec3<f16>":{type:"f16",components:3},"vec4<f16>":{type:"f16",components:4},"vec2<i32>":{type:"i32",components:2},"vec3<i32>":{type:"i32",components:3},"vec4<i32>":{type:"i32",components:4},"vec2<u32>":{type:"u32",components:2},"vec3<u32>":{type:"u32",components:3},"vec4<u32>":{type:"u32",components:4},"mat2x2<f32>":{type:"f32",components:4},"mat2x3<f32>":{type:"f32",components:6},"mat2x4<f32>":{type:"f32",components:8},"mat3x2<f32>":{type:"f32",components:6},"mat3x3<f32>":{type:"f32",components:9},"mat3x4<f32>":{type:"f32",components:12},"mat4x2<f32>":{type:"f32",components:8},"mat4x3<f32>":{type:"f32",components:12},"mat4x4<f32>":{type:"f32",components:16},"mat2x2<f16>":{type:"f16",components:4},"mat2x3<f16>":{type:"f16",components:6},"mat2x4<f16>":{type:"f16",components:8},"mat3x2<f16>":{type:"f16",components:6},"mat3x3<f16>":{type:"f16",components:9},"mat3x4<f16>":{type:"f16",components:12},"mat4x2<f16>":{type:"f16",components:8},"mat4x3<f16>":{type:"f16",components:12},"mat4x4<f16>":{type:"f16",components:16},"mat2x2<i32>":{type:"i32",components:4},"mat2x3<i32>":{type:"i32",components:6},"mat2x4<i32>":{type:"i32",components:8},"mat3x2<i32>":{type:"i32",components:6},"mat3x3<i32>":{type:"i32",components:9},"mat3x4<i32>":{type:"i32",components:12},"mat4x2<i32>":{type:"i32",components:8},"mat4x3<i32>":{type:"i32",components:12},"mat4x4<i32>":{type:"i32",components:16},"mat2x2<u32>":{type:"u32",components:4},"mat2x3<u32>":{type:"u32",components:6},"mat2x4<u32>":{type:"u32",components:8},"mat3x2<u32>":{type:"u32",components:6},"mat3x3<u32>":{type:"u32",components:9},"mat3x4<u32>":{type:"u32",components:12},"mat4x2<u32>":{type:"u32",components:8},"mat4x3<u32>":{type:"u32",components:12},"mat4x4<u32>":{type:"u32",components:16}};a.s(["getAttributeShaderTypeInfo",()=>T,"getVariableShaderTypeInfo",()=>S],42668);let X={5126:"f32",35664:"vec2<f32>",35665:"vec3<f32>",35666:"vec4<f32>",5124:"i32",35667:"vec2<i32>",35668:"vec3<i32>",35669:"vec4<i32>",5125:"u32",36294:"vec2<u32>",36295:"vec3<u32>",36296:"vec4<u32>",35670:"f32",35671:"vec2<f32>",35672:"vec3<f32>",35673:"vec4<f32>",35674:"mat2x2<f32>",35685:"mat2x3<f32>",35686:"mat2x4<f32>",35687:"mat3x2<f32>",35675:"mat3x3<f32>",35688:"mat3x4<f32>",35689:"mat4x2<f32>",35690:"mat4x3<f32>",35676:"mat4x4<f32>"},Y={35678:{viewDimension:"2d",sampleType:"float"},35680:{viewDimension:"cube",sampleType:"float"},35679:{viewDimension:"3d",sampleType:"float"},35682:{viewDimension:"3d",sampleType:"depth"},36289:{viewDimension:"2d-array",sampleType:"float"},36292:{viewDimension:"2d-array",sampleType:"depth"},36293:{viewDimension:"cube",sampleType:"float"},36298:{viewDimension:"2d",sampleType:"sint"},36299:{viewDimension:"3d",sampleType:"sint"},36300:{viewDimension:"cube",sampleType:"sint"},36303:{viewDimension:"2d-array",sampleType:"uint"},36306:{viewDimension:"2d",sampleType:"uint"},36307:{viewDimension:"3d",sampleType:"uint"},36308:{viewDimension:"cube",sampleType:"uint"},36311:{viewDimension:"2d-array",sampleType:"uint"}},Z={uint8:5121,sint8:5120,unorm8:5121,snorm8:5120,uint16:5123,sint16:5122,unorm16:5123,snorm16:5122,uint32:5125,sint32:5124,float16:5131,float32:5126};class $ extends R{device;handle;vs;fs;introspectedLayout;uniforms={};bindings={};varyings=null;_uniformCount=0;_uniformSetters={};get[Symbol.toStringTag](){return"WEBGLRenderPipeline"}constructor(a,b){super(a,b),this.device=a,this.handle=this.props.handle||this.device.gl.createProgram(),this.device._setWebGLDebugMetadata(this.handle,this,{spector:{id:this.props.id}}),this.vs=b.vs,this.fs=b.fs;const{varyings:c,bufferMode:e=35981}=b;c&&c.length>0&&(this.varyings=c,this.device.gl.transformFeedbackVaryings(this.handle,c,e)),this._linkShaders(),d.log.time(3,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.introspectedLayout=function(a,b){let c={attributes:[],bindings:[]};for(let d of(c.attributes=function(a,b){let c=[],d=a.getProgramParameter(b,35721);for(let e=0;e<d;e++){let d=a.getActiveAttrib(b,e);if(!d)throw Error("activeInfo");let{name:f,type:g}=d,h=a.getAttribLocation(b,f);if(h>=0){let a=X[g],b=/instance/i.test(f)?"instance":"vertex";c.push({name:f,location:h,stepMode:b,type:a})}}return c.sort((a,b)=>a.location-b.location),c}(a,b),function(a,b){let c=(c,d)=>a.getActiveUniformBlockParameter(b,c,d),d=[],e=a.getProgramParameter(b,35382);for(let f=0;f<e;f++){let e={name:a.getActiveUniformBlockName(b,f)||"",location:c(f,35391),byteLength:c(f,35392),vertex:c(f,35396),fragment:c(f,35398),uniformCount:c(f,35394),uniforms:[]},g=c(f,35395)||[],h=a.getActiveUniforms(b,g,35383),i=a.getActiveUniforms(b,g,35384),j=a.getActiveUniforms(b,g,35387),k=a.getActiveUniforms(b,g,35388);for(let c=0;c<e.uniformCount;++c){let d=a.getActiveUniform(b,g[c]);if(!d)throw Error("activeInfo");let f=X[h[c]];e.uniforms.push({name:d.name,format:f,type:h[c],arrayLength:i[c],byteOffset:j[c],byteStride:k[c]})}d.push(e)}return d.sort((a,b)=>a.location-b.location),d}(a,b))){let a=d.uniforms.map(a=>({name:a.name,format:a.format,byteOffset:a.byteOffset,byteStride:a.byteStride,arrayLength:a.arrayLength}));c.bindings.push({type:"uniform",name:d.name,group:0,location:d.location,visibility:!!d.vertex&2*!!d.fragment,minBindingSize:d.byteLength,uniforms:a})}let d=function(a,b){let c=[],d=a.getProgramParameter(b,35718);for(let e=0;e<d;e++){let d=a.getActiveUniform(b,e);if(!d)throw Error("activeInfo");let{name:f,size:g,type:h}=d,{name:i,isArray:j}=function(a){if("]"!==a[a.length-1])return{name:a,length:1,isArray:!1};let b=/([^[]*)(\[[0-9]+\])?/.exec(a);if(!b||b.length<2)throw Error(`Failed to parse GLSL uniform name ${a}`);return{name:b[1],length:+!!b[2],isArray:!!b[2]}}(f),k=a.getUniformLocation(b,i),l={location:k,name:i,size:g,type:h,isArray:j};if(c.push(l),l.size>1)for(let d=0;d<l.size;d++){let e=`${i}[${d}]`;k=a.getUniformLocation(b,e);let f={...l,name:e,location:k};c.push(f)}}return c}(a,b),e=0;for(let a of d)if(Y[a.type]){let{viewDimension:b,sampleType:d}=Y[a.type];c.bindings.push({type:"texture",name:a.name,group:0,location:e,viewDimension:b,sampleType:d}),a.textureUnit=e,e+=1}d.length&&(c.uniforms=d);let f=function(a,b){let c=[],d=a.getProgramParameter(b,35971);for(let e=0;e<d;e++){let d=a.getTransformFeedbackVarying(b,e);if(!d)throw Error("activeInfo");let{name:f,type:g,size:h}=d,{type:i,components:j}=W[X[g]];c.push({location:e,name:f,type:i,size:h*j})}return c.sort((a,b)=>a.location-b.location),c}(a,b);return f?.length&&(c.varyings=f),c}(this.device.gl,this.handle),d.log.timeEnd(3,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.shaderLayout=b.shaderLayout?function(a,b){let c={...a,attributes:a.attributes.map(a=>({...a}))};for(let a of b?.attributes||[]){let b=c.attributes.find(b=>b.name===a.name);b?(b.type=a.type||b.type,b.stepMode=a.stepMode||b.stepMode):d.log.warn(`shader layout attribute ${a.name} not present in shader`)}return c}(this.introspectedLayout,b.shaderLayout):this.introspectedLayout}destroy(){this.handle&&(this.device.gl.useProgram(null),this.device.gl.deleteProgram(this.handle),this.destroyed=!0,this.handle.destroyed=!0,this.handle=null)}setBindings(a,b){for(let[c,e]of Object.entries(a)){let a=this.shaderLayout.bindings.find(a=>a.name===c)||this.shaderLayout.bindings.find(a=>a.name===`${c}Uniforms`);if(!a){let a=this.shaderLayout.bindings.map(a=>`"${a.name}"`).join(", ");b?.disableWarnings||d.log.warn(`No binding "${c}" in render pipeline "${this.id}", expected one of ${a}`,e)();continue}switch(!e&&d.log.warn(`Unsetting binding "${c}" in render pipeline "${this.id}"`)(),a.type){case"uniform":if(!(e instanceof p)&&!(e.buffer instanceof p))throw Error("buffer value");break;case"texture":if(!(e instanceof M||e instanceof N||e instanceof P.WEBGLFramebuffer))throw Error(`${this} Bad texture binding for ${c}`);break;case"sampler":d.log.warn(`Ignoring sampler ${c}`)();break;default:throw Error(a.type)}this.bindings[c]=e}}draw(a){let{renderPass:b,parameters:c=this.props.parameters,topology:e=this.props.topology,vertexArray:f,vertexCount:g,instanceCount:h,isInstanced:i=!1,firstVertex:j=0,transformFeedback:k}=a,l=function(a){switch(a){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 3;case"triangle-list":return 4;case"triangle-strip":return 5;default:throw Error(a)}}(e),m=!!f.indexBuffer,n=f.indexBuffer?.glIndexType;return"success"!==this.linkStatus?(d.log.info(2,`RenderPipeline:${this.id}.draw() aborted - waiting for shader linking`)(),!1):this._areTexturesRenderable()?(this.device.gl.useProgram(this.handle),f.bindBeforeRender(b),k&&k.begin(this.props.topology),this._applyBindings(),this._applyUniforms(),!function(a,b,c,e){if(function(a){let b=!0;for(let c in a){b=!1;break}return b}(b))return e(a);a.pushState();try{return function(a,b){let{gl:c}=a;if(b.cullMode)switch(b.cullMode){case"none":c.disable(2884);break;case"front":c.enable(2884),c.cullFace(1028);break;case"back":c.enable(2884),c.cullFace(1029)}if(b.frontFace&&c.frontFace(D("frontFace",b.frontFace,{ccw:2305,cw:2304})),b.unclippedDepth&&a.features.has("depth-clip-control")&&c.enable(34383),void 0!==b.depthBias&&(c.enable(32823),c.polygonOffset(b.depthBias,b.depthBiasSlopeScale||0)),b.provokingVertex&&a.features.has("provoking-vertex-webgl")){let c=a.getExtension("WEBGL_provoking_vertex").WEBGL_provoking_vertex,d=D("provokingVertex",b.provokingVertex,{first:36429,last:36430});c?.provokingVertexWEBGL(d)}if((b.polygonMode||b.polygonOffsetLine)&&a.features.has("polygon-mode-webgl")){if(b.polygonMode){let c=a.getExtension("WEBGL_polygon_mode").WEBGL_polygon_mode,d=D("polygonMode",b.polygonMode,{fill:6914,line:6913});c?.polygonModeWEBGL(1028,d),c?.polygonModeWEBGL(1029,d)}b.polygonOffsetLine&&c.enable(10754)}if(a.features.has("shader-clip-cull-distance-webgl")&&(b.clipDistance0&&c.enable(12288),b.clipDistance1&&c.enable(12289),b.clipDistance2&&c.enable(12290),b.clipDistance3&&c.enable(12291),b.clipDistance4&&c.enable(12292),b.clipDistance5&&c.enable(12293),b.clipDistance6&&c.enable(12294),b.clipDistance7&&c.enable(12295)),void 0!==b.depthWriteEnabled&&c.depthMask(b.depthWriteEnabled),b.depthCompare&&("always"!==b.depthCompare?c.enable(2929):c.disable(2929),c.depthFunc(z("depthCompare",b.depthCompare))),b.stencilWriteMask){let a=b.stencilWriteMask;c.stencilMaskSeparate(1028,a),c.stencilMaskSeparate(1029,a)}if(b.stencilReadMask&&d.log.warn("stencilReadMask not supported under WebGL"),b.stencilCompare){let a=b.stencilReadMask||0xffffffff,d=z("depthCompare",b.stencilCompare);"always"!==b.stencilCompare?c.enable(2960):c.disable(2960),c.stencilFuncSeparate(1028,d,0,a),c.stencilFuncSeparate(1029,d,0,a)}if(b.stencilPassOperation&&b.stencilFailOperation&&b.stencilDepthFailOperation){let a=A("stencilPassOperation",b.stencilPassOperation),d=A("stencilFailOperation",b.stencilFailOperation),e=A("stencilDepthFailOperation",b.stencilDepthFailOperation);c.stencilOpSeparate(1028,d,e,a),c.stencilOpSeparate(1029,d,e,a)}switch(b.blend){case!0:c.enable(3042);break;case!1:c.disable(3042)}if(b.blendColorOperation||b.blendAlphaOperation){let a=B("blendColorOperation",b.blendColorOperation||"add"),d=B("blendAlphaOperation",b.blendAlphaOperation||"add");c.blendEquationSeparate(a,d);let e=C("blendColorSrcFactor",b.blendColorSrcFactor||"one"),f=C("blendColorDstFactor",b.blendColorDstFactor||"zero"),g=C("blendAlphaSrcFactor",b.blendAlphaSrcFactor||"one"),h=C("blendAlphaDstFactor",b.blendAlphaDstFactor||"zero");c.blendFuncSeparate(e,f,g,h)}}(a,b),(0,y.setGLParameters)(a.gl,c),e(a)}finally{a.popState()}}(this.device,c,b.glParameters,()=>{m&&i?this.device.gl.drawElementsInstanced(l,g||0,n,j,h||0):m?this.device.gl.drawElements(l,g||0,n,j):i?this.device.gl.drawArraysInstanced(l,j,g||0,h||0):this.device.gl.drawArrays(l,j,g||0),k&&k.end()}),f.unbindAfterRender(b),!0):(d.log.info(2,`RenderPipeline:${this.id}.draw() aborted - textures not yet loaded`)(),!1)}async _linkShaders(){let{gl:a}=this.device;if(a.attachShader(this.handle,this.vs.handle),a.attachShader(this.handle,this.fs.handle),d.log.time(4,`linkProgram for ${this.id}`)(),a.linkProgram(this.handle),d.log.timeEnd(4,`linkProgram for ${this.id}`)(),d.log.level,!this.device.features.has("compilation-status-async-webgl")){let a=this._getLinkStatus();this._reportLinkStatus(a);return}d.log.once(1,"RenderPipeline linking is asynchronous")(),await this._waitForLinkComplete(),d.log.info(2,`RenderPipeline ${this.id} - async linking complete: ${this.linkStatus}`)();let b=this._getLinkStatus();this._reportLinkStatus(b)}async _reportLinkStatus(a){if("success"!==a){let b="link-error"===a?"Link error":"Validation error";switch(this.vs.compilationStatus){case"error":throw this.vs.debugShader(),Error(`${this} ${b} during compilation of ${this.vs}`);case"pending":await this.vs.asyncCompilationStatus,this.vs.debugShader()}switch(this.fs?.compilationStatus){case"error":throw this.fs.debugShader(),Error(`${this} ${b} during compilation of ${this.fs}`);case"pending":await this.fs.asyncCompilationStatus,this.fs.debugShader()}let c=this.device.gl.getProgramInfoLog(this.handle);this.device.reportError(Error(`${b} during ${a}: ${c}`),this)(),this.device.debug()}}_getLinkStatus(){let{gl:a}=this.device;return a.getProgramParameter(this.handle,35714)?(a.validateProgram(this.handle),a.getProgramParameter(this.handle,35715))?(this.linkStatus="success","success"):(this.linkStatus="error","validation-error"):(this.linkStatus="error","link-error")}async _waitForLinkComplete(){let a=async a=>await new Promise(b=>setTimeout(b,a));if(!this.device.features.has("compilation-status-async-webgl"))return void await a(10);let{gl:b}=this.device;for(;;){if(b.getProgramParameter(this.handle,37297))return;await a(10)}}_areTexturesRenderable(){let a=!0;for(let b of this.shaderLayout.bindings)this.bindings[b.name]||this.bindings[b.name.replace(/Uniforms$/,"")]||(d.log.warn(`Binding ${b.name} not found in ${this.id}`)(),a=!1);return a}_applyBindings(){if("success"!==this.linkStatus)return;let{gl:a}=this.device;a.useProgram(this.handle);let b=0,c=0;for(let e of this.shaderLayout.bindings){let f=this.bindings[e.name]||this.bindings[e.name.replace(/Uniforms$/,"")];if(!f)throw Error(`No value for binding ${e.name} in ${this.id}`);switch(e.type){case"uniform":let{name:g}=e,h=a.getUniformBlockIndex(this.handle,g);if(0xffffffff===h)throw Error(`Invalid uniform block name ${g}`);a.uniformBlockBinding(this.handle,c,h),f instanceof p?a.bindBufferBase(35345,c,f.handle):a.bindBufferRange(35345,c,f.buffer.handle,f.offset||0,f.size||f.buffer.byteLength-f.offset),c+=1;break;case"texture":let i;if(!(f instanceof M||f instanceof N||f instanceof P.WEBGLFramebuffer))throw Error("texture");if(f instanceof M)i=f.texture;else if(f instanceof N)i=f;else if(f instanceof P.WEBGLFramebuffer&&f.colorAttachments[0]instanceof M)d.log.warn("Passing framebuffer in texture binding may be deprecated. Use fbo.colorAttachments[0] instead")(),i=f.colorAttachments[0].texture;else throw Error("No texture");a.activeTexture(33984+b),a.bindTexture(i.glTarget,i.handle),b+=1;break;case"sampler":break;case"storage":case"read-only-storage":throw Error(`binding type '${e.type}' not supported in WebGL`)}}}_applyUniforms(){for(let a of this.shaderLayout.uniforms||[]){let{name:b,location:c,type:d,textureUnit:e}=a,f=this.uniforms[b]??e;void 0!==f&&function(a,b,c,d){let e=d;!0===e&&(e=1),!1===e&&(e=0);let f="number"==typeof e?[e]:e;switch(c){case 35678:case 35680:case 35679:case 35682:case 36289:case 36292:case 36293:case 36298:case 36299:case 36300:case 36303:case 36306:case 36307:case 36308:case 36311:if("number"!=typeof d)throw Error("samplers must be set to integers");return a.uniform1i(b,d);case 5126:return a.uniform1fv(b,f);case 35664:return a.uniform2fv(b,f);case 35665:return a.uniform3fv(b,f);case 35666:return a.uniform4fv(b,f);case 5124:case 35670:return a.uniform1iv(b,f);case 35667:case 35671:return a.uniform2iv(b,f);case 35668:case 35672:return a.uniform3iv(b,f);case 35669:case 35673:return a.uniform4iv(b,f);case 5125:return a.uniform1uiv(b,f,1);case 36294:return a.uniform2uiv(b,f,2);case 36295:return a.uniform3uiv(b,f,3);case 36296:return a.uniform4uiv(b,f,4);case 35674:return a.uniformMatrix2fv(b,!1,f);case 35675:return a.uniformMatrix3fv(b,!1,f);case 35676:return a.uniformMatrix4fv(b,!1,f);case 35685:return a.uniformMatrix2x3fv(b,!1,f);case 35686:return a.uniformMatrix2x4fv(b,!1,f);case 35687:return a.uniformMatrix3x2fv(b,!1,f);case 35688:return a.uniformMatrix3x4fv(b,!1,f);case 35689:return a.uniformMatrix4x2fv(b,!1,f);case 35690:return a.uniformMatrix4x3fv(b,!1,f)}throw Error("Illegal uniform")}(this.device.gl,c,d,f)}}}var _=q;class aa extends _.Resource{get[Symbol.toStringTag](){return"CommandEncoder"}constructor(a,b){super(a,b,aa.defaultProps)}static defaultProps={..._.Resource.defaultProps,measureExecutionTime:void 0}}var ab=q;class ac extends ab.Resource{get[Symbol.toStringTag](){return"CommandBuffer"}constructor(a,b){super(a,b,ac.defaultProps)}static defaultProps={...ab.Resource.defaultProps}}class ad extends ac{device;handle=null;commands=[];constructor(a){super(a,{}),this.device=a}_executeCommands(a=this.commands){for(let b of a)switch(b.name){case"copy-buffer-to-buffer":!function(a,b){let c=b.sourceBuffer,d=b.destinationBuffer;a.gl.bindBuffer(36662,c.handle),a.gl.bindBuffer(36663,d.handle),a.gl.copyBufferSubData(36662,36663,b.sourceOffset??0,b.destinationOffset??0,b.size),a.gl.bindBuffer(36662,null),a.gl.bindBuffer(36663,null)}(this.device,b.options);break;case"copy-buffer-to-texture":this.device,b.options;throw Error("Not implemented");case"copy-texture-to-buffer":!function(a,b){let c,{sourceTexture:d,mipLevel:e=0,aspect:f="all",width:g=b.sourceTexture.width,height:h=b.sourceTexture.height,depthOrArrayLayers:i=0,origin:j=[0,0],destinationBuffer:k,byteOffset:l=0,bytesPerRow:n,rowsPerImage:o}=b;if("all"!==f)throw Error("aspect not supported in WebGL");if(0!==e||0!==i||n||o)throw Error("not implemented");let{framebuffer:p,destroyFramebuffer:q}=ae(d);try{let b=g||p.width,d=h||p.height,e=(0,m.getTextureFormatWebGL)(p.colorAttachments[0].texture.props.format),f=e.format,i=e.type;a.gl.bindBuffer(35051,k.handle),c=a.gl.bindFramebuffer(36160,p.handle),a.gl.readPixels(j[0],j[1],b,d,f,i,l)}finally{a.gl.bindBuffer(35051,null),void 0!==c&&a.gl.bindFramebuffer(36160,c),q&&p.destroy()}}(this.device,b.options);break;case"copy-texture-to-texture":!function(a,b){let c,d,{sourceTexture:e,destinationMipLevel:f=0,origin:g=[0,0],destinationOrigin:h=[0,0],destinationTexture:i}=b,{width:j=b.destinationTexture.width,height:k=b.destinationTexture.height}=b,{framebuffer:l,destroyFramebuffer:m}=ae(e),[n,o]=g,[p,q,r]=h,s=a.gl.bindFramebuffer(36160,l.handle);if(i instanceof N)c=i,j=Number.isFinite(j)?j:c.width,k=Number.isFinite(k)?k:c.height,c._bind(0),d=c.glTarget;else throw Error("invalid destination");switch(d){case 3553:case 34067:a.gl.copyTexSubImage2D(d,f,p,q,n,o,j,k);break;case 35866:case 32879:a.gl.copyTexSubImage3D(d,f,p,q,r,n,o,j,k)}c&&c._unbind(),a.gl.bindFramebuffer(36160,s),m&&l.destroy()}(this.device,b.options);break;default:throw Error(b.name)}}}function ae(a){if(a instanceof I.Texture){let{width:b,height:c,id:d}=a;return{framebuffer:a.device.createFramebuffer({id:`framebuffer-for-${d}`,width:b,height:c,colorAttachments:[a]}),destroyFramebuffer:!0}}return{framebuffer:a,destroyFramebuffer:!1}}var af=q;class ag extends af.Resource{static defaultClearColor=[0,0,0,1];static defaultClearDepth=1;static defaultClearStencil=0;get[Symbol.toStringTag](){return"RenderPass"}constructor(a,b){super(a,b=ag.normalizeProps(a,b),ag.defaultProps)}static normalizeProps(a,b){return b}static defaultProps={...af.Resource.defaultProps,framebuffer:null,parameters:void 0,clearColor:ag.defaultClearColor,clearColors:void 0,clearDepth:ag.defaultClearDepth,clearStencil:ag.defaultClearStencil,depthReadOnly:!1,stencilReadOnly:!1,discard:!1,occlusionQuerySet:void 0,timestampQuerySet:void 0,beginTimestampIndex:void 0,endTimestampIndex:void 0}}let ah=[1,2,4,8];class ai extends ag{device;handle=null;glParameters={};constructor(a,b){let c;if(super(a,b),this.device=a,!b?.parameters?.viewport)if(b?.framebuffer){const{width:a,height:d}=b.framebuffer;c=[0,0,a,d]}else{const[b,d]=a.getDefaultCanvasContext().getDrawingBufferSize();c=[0,0,b,d]}this.device.pushState(),this.setParameters({viewport:c,...this.props.parameters});const d=this.props.framebuffer;if(this.props.framebuffer&&d?.handle){const a=this.props.framebuffer.colorAttachments.map((a,b)=>36064+b);this.device.gl.drawBuffers(a)}else this.device.gl.drawBuffers([1029]);this.clear()}end(){this.device.popState()}pushDebugGroup(a){}popDebugGroup(){}insertDebugMarker(a){}setParameters(a={}){let b={...this.glParameters};b.framebuffer=this.props.framebuffer||null,this.props.depthReadOnly&&(b.depthMask=!this.props.depthReadOnly),b.stencilMask=+!this.props.stencilReadOnly,b[35977]=this.props.discard,a.viewport&&(a.viewport.length>=6?(b.viewport=a.viewport.slice(0,4),b.depthRange=[a.viewport[4],a.viewport[5]]):b.viewport=a.viewport),a.scissorRect&&(b.scissorTest=!0,b.scissor=a.scissorRect),a.blendConstant&&(b.blendColor=a.blendConstant),a.stencilReference&&(console.warn("RenderPassParameters.stencilReference not yet implemented in WebGL"),b[2967]=a.stencilReference),"colorMask"in a&&(b.colorMask=ah.map(b=>!!(b&a.colorMask))),this.glParameters=b,(0,y.setGLParameters)(this.device.gl,b)}beginOcclusionQuery(a){let b=this.props.occlusionQuerySet;b?.beginOcclusionQuery()}endOcclusionQuery(){let a=this.props.occlusionQuerySet;a?.endOcclusionQuery()}clear(){let a={...this.glParameters},b=0;this.props.clearColors&&this.props.clearColors.forEach((a,b)=>{a&&this.clearColorBuffer(b,a)}),!1!==this.props.clearColor&&void 0===this.props.clearColors&&(b|=16384,a.clearColor=this.props.clearColor),!1!==this.props.clearDepth&&(b|=256,a.clearDepth=this.props.clearDepth),!1!==this.props.clearStencil&&(b|=1024,a.clearStencil=this.props.clearStencil),0!==b&&J(this.device.gl,a,()=>{this.device.gl.clear(b)})}clearColorBuffer(a=0,b=[0,0,0,0]){J(this.device.gl,{framebuffer:this.props.framebuffer},()=>{switch(b.constructor){case Int8Array:case Int16Array:case Int32Array:this.device.gl.clearBufferiv(6144,a,b);break;case Uint8Array:case Uint8ClampedArray:case Uint16Array:case Uint32Array:this.device.gl.clearBufferuiv(6144,a,b);break;case Float32Array:this.device.gl.clearBufferfv(6144,a,b);break;default:throw Error("clearColorBuffer: color must be typed array")}})}}class aj extends aa{device;handle=null;commandBuffer;constructor(a,b){super(a,b),this.device=a,this.commandBuffer=new ad(a)}destroy(){}finish(){return this.commandBuffer}beginRenderPass(a){return new ai(this.device,a)}beginComputePass(a){throw Error("ComputePass not supported in WebGL")}copyBufferToBuffer(a){this.commandBuffer.commands.push({name:"copy-buffer-to-buffer",options:a})}copyBufferToTexture(a){this.commandBuffer.commands.push({name:"copy-buffer-to-texture",options:a})}copyTextureToBuffer(a){this.commandBuffer.commands.push({name:"copy-texture-to-buffer",options:a})}copyTextureToTexture(a){this.commandBuffer.commands.push({name:"copy-texture-to-texture",options:a})}pushDebugGroup(a){}popDebugGroup(){}insertDebugMarker(a){}resolveQuerySet(a,b,c){}}var ak=a.i(64356);function al(a,b){let c={};for(let e of a.attributes){let f=function(a,b,c){let e=function(a,b){let c=a.attributes.find(a=>a.name===b);return c||d.log.warn(`shader layout attribute "${b}" not present in shader`),c||null}(a,c),f=function(a,b){var c=a;for(let a of c)(a.attributes&&a.format||!a.attributes&&!a.format)&&d.log.warn(`BufferLayout ${name} must have either 'attributes' or 'format' field`);let e=function(a,b){for(let c of a)if(c.format&&c.name===b)return{attributeName:c.name,bufferName:b,stepMode:c.stepMode,vertexFormat:c.format,byteOffset:0,byteStride:c.byteStride||0};return null}(a,b);return e||(e=function(a,b){for(let c of a){let a=c.byteStride;if("number"!=typeof c.byteStride)for(let b of c.attributes||[])a+=(0,ak.getVertexFormatInfo)(b.format).byteLength;let d=c.attributes?.find(a=>a.attribute===b);if(d)return{attributeName:d.attribute,bufferName:c.name,stepMode:c.stepMode,vertexFormat:d.format,byteOffset:d.byteOffset,byteStride:a}}return null}(a,b))?e:(d.log.warn(`layout for attribute "${b}" not present in buffer layout`),null)}(b,c);if(!e)return null;let g=T(e.type),h=(0,ak.getCompatibleVertexFormat)(g),i=f?.vertexFormat||h,j=(0,ak.getVertexFormatInfo)(i);return{attributeName:f?.attributeName||e.name,bufferName:f?.bufferName||e.name,location:e.location,shaderType:e.type,primitiveType:g.primitiveType,shaderComponents:g.components,vertexFormat:i,bufferDataType:j.type,bufferComponents:j.components,normalized:j.normalized,integer:g.integer,stepMode:f?.stepMode||e.stepMode||"vertex",byteOffset:f?.byteOffset||0,byteStride:f?.byteStride||0}}(a,b,e.name);f&&(c[e.name]=f)}return c}function am(a,b,c=16){let d=al(a,b),e=Array(c).fill(null);for(let a of Object.values(d))e[a.location]=a;return e}a.s(["getAttributeInfosByLocation",()=>am,"getAttributeInfosFromLayouts",()=>al],13193);var an=q;class ao extends an.Resource{static defaultProps={...an.Resource.defaultProps,shaderLayout:void 0,bufferLayout:[]};get[Symbol.toStringTag](){return"VertexArray"}maxVertexAttributes;attributeInfos;indexBuffer=null;attributes;constructor(a,b){super(a,b,ao.defaultProps),this.maxVertexAttributes=a.limits.maxVertexAttributes,this.attributes=Array(this.maxVertexAttributes).fill(null),this.attributeInfos=am(b.shaderLayout,b.bufferLayout,this.maxVertexAttributes)}setConstantWebGL(a,b){this.device.reportError(Error("constant attributes not supported"),this)()}}function ap(a){return(!b||b.byteLength<a)&&(b=new ArrayBuffer(a)),b}function aq(a,b){let c=ap(a.BYTES_PER_ELEMENT*b);return new a(c,0,b)}a.s(["getScratchArray",()=>aq,"getScratchArrayBuffer",()=>ap],83045);var ar=a.i(7951),as=a.i(61311),at=a.i(90341),au=a.i(72670);class av extends ao{get[Symbol.toStringTag](){return"VertexArray"}device;handle;buffer=null;bufferValue=null;static isConstantAttributeZeroSupported(a){return"Chrome"===((0,ar.isBrowser)()?(0,as.isElectron)(void 0)?"Electron":(at.navigator.userAgent||"").indexOf("Edge")>-1?"Edge":globalThis.chrome?"Chrome":globalThis.safari?"Safari":globalThis.mozInnerScreenX?"Firefox":"Unknown":"Node")}constructor(a,b){super(a,b),this.device=a,this.handle=this.device.gl.createVertexArray()}destroy(){super.destroy(),this.buffer&&this.buffer?.destroy(),this.handle&&(this.device.gl.deleteVertexArray(this.handle),this.handle=void 0)}setIndexBuffer(a){if(a&&34963!==a.glTarget)throw Error("Use .setBuffer()");this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34963,a?a.handle:null),this.indexBuffer=a,this.device.gl.bindVertexArray(null)}setBuffer(a,b){if(34963===b.glTarget)throw Error("Use .setIndexBuffer()");let{size:c,type:d,stride:e,offset:f,normalized:g,integer:h,divisor:i}=this._getAccessor(a);this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34962,b.handle),h?this.device.gl.vertexAttribIPointer(a,c,d,e,f):this.device.gl.vertexAttribPointer(a,c,d,g,e,f),this.device.gl.bindBuffer(34962,null),this.device.gl.enableVertexAttribArray(a),this.device.gl.vertexAttribDivisor(a,i||0),this.attributes[a]=b,this.device.gl.bindVertexArray(null)}setConstantWebGL(a,b){this._enable(a,!1),this.attributes[a]=b}bindBeforeRender(){this.device.gl.bindVertexArray(this.handle),this._applyConstantAttributes()}unbindAfterRender(){this.device.gl.bindVertexArray(null)}_applyConstantAttributes(){for(let a=0;a<this.maxVertexAttributes;++a){let b=this.attributes[a];ArrayBuffer.isView(b)&&this.device.setConstantAttributeWebGL(a,b)}}_getAccessor(a){let b=this.attributeInfos[a];if(!b)throw Error(`Unknown attribute location ${a}`);let c=(0,au.getGLFromVertexType)(b.bufferDataType);return{size:b.bufferComponents,type:c,stride:b.byteStride,offset:b.byteOffset,normalized:b.normalized,integer:b.integer,divisor:+("instance"===b.stepMode)}}_enable(a,b=!0){let c=av.isConstantAttributeZeroSupported(this.device)||0!==a;(b||c)&&(a=Number(a),this.device.gl.bindVertexArray(this.handle),b?this.device.gl.enableVertexAttribArray(a):this.device.gl.disableVertexAttribArray(a),this.device.gl.bindVertexArray(null))}getConstantBuffer(a,b){var c;let d=Array.isArray(c=b)?new Float32Array(c):c,e=d.byteLength*a,f=d.length*a;if(this.buffer&&e!==this.buffer.byteLength)throw Error(`Buffer size is immutable, byte length ${e} !== ${this.buffer.byteLength}.`);let g=!this.buffer;if(this.buffer=this.buffer||this.device.createBuffer({byteLength:e}),g||=!function(a,b){if(!a||!b||a.length!==b.length||a.constructor!==b.constructor)return!1;for(let c=0;c<a.length;++c)if(a[c]!==b[c])return!1;return!0}(d,this.bufferValue)){let a=aq(b.constructor,f);!function(a){let{target:b,source:c,start:d=0,count:e=1}=a,f=c.length,g=e*f,h=0;for(let a=d;h<f;h++)b[a++]=c[h];for(;h<g;)h<g-h?(b.copyWithin(d+h,d,d+h),h*=2):(b.copyWithin(d+h,d,d+g-h),h=g);a.target}({target:a,source:d,start:0,count:f}),this.buffer.write(a),this.bufferValue=b}return this.buffer}}var aw=q;class ax extends aw.Resource{static defaultProps={...aw.Resource.defaultProps,layout:void 0,buffers:{}};get[Symbol.toStringTag](){return"TransformFeedback"}constructor(a,b){super(a,b,ax.defaultProps)}}class ay extends ax{device;gl;handle;layout;buffers={};unusedBuffers={};bindOnUse=!0;_bound=!1;constructor(a,b){super(a,b),this.device=a,this.gl=a.gl,this.handle=this.props.handle||this.gl.createTransformFeedback(),this.layout=this.props.layout,b.buffers&&this.setBuffers(b.buffers),Object.seal(this)}destroy(){this.gl.deleteTransformFeedback(this.handle),super.destroy()}begin(a="point-list"){this.gl.bindTransformFeedback(36386,this.handle),this.bindOnUse&&this._bindBuffers(),this.gl.beginTransformFeedback(function(a){switch(a){case"point-list":return 0;case"line-list":case"line-strip":return 1;case"triangle-list":case"triangle-strip":return 4;default:throw Error(a)}}(a))}end(){this.gl.endTransformFeedback(),this.bindOnUse&&this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null)}setBuffers(a){this.buffers={},this.unusedBuffers={},this.bind(()=>{for(let b in a)this.setBuffer(b,a[b])})}setBuffer(a,b){let c=this._getVaryingIndex(a),{buffer:e,byteLength:f,byteOffset:g}=this._getBufferRange(b);if(c<0){this.unusedBuffers[a]=e,d.log.warn(`${this.id} unusedBuffers varying buffer ${a}`)();return}this.buffers[c]={buffer:e,byteLength:f,byteOffset:g},this.bindOnUse||this._bindBuffer(c,e,g,f)}getBuffer(a){if(az(a))return this.buffers[a]||null;let b=this._getVaryingIndex(a);return b>=0?this.buffers[b]:null}bind(a=this.handle){let b;return"function"!=typeof a?(this.gl.bindTransformFeedback(36386,a),this):(this._bound?b=a():(this.gl.bindTransformFeedback(36386,this.handle),this._bound=!0,b=a(),this._bound=!1,this.gl.bindTransformFeedback(36386,null)),b)}unbind(){this.bind(null)}_getBufferRange(a){if(a instanceof p)return{buffer:a,byteOffset:0,byteLength:a.byteLength};let{buffer:b,byteOffset:c=0,byteLength:d=a.buffer.byteLength}=a;return{buffer:b,byteOffset:c,byteLength:d}}_getVaryingIndex(a){if(az(a))return Number(a);for(let b of this.layout.varyings||[])if(a===b.name)return b.location;return -1}_bindBuffers(){for(let a in this.buffers){let{buffer:b,byteLength:c,byteOffset:d}=this._getBufferRange(this.buffers[a]);this._bindBuffer(Number(a),b,d,c)}}_unbindBuffers(){for(let a in this.buffers)this.gl.bindBufferBase(35982,Number(a),null)}_bindBuffer(a,b,c=0,d){let e=b&&b.handle;e&&void 0!==d?this.gl.bindBufferRange(35982,a,e,c,d):this.gl.bindBufferBase(35982,a,e)}}function az(a){return"number"==typeof a?Number.isInteger(a):/^\d+$/.test(a)}var aA=q;class aB extends aA.Resource{get[Symbol.toStringTag](){return"QuerySet"}constructor(a,b){super(a,b,aB.defaultProps)}static defaultProps={...aA.Resource.defaultProps,type:void 0,count:void 0}}class aC extends aB{device;handle;target=null;_queryPending=!1;_pollingPromise=null;get[Symbol.toStringTag](){return"Query"}constructor(a,b){if(super(a,b),this.device=a,b.count>1)throw Error("WebGL QuerySet can only have one value");const c=this.device.gl.createQuery();if(!c)throw Error("WebGL query not supported");this.handle=c,Object.seal(this)}destroy(){this.device.gl.deleteQuery(this.handle)}beginTimestampQuery(){return this._begin(35007)}endTimestampQuery(){this._end()}beginOcclusionQuery(a){return this._begin(a?.conservative?36202:35887)}endOcclusionQuery(){this._end()}beginTransformFeedbackQuery(){return this._begin(35976)}endTransformFeedbackQuery(){this._end()}async resolveQuery(){return[await this.pollQuery()]}_begin(a){this._queryPending||(this.target=a,this.device.gl.beginQuery(this.target,this.handle))}_end(){!this._queryPending&&this.target&&(this.device.gl.endQuery(this.target),this.target=null,this._queryPending=!0)}isResultAvailable(){if(!this._queryPending)return!1;let a=this.device.gl.getQueryParameter(this.handle,34919);return a&&(this._queryPending=!1),a}isTimerDisjoint(){return this.device.gl.getParameter(36795)}getResult(){return this.device.gl.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}pollQuery(a=1/0){if(this._pollingPromise)return this._pollingPromise;let b=0;return this._pollingPromise=new Promise((c,d)=>{let e=()=>{this.isResultAvailable()?(c(this.getResult()),this._pollingPromise=null):b++>a?(d("Timed out"),this._pollingPromise=null):requestAnimationFrame(e)};requestAnimationFrame(e)}),this._pollingPromise}}var aD=a.i(74160),aE=a.i(10052);function aF(a){switch(a){case 6406:case 33326:case 6403:case 36244:return 1;case 33339:case 33340:case 33328:case 33320:case 33319:return 2;case 6407:case 36248:case 34837:return 3;case 6408:case 36249:case 34836:return 4;default:return 0}}let aG={5124:"sint32",5125:"uint32",5122:"sint16",5123:"uint16",5120:"sint8",5121:"uint8",5126:"float32",5131:"float16",33635:"uint16",32819:"uint16",32820:"uint16",33640:"uint32",35899:"uint32",35902:"uint32",34042:"uint32",36269:"uint32"};function aH(a){return a instanceof aD.Framebuffer?{framebuffer:a,deleteFramebuffer:!1}:{framebuffer:function(a,b){let{device:c,width:d,height:e,id:f}=a;return c.createFramebuffer({...void 0,id:`framebuffer-for-${f}`,width:d,height:e,colorAttachments:[a]})}(a),deleteFramebuffer:!0}}var aI=a.i(40280);class aJ extends c.Device{type="webgl";handle;features;limits;info;canvasContext;preferredColorFormat="rgba8unorm";preferredDepthFormat="depth24plus";commandEncoder;lost;_resolveContextLost;gl;_constants;_extensions={};_polyfilled=!1;spectorJS;get[Symbol.toStringTag](){return"WebGLDevice"}toString(){return`${this[Symbol.toStringTag]}(${this.id})`}isVertexFormatSupported(a){return"unorm8x4-bgra"!==a}constructor(a){super({...a,id:a.id||function(a="id"){n[a]=n[a]||1;let b=n[a]++;return`${a}-${b}`}("webgl-device")});const b=c.Device._getCanvasContextProps(a);if(!b)throw Error("WebGLDevice requires props.createCanvasContext to be set");let m=b.canvas?.gl?.device;if(m)throw Error(`WebGL context already attached to device ${m.id}`);this.canvasContext=new j.WebGLCanvasContext(this,b),this.lost=new Promise(a=>{this._resolveContextLost=a});const o={...a.webgl};"premultiplied"===b.alphaMode&&(o.premultipliedAlpha=!0),void 0!==a.powerPreference&&(o.powerPreference=a.powerPreference);const p=this.props._handle||(0,f.createBrowserContext)(this.canvasContext.canvas,{onContextLost:a=>this._resolveContextLost?.({reason:"destroyed",message:"Entered sleep mode, or too many apps or browser tabs are using the GPU."}),onContextRestored:a=>console.log("WebGL context restored")},o);if(!p)throw Error("WebGL context creation failed");if(m=p.device){if(a._reuseDevices)return d.log.log(1,`Not creating a new Device, instead returning a reference to Device ${m.id} already attached to WebGL context`,m)(),m._reused=!0,m;throw Error(`WebGL context already attached to device ${m.id}`)}this.handle=p,this.gl=p,this.spectorJS=(0,k.initializeSpectorJS)({...this.props,gl:this.handle}),this.gl.device=this,this.gl._version=2,this.info=(0,g.getDeviceInfo)(this.gl,this._extensions),this.limits=new i.WebGLDeviceLimits(this.gl),this.features=new h.WebGLDeviceFeatures(this.gl,this._extensions,this.props._disabledFeatures),this.props._initializeFeatures&&this.features.initializeFeatures(),new e.WebGLStateTracker(this.gl,{log:(...a)=>d.log.log(1,...a)()}).trackState(this.gl,{copyState:!1});const q=a.debugWebGL||a.debug,r=a.debugWebGL;q&&(this.gl=(0,l.makeDebugContext)(this.gl,{debugWebGL:q,traceWebGL:r}),d.log.warn("WebGL debug mode activated. Performance reduced.")(),a.debugWebGL&&(d.log.level=Math.max(d.log.level,1))),this.commandEncoder=new aj(this,{id:`${this}-command-encoder`})}destroy(){this.props._reuseDevices||this._reused||delete this.gl.device}get isLost(){return this.gl.isContextLost()}getTextureByteAlignment(){return 4}createCanvasContext(a){throw Error("WebGL only supports a single canvas")}createBuffer(a){return new p(this,this._normalizeBufferProps(a))}createTexture(a){return new N(this,a)}createExternalTexture(a){throw Error("createExternalTexture() not implemented")}createSampler(a){return new H(this,a)}createShader(a){return new w(this,a)}createFramebuffer(a){return new P.WEBGLFramebuffer(this,a)}createVertexArray(a){return new av(this,a)}createTransformFeedback(a){return new ay(this,a)}createQuerySet(a){return new aC(this,a)}createRenderPipeline(a){return new $(this,a)}createComputePipeline(a){throw Error("ComputePipeline not supported in WebGL")}createCommandEncoder(a={}){return new aj(this,a)}submit(a){a||(a=this.commandEncoder.finish(),this.commandEncoder.destroy(),this.commandEncoder=this.createCommandEncoder({id:`${this.id}-default-encoder`})),a._executeCommands()}readPixelsToArrayWebGL(a,b){return function(a,b){let{sourceX:c=0,sourceY:d=0,sourceAttachment:e=0}=b||{},{target:f=null,sourceWidth:g,sourceHeight:h,sourceDepth:i,sourceFormat:j,sourceType:k}=b||{},{framebuffer:l,deleteFramebuffer:m}=aH(a),{gl:n,handle:o}=l;g||=l.width,h||=l.height;let p=l.colorAttachments[e]?.texture;if(!p)throw Error(`Invalid framebuffer attachment ${e}`);i=p?.depth||1,j||=p?.glFormat||6408,k||=p?.glType||5121,f=function(a,b,c,d,e,f){if(a)return a;let g=aG[b||=5121];return new((0,aE.getTypedArrayConstructor)(g))(d*e*aF(c))}(f,k,j,g,h,0);let q=(0,aE.getDataType)(f);k=k||Z[q];let r=n.bindFramebuffer(36160,o);return n.readBuffer(36064+e),n.readPixels(c,d,g,h,j,k,f),n.readBuffer(36064),n.bindFramebuffer(36160,r||null),m&&l.destroy(),f}(a,b)}readPixelsToBufferWebGL(a,b){return function(a,b){let{target:c,sourceX:d=0,sourceY:e=0,sourceFormat:f=6408,targetByteOffset:g=0}=b||{},{sourceWidth:h,sourceHeight:i,sourceType:j}=b||{},{framebuffer:k,deleteFramebuffer:l}=aH(a);h=h||k.width,i=i||k.height,j=j||5121;let m=c;if(!m){let a=g+h*i*aF(f)*function(a){switch(a){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return 0}}(j);m=k.device.createBuffer({byteLength:a})}let n=a.device.createCommandEncoder();return n.copyTextureToBuffer({sourceTexture:a,width:h,height:i,origin:[d,e],destinationBuffer:m,byteOffset:g}),n.destroy(),l&&k.destroy(),m}(a,b)}setParametersWebGL(a){(0,y.setGLParameters)(this.gl,a)}getParametersWebGL(a){return(0,y.getGLParameters)(this.gl,a)}withParametersWebGL(a,b){return J(this.gl,a,b)}resetWebGL(){d.log.warn("WebGLDevice.resetWebGL is deprecated, use only for debugging")(),(0,y.resetGLParameters)(this.gl)}_getDeviceSpecificTextureFormatCapabilities(a){return(0,m.getTextureFormatCapabilitiesWebGL)(this.gl,a,this._extensions)}loseDevice(){let a=!1,b=this.getExtension("WEBGL_lose_context").WEBGL_lose_context;return b&&(a=!0,b.loseContext()),this._resolveContextLost?.({reason:"destroyed",message:"Application triggered context loss"}),a}pushState(){e.WebGLStateTracker.get(this.gl).push()}popState(){e.WebGLStateTracker.get(this.gl).pop()}getGLKey(a,b){let c=Number(a);for(let a in this.gl)if(this.gl[a]===c)return`GL.${a}`;return b?.emptyIfUnknown?"":String(a)}getGLKeys(a){let b={emptyIfUnknown:!0};return Object.entries(a).reduce((a,[c,d])=>(a[`${c}:${this.getGLKey(c,b)}`]=`${d}:${this.getGLKey(d,b)}`,a),{})}setConstantAttributeWebGL(a,b){let c=this.limits.maxVertexAttributes;this._constants=this._constants||Array(c).fill(null);let e=this._constants[a];switch(e&&function(a,b){if(!a||!b||a.length!==b.length||a.constructor!==b.constructor)return!1;for(let c=0;c<a.length;++c)if(a[c]!==b[c])return!1;return!0}(e,b)&&d.log.info(1,`setConstantAttributeWebGL(${a}) could have been skipped, value unchanged`)(),this._constants[a]=b,b.constructor){case Float32Array:var f,g,h,i,j,k,l=this,m=a,n=b;switch(n.length){case 1:l.gl.vertexAttrib1fv(m,n);break;case 2:l.gl.vertexAttrib2fv(m,n);break;case 3:l.gl.vertexAttrib3fv(m,n);break;case 4:l.gl.vertexAttrib4fv(m,n)}break;case Int32Array:f=this,g=a,h=b,f.gl.vertexAttribI4iv(g,h);break;case Uint32Array:i=this,j=a,k=b,i.gl.vertexAttribI4uiv(j,k);break;default:throw Error("constant")}}getExtension(a){return(0,aI.getWebGLExtension)(this.gl,a,this._extensions),this._extensions}_setWebGLDebugMetadata(a,b,c){a.luma=b,a.__SPECTOR_Metadata={props:c.spector,id:c.spector.id}}}a.s(["WebGLDevice",()=>aJ],2280)}];

//# sourceMappingURL=090f3__pnpm_306d799f._.js.map