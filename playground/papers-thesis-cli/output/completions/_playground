#compdef playground
# Zsh completion for playground CLI
# Generated by papers-thesis-cli completions generator
#
# Installation:
#   1. Copy to /usr/local/share/zsh/site-functions/_playground
#   2. Or add to ~/.zsh/completions/_playground
#   3. Ensure fpath includes the directory: fpath=(~/.zsh/completions $fpath)
#   4. Run: autoload -Uz compinit && compinit

_playground() {
    local context state state_descr line
    typeset -A opt_args

    local -a commands
    commands=(
        'papers:Manage research papers'
        'thesis:Manage thesis documents'
        'config:Manage CLI configuration'
        'meta:Metadata and introspection'
    )

    _arguments -C \
        '(-h --help)'{-h,--help}'[Show help information]' \
        '(-v --verbose)'{-v,--verbose}'[Enable verbose output]' \
        '(-q --quiet)'{-q,--quiet}'[Suppress non-essential output]' \
        '(-f --format)'{-f,--format}'[Output format]:format:(json json-pretty yaml table latex csv)' \
        '(-o --output)'{-o,--output}'[Output file path]:file:_files' \
        '(-c --config)'{-c,--config}'[Configuration file]:file:_files -g "*.{json,yaml,yml,mjs,js}"' \
        '--version[Show version information]' \
        '1:command:->command' \
        '*::arg:->args'

    case "$state" in
        command)
            _describe -t commands 'playground command' commands
            ;;
        args)
            case $words[1] in
                papers)
                    _playground_papers
                    ;;
                thesis)
                    _playground_thesis
                    ;;
                config)
                    _playground_config
                    ;;
                meta)
                    _playground_meta
                    ;;
            esac
            ;;
    esac
}

# Completions for papers command
_playground_papers() {
    local -a subcommands
    subcommands=(
            'generate:Generate paper from template'
            'list:List available paper families'
            'validate:Validate paper structure'
    )

    _arguments -C \
        '1:subcommand:->subcommand' \
        '*::arg:->args'

    case "$state" in
        subcommand)
            _describe -t subcommands 'papers subcommand' subcommands
            ;;
        args)
            case $words[1] in
                generate)
                    _arguments \
                    '--family[Paper family/structure type]:family:(imrad dsr argument contribution)' \
                    '--title[Paper title]:title:' \
                    '--author[Author name]:author:' \
                    '--affiliation[Author affiliation]:affiliation:' \
                    '--abstract[Paper abstract]:abstract:' \
                    '--output[Output file path]:file:_files' \
                    '(-f --format)'{-f,--format}'[Output format]:format:(json latex yaml)'
                    ;;
                list)
                    _arguments \
                    '--verbose[Show detailed information]' \
                    '(-f --format)'{-f,--format}'[Output format]:format:(json yaml table)'
                    ;;
                validate)
                    _arguments \
                    ':path:_files' \
                    '--strict[Enable strict validation]' \
                    '(-f --format)'{-f,--format}'[Output format]:format:(json table)'
                    ;;
            esac
            ;;
    esac
}

# Completions for thesis command
_playground_thesis() {
    local -a subcommands
    subcommands=(
            'generate:Generate thesis from template'
            'list:List available thesis types'
            'schedule:Manage thesis schedule'
    )

    _arguments -C \
        '1:subcommand:->subcommand' \
        '*::arg:->args'

    case "$state" in
        subcommand)
            _describe -t subcommands 'thesis subcommand' subcommands
            ;;
        args)
            case $words[1] in
                generate)
                    _arguments \
                    '--type[Thesis type]:type:(masters phd doctoral)' \
                    '--title[Thesis title]:title:' \
                    '--author[Author name]:author:' \
                    '--advisor[Advisor name]:advisor:' \
                    '--institution[Institution name]:institution:' \
                    '--department[Department name]:department:' \
                    '--output[Output file path]:file:_files' \
                    '(-f --format)'{-f,--format}'[Output format]:format:(json latex yaml)'
                    ;;
                list)
                    _arguments \
                    '--verbose[Show detailed information]' \
                    '(-f --format)'{-f,--format}'[Output format]:format:(json yaml table)'
                    ;;
                schedule)
                    _arguments \
                    '--milestone[Milestone name]:milestone:' \
                    '--date[Target date]:date:'
                    ;;
            esac
            ;;
    esac
}

# Completions for config command
_playground_config() {
    local -a subcommands
    subcommands=(
            'list:List all configuration values'
            'get:Get a configuration value'
            'set:Set a configuration value'
            'reset:Reset configuration to defaults'
    )

    _arguments -C \
        '1:subcommand:->subcommand' \
        '*::arg:->args'

    case "$state" in
        subcommand)
            _describe -t subcommands 'config subcommand' subcommands
            ;;
        args)
            case $words[1] in
                list)
                    _arguments \
                    ':'
                    ;;
                get)
                    _arguments \
                    ':key:'
                    ;;
                set)
                    _arguments \
                    ':key:' \
                    ':value:'
                    ;;
                reset)
                    _arguments \
                    '--all[Reset all values]'
                    ;;
            esac
            ;;
    esac
}

# Completions for meta command
_playground_meta() {
    local -a subcommands
    subcommands=(
            'sparql:Execute SPARQL query'
            'schema:Show schema information'
            'version:Show version information'
            'completions:Generate shell completions'
    )

    _arguments -C \
        '1:subcommand:->subcommand' \
        '*::arg:->args'

    case "$state" in
        subcommand)
            _describe -t subcommands 'meta subcommand' subcommands
            ;;
        args)
            case $words[1] in
                sparql)
                    _arguments \
                    ':query:' \
                    '(-f --format)'{-f,--format}'[Output format]:format:(json table csv)' \
                    '--file[Query file]:file:_files'
                    ;;
                schema)
                    _arguments \
                    '(-f --format)'{-f,--format}'[Output format]:format:(json yaml turtle)'
                    ;;
                version)
                    _arguments \
                    ':'
                    ;;
                completions)
                    _arguments \
                    '--shell[Target shell]:shell:(bash zsh fish powershell)' \
                    '--output[Output file]:file:_files'
                    ;;
            esac
            ;;
    esac
}

# Hook into compinit
_playground "$@"
